<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Docker Builder | Integrations | Packer | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Explore Packer product documentation, tutorials, and examples."/><meta name="twitter:description" content="Explore Packer product documentation, tutorials, and examples."/><meta property="og:site_name" content="Docker Builder | Integrations | Packer | HashiCorp Developer"/><meta property="og:title" content="Docker Builder | Integrations | Packer | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/packer/integrations/hashicorp/docker/latest/components/builder/docker"/><link rel="icon" href="/favicon.ico" sizes="48x48"/><link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="ahrefs-site-verification" content="9d739b21c466a84dae91df1c79396081a9072152e64f765c9390fed6f249fb84"/><meta name="zd-site-verification" content="xnvnvv1i0wl4tf0pzaymb" data-product="hcp"/><meta name="zd-site-verification" content="36fp2i1pj67d8cjtzf4fi9" data-product="terraform"/><meta name="zd-site-verification" content="nbe87kfyp1sck7b13vj1i" data-product="packer"/><meta name="zd-site-verification" content="wvsmmqa1cfb9am9zlwfj" data-product="consul"/><meta name="zd-site-verification" content="cw22oopfwr68ujj0n5pn9i" data-product="boundary"/><meta name="zd-site-verification" content="lkslvganwfgfqfwpdeicgh" data-product="vault"/><meta name="zd-site-verification" content="jl2wp2hoej9rz6c8rmqdns" data-product="nomad"/><meta name="zd-site-verification" content="2eb0cu6xceo73t0038m0tb" data-product="waypoint"/><meta name="zd-site-verification" content="n52xisxdf3higs2q9kuogd" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Packer","item":"https://developer.hashicorp.com/packer"},{"@type":"ListItem","position":3,"name":"Integrations","item":"https://developer.hashicorp.com/packer/integrations"},{"@type":"ListItem","position":4,"name":"Docker","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/docker"},{"@type":"ListItem","position":5,"name":"v1.1.1","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/docker/v1.1.1"},{"@type":"ListItem","position":6,"name":"Docker","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/docker/latest/components/builder/docker"}]}]</script><meta name="next-head-count" content="32"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f49486d3b4c819d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f49486d3b4c819d0.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a3fdbf75d77eb323.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a3fdbf75d77eb323.css" data-n-p=""/><link rel="preload" href="/_next/static/css/a23a4d5b8f64c49d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a23a4d5b8f64c49d.css" data-n-p=""/><link rel="preload" href="/_next/static/css/686380cdcb9bba8b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/686380cdcb9bba8b.css" data-n-p=""/><link rel="preload" href="/_next/static/css/6fa5efbca95ceafa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6fa5efbca95ceafa.css" data-n-p=""/><link rel="preload" href="/_next/static/css/5939e59586e095e7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5939e59586e095e7.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-842277f4ad2b003f.js" defer=""></script><script src="/_next/static/chunks/framework-7063787c3be570d0.js" defer=""></script><script src="/_next/static/chunks/main-7bf85f85b965ad61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0a33c1c146a72462.js" defer=""></script><script src="/_next/static/chunks/7166-70084e7c41a66411.js" defer=""></script><script src="/_next/static/chunks/1395-1eb65df04043100c.js" defer=""></script><script src="/_next/static/chunks/2273-6dfd48e8418afcdf.js" defer=""></script><script src="/_next/static/chunks/5675-7108b5e9113ea2a3.js" defer=""></script><script src="/_next/static/chunks/2298-0bfeeb8538768036.js" defer=""></script><script src="/_next/static/chunks/4491-3e2af2e825fdeeca.js" defer=""></script><script src="/_next/static/chunks/9554-d740b5e666a16cc0.js" defer=""></script><script src="/_next/static/chunks/7427-61de0b9ecdc61a14.js" defer=""></script><script src="/_next/static/chunks/5261-c0c32f534b764eb3.js" defer=""></script><script src="/_next/static/chunks/6787-5406eb82ed1c8857.js" defer=""></script><script src="/_next/static/chunks/3786-bfb5477c5f7f7c76.js" defer=""></script><script src="/_next/static/chunks/5064-fcee060f06383f45.js" defer=""></script><script src="/_next/static/chunks/pages/%5BproductSlug%5D/integrations/%5BorganizationSlug%5D/%5BintegrationSlug%5D/%5BintegrationVersion%5D/components/%5BcomponentType%5D/%5BcomponentSlug%5D-5371b3a8c62f9aca.js" defer=""></script><script src="/_next/static/Eq7mQN_7lDQbF6kuSpl3s/_buildManifest.js" defer=""></script><script src="/_next/static/Eq7mQN_7lDQbF6kuSpl3s/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="style_root__dZhZu"><a href="https://www.hashicorp.com/en/blog/hashicorp-officially-joins-the-ibm-family" class="style_linkElem__hCESK"><span class="style_textContainer__6CuI7 g-grid-container"><span class="style_tag__jbHGz g-type-body-small-x-strong">Acquisition complete<!-- --> </span><span class="style_text__rwS0u g-type-body-small">HashiCorp officially joins the IBM family.<span class="style_linkText__E8GJf g-type-body-small-x-strong"> <!-- -->Learn more</span></span></span></a><button class="style_closeButton__57J9w"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_hashicorp-officially-joins-the-ibm-family.=1')) {
      const element = document.querySelector('.style_root__dZhZu')
      element.classList.remove('style_isShown__D4mb6')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__MT1PZ"><div class="base-layout_root___qiZs" data-layout="base-new"><div class="base-layout_header__XhkxS"><header class="navigation-header_root__oE_HT"><div class="navigation-header_leftSide__V0xlc"><div class="product-page-content_productsDropdown__haUyw"><nav aria-label="Main" data-orientation="horizontal" dir="ltr"><div class="dropdown-menu_root__Hwy5S"><div class="dropdown-menu_activatorWrapper__LxPRt"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__xXb00 g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__bnKKs"><span class="dropdown-menu_activatorLeadingIcon__YQQlH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__gXtly"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__r_cCd"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__AZWxN" id="navigation-header-menu-react-aria-1" style="display:none"><div class="style_root__z3EwE style_productPanel__Z4UFi style_hasSide__15FV8 style_hasSide__ecwjD"><div class="style_mainPanel__MpQn1"><div class="style_column__9is2G style_hasSide__A3F31"><ul class="style_productCategories__j1h4T"><li class="style_productCategory__9UHKG"><span class="hds-text hdsplus-typography-body-300 style_eyebrow__OCUlS">Infrastructure Lifecycle Management</span><ul class="style_productList__uPlTj"><li><a aria-label="Terraform - Manage infrastructure as code" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/terraform"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-terraform-fill flight-icon-display-inline style_terraform__nU44i" aria-hidden="true" fill="currentColor" id=":R9imld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-terraform-fill-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Terraform</span><span class="style_productDesc__bi44f">Manage infrastructure as code</span></div></div></a></li><li><a aria-label="Packer - Build machine images" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/packer"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-packer-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Raimld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-packer-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Packer</span><span class="style_productDesc__bi44f">Build machine images</span></div></div></a></li><li><a aria-label="Nomad - Orchestrate workloads" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/nomad"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-nomad-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Rbimld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-nomad-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Nomad</span><span class="style_productDesc__bi44f">Orchestrate workloads</span></div></div></a></li><li><a aria-label="Waypoint - Standardize application patterns" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/waypoint"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-waypoint-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Rcimld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-waypoint-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Waypoint</span><span class="style_productDesc__bi44f">Standardize application patterns</span></div></div></a></li><li><a aria-label="Vagrant - Build developer environments" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/vagrant"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-vagrant-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Rdimld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vagrant-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Vagrant</span><span class="style_productDesc__bi44f">Build developer environments</span></div></div></a></li></ul></li><li class="style_productCategory__9UHKG"><span class="hds-text hdsplus-typography-body-300 style_eyebrow__OCUlS">Security Lifecycle Management</span><ul class="style_productList__uPlTj"><li><a aria-label="Vault - Centrally manage secrets" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/vault"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-vault-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":R9kmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vault-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Vault</span><span class="style_productDesc__bi44f">Centrally manage secrets</span></div></div></a></li><li><a aria-label="Boundary - Secure remote access" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/boundary"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-boundary-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Rakmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-boundary-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Boundary</span><span class="style_productDesc__bi44f">Secure remote access</span></div></div></a></li><li><a aria-label="HCP Vault Secrets - Manage secrets as a service" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/hcp/docs/vault-secrets"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-vault-secrets flight-icon-display-inline style_hcpVaultSecrets__11wgG" aria-hidden="true" fill="currentColor" id=":Rbkmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vault-secrets-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>HCP Vault Secrets</span><span class="style_productDesc__bi44f">Manage secrets as a service</span></div></div></a></li><li><a aria-label="Consul - Secure network services" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/consul"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-consul-fill-color flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":Rckmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-consul-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Consul</span><span class="style_productDesc__bi44f">Secure network services</span></div></div></a></li><li><a aria-label="HCP Vault Radar - Scan for embedded secrets" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/hcp/docs/vault-radar"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="flight-icon flight-icon-vault-radar flight-icon-display-inline style_hcpVaultRadar__nukMV" aria-hidden="true" fill="currentColor" id=":Rdkmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vault-radar-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>HCP Vault Radar</span><span class="style_productDesc__bi44f">Scan for embedded secrets</span></div></div></a></li></ul></li></ul></div><div class="style_promo__e6yXp style_hasSide__635Xt"><div class="style_icon__rYEcI"><svg class="flight-icon flight-icon-hashicorp flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":R36ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-hashicorp-16"></use></svg></div><div class="style_rightContent__zvciM"><div><div class="style_title__eEtAF">HashiCorp Cloud Platform</div><div class="style_description__ATQzz">Get started in minutes with our cloud products</div></div><a class="style_link__U4Sfy" data-radix-collection-item="" href="/hcp">All HCP Products<svg class="flight-icon flight-icon-external-link flight-icon-display-inline" aria-hidden="true" fill="currentColor" id=":R2l6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-external-link-16"></use></svg></a></div></div></div><div class="style_column__9is2G style_sidePanel__qxYNB"><span class="hds-text hdsplus-typography-body-200 hds-font-weight-semibold">Learn</span><ul class="style_sidePanelItems__i8_HV"><li><a aria-label="Certifications - Get HashiCorp certified" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/certifications"><div class="style_iconBackground__fn5_s"><svg class="flight-icon flight-icon-award flight-icon-display-inline" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rjald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-award-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="hds-text hdsplus-typography-body-200 hds-font-weight-semibold">Certifications</span><span class="style_sidePanelItemDesc__UrOLh">Get HashiCorp certified</span></div></a></li><li><a aria-label="Tutorials - Learn HashiCorp products" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/tutorials"><div class="style_iconBackground__fn5_s"><svg class="flight-icon flight-icon-learn flight-icon-display-inline" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rlald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-learn-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="hds-text hdsplus-typography-body-200 hds-font-weight-semibold">Tutorials</span><span class="style_sidePanelItemDesc__UrOLh">Learn HashiCorp products</span></div></a></li><li><a aria-label="Validated Patterns - Field-tested patterns for using HashiCorp products" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/validated-patterns"><div class="style_iconBackground__fn5_s"><svg class="flight-icon flight-icon-check-circle flight-icon-display-inline" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rnald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-check-circle-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="hds-text hdsplus-typography-body-200 hds-font-weight-semibold">Validated Patterns</span><span class="style_sidePanelItemDesc__UrOLh">Field-tested patterns for using HashiCorp products</span></div></a></li><li><a aria-label="Well-Architected Framework - Adopt HashiCorp best practices" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/well-architected-framework"><div class="style_iconBackground__fn5_s"><svg class="flight-icon flight-icon-layers flight-icon-display-inline" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rpald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-layers-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="hds-text hdsplus-typography-body-200 hds-font-weight-semibold">Well-Architected Framework</span><span class="style_sidePanelItemDesc__UrOLh">Adopt HashiCorp best practices</span></div></a></li></ul></div></div></div></div></nav></div><div class="product-page-content_productLinkAndNav__YTzcr"><a aria-label="Packer home" class="product-icon-text-link_root__bNTSz g-focus-ring-from-box-shadow-dark" href="/packer"><div class="product-icon-text-lockup_root__358wV"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__Zp_5o"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="product-icon-text-lockup_text__nHTL7 hds-typography-body-200">Packer</span></div></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="nav-bar-list-container_nav__C_i0_"><div style="position:relative"><ul data-orientation="horizontal" class="nav-bar-list-container_ul___04HI" dir="ltr"><li><a aria-label="Packer Install" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Install</span></a></li><li><a aria-label="Packer Tutorials" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/tutorials"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Tutorials</span></a></li><li><a aria-label="Packer Documentation" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Documentation</span></a></li><li><a aria-label="Packer Guides" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/guides"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Guides</span></a></li><li><a aria-label="Packer Integrations" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/integrations"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Integrations</span></a></li><li><a aria-label="Packer Try Cloud" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" aria-describedby="opens-in-new-tab-label-react-aria-8" target="_blank" href="https://portal.cloud.hashicorp.com/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-8">(opens in new tab)</span></li></ul></div></nav></div></div><div class="navigation-header_rightSide___Vvh_"><button aria-label="Search" class="command-bar-activator_root__qgVMy g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__ATQTg"><span class="command-bar-activator_leadingIcon__jECP5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M6.344.969a5.375 5.375 0 103.233 9.669l4.174 4.174a.75.75 0 001.06-1.061l-4.173-4.174A5.375 5.375 0 006.344.97zM2.469 6.344a3.875 3.875 0 117.75 0 3.875 3.875 0 01-7.75 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__pTZN_">Search</span></span><span class="command-bar-activator_right__XejfJ"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="cmd-ctrl-icon_root___TToz"><svg xmlns="http://www.w3.org/2000/svg" width="41" height="11" fill="none" viewBox="0 0 41 11"><path fill="#fff" fill-rule="evenodd" d="M4.125 2.063V3h2.25v-.937a2.062 2.062 0 1 1 2.063 2.062H7.5v2.25h.938a2.062 2.062 0 1 1-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 1 1-2.062-2.063H3v-2.25h-.937a2.062 2.062 0 1 1 2.062-2.062m-2.062-.938a.937.937 0 1 0 0 1.875H3v-.937a.937.937 0 0 0-.937-.938M7.5 7.5v.938a.937.937 0 1 0 .938-.938zM6.375 6.375v-2.25h-2.25v2.25zM2.063 7.5H3v.938a.937.937 0 1 1-.937-.938M7.5 3h.938a.937.937 0 1 0-.938-.937z" clip-rule="evenodd"/><path fill="#fff" d="M15.09 10.5 18.085 0h-1.097L14 10.5zM26.387 5.308c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041zM33.207 10.356h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 0 0-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354zM38.638 10.356h1.407V0h-1.407z"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="k-icon_root__a_5pR"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 8 10"><path fill="#fff" d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9z"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__EP1LY"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj"><button aria-controls="disclosure-react-aria-9-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo navigation-header_userDropdownDisclosureActivator__RayIV g-focus-ring-from-box-shadow-dark activator_hasIcon__5HO6W g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__kaK0w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__4_AVG"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-9-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><button class="list-item_button__nXy5K g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__ZdUej"><hr class="list-item_separator__cBVLs"/></li><li class="list-item_root__ZdUej user-dropdown-switcher_listItem__Q_GIj hds-font-weight-medium"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-11">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__74S4w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-layout_contentArea__BMvQn"><div class="sidebar-sidecar-layout_root__h5rD8 sidebar-sidecar-layout_mainWidth-wide__TwGq8"><div class="mobile-menu-container_root__fPUFu sidebar-sidecar-layout_sidebarContainer__4fcF8"><div class="sidebar-sidecar-layout_sidebarContentWrapper__ftn5q"><div class="sidebar-sidecar-layout_sidePadding__iwNw_"><div class="sidebar_sidebar___fTlC"><div class="sidebar_backToLinkWrapper__F6iLs"><div class="sidebar-back-to-link_root__z_Hj1"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_primary__ESNCA" href="/packer/integrations"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">Packer Integrations</span></div></a></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__IworY" id="sidebar-nav"><div><h2 class="sidebar-headings_root__tGfxC" id="sidebar-label"></h2></div><ul class="sidebar_navList__4Rg4g"><li><a class="sidebar-nav-highlight-item_root___pPhp g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-packer__I5KHY" href="/packer/integrations/hashicorp/docker"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="sidebar-nav-highlight-item_icon__G8JxG"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="sidebar-nav-highlight-item_text__VORFJ hds-typography-body-200">Docker</span></a></li><li><button aria-controls="undefined-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="undefined-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Builders</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="undefined-list"><li><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Docker</span></a></li></ul></li><li><button aria-controls="undefined-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="undefined-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Post-Processors</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="undefined-list"><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Docker Import</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-save"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Docker Save</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-tag"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Docker Tag</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Docker Push</span></a></li></ul></li></ul><hr class="sidebar-horizontal-rule_root__UY7oh"/><ul class="sidebar_navList__4Rg4g"><li><h3 class="sidebar-headings_root__tGfxC">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/tutorials/library?product=packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Tutorial Library</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-20" target="_blank" href="https://discuss.hashicorp.com/c/packer/23"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-20">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-21" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-21">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-22" target="_blank" href="https://github.com/hashicorp/packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-22">(opens in new tab)</span></li></ul></nav></div></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__Z5BK4"><div class="sidebar-sidecar-layout_paddedAreaWrapper___S_Ff"><div class="sidebar-sidecar-layout_breadcrumbContainer__3uz7P"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__coOcu"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__wd_C5"><ol class="breadcrumb-bar_listRoot__8eupO"><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/">Developer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer">Packer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations">Integrations</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker">Docker</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.1.1">v1.1.1</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><span class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" aria-current="page">Docker</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__UDm3Z"><main id="main" class="sidebar-sidecar-layout_main__0SN51"><div class="hds-surface-base card_root__RyqjV content-header-card_contentHeaderCard__SDMMP style_header__b3NdM"><div class="content-header-card_cardTop__GTpii"><span class="icon-tile_root__ShC0s icon-tile_size-large__NxGIv icon-tile_color-packer__LRaQF content-header-card_icon__A1Xna"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><div class="content-header-card_content__XPCtf"><div class="content-header-card_upper__PQsUG"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj content-header-card_dropdown__Gt1Vp g-hide-on-desktop g-hide-on-tablet"><button aria-controls="disclosure-react-aria-28-content" aria-expanded="false" class="button_root__itF9E hds-font-weight-medium button_medium__Cm2eg button_secondary__m5f7i disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo" type="button"><span>v1.1.1 (latest)</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="activator_chevronWrapper__4_AVG"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-28-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.1.0/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.0</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.11/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.11</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.10/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.10</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.9/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.9</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.8/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.8</span></a></li></ul></div></div><div class="content-header-card_left__FSNcW"><div class="content-header-card_titleWrap__IAC6o"><span class="content-header-card_title__HGHfo hds-typography-display-300 from global, hds-font-weight-bold">Docker</span><p class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium content-header-card_attribution__yKU4q">@hashicorp</p></div><p class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular content-header-card_description__M_DkB">The docker plugin can be used with HashiCorp Packer to manage containers with Docker.</p></div><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj content-header-card_dropdown__Gt1Vp g-hide-on-mobile"><button aria-controls="disclosure-react-aria-34-content" aria-expanded="false" class="button_root__itF9E hds-font-weight-medium button_medium__Cm2eg button_secondary__m5f7i disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo" type="button"><span>v1.1.1 (latest)</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="activator_chevronWrapper__4_AVG"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-34-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.1.0/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.0</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.11/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.11</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.10/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.10</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.9/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.9</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/v1.0.8/components/builder/docker"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.0.8</span></a></li></ul></div></div></div><div class="content-header-card_lower__ut_Dv"><ul class="badge-list_badgeList__l_z6s content-header-card_badgeList__I_FGK"><li class="badge-list_badge__mQSlF"><span data-state="tooltip-hidden" data-reach-tooltip-trigger=""><span class="g-screen-reader-only">Official</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral__NhUW0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg><span>Official</span></span></span></li><li class="badge-list_badge__mQSlF"><span data-state="tooltip-hidden" data-reach-tooltip-trigger=""><span class="g-screen-reader-only">HCP Ready</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral__NhUW0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9.78 7.28a.75.75 0 00-1.06-1.06l-.5.5a.75.75 0 001.06 1.06l.5-.5z"></path><path fill-rule="evenodd" d="M12.627 1.32a1.731 1.731 0 012.054 2.053c-.27 1.28-.686 3.19-1.103 4.859a3.625 3.625 0 01-.58 1.224c.002.015.002.03.002.044v2.441a1.75 1.75 0 01-.833 1.49l-2.021 1.244a1.75 1.75 0 01-2.284-.397l-1.27-1.587a2.028 2.028 0 01-1.08-.917 3.426 3.426 0 00-.542-.744 3.428 3.428 0 00-.744-.542c-.4-.223-.755-.61-.917-1.08l-1.587-1.27a1.75 1.75 0 01-.398-2.284l1.244-2.021A1.75 1.75 0 014.058 3H6.5l.044.001c.37-.263.777-.467 1.224-.579 1.669-.417 3.58-.833 4.859-1.103zm-5.43 9.956a.754.754 0 00-.167-.025.517.517 0 01-.209-.208 4.913 4.913 0 00-.79-1.073 4.913 4.913 0 00-1.074-.791.516.516 0 01-.208-.21.754.754 0 00-.025-.166l.002-.008c.255-.78.694-1.941 1.307-2.958.634-1.05 1.353-1.773 2.099-1.96 1.641-.41 3.53-.821 4.804-1.09a.231.231 0 01.277.277c-.269 1.274-.68 3.163-1.09 4.804-.187.746-.91 1.465-1.96 2.099-1.017.613-2.177 1.052-2.958 1.307a.173.173 0 01-.008.002zm1.139 1.193l.697.872a.25.25 0 00.327.057l2.021-1.244a.25.25 0 00.119-.213v-1.056c-.186.13-.375.252-.562.366-.88.53-1.832.936-2.602 1.218zM2.659 6.967l.872.697c.282-.77.687-1.722 1.218-2.602.113-.187.235-.376.366-.562H4.059a.25.25 0 00-.213.119L2.602 6.64a.25.25 0 00.057.327z" clip-rule="evenodd"></path><path d="M4.442 11.558a.625.625 0 010 .884l-2 2a.625.625 0 11-.884-.884l2-2a.625.625 0 01.884 0zM2.692 10.308a.625.625 0 010 .884l-.75.75a.625.625 0 11-.884-.884l.75-.75a.625.625 0 01.884 0zM5.692 14.192a.625.625 0 10-.884-.884l-.75.75a.625.625 0 10.884.884l.75-.75z"></path></g></svg><span>HCP Ready</span></span></span></li></ul><p class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular content-header-card_note__QTtmc">Updated 2 years ago</p></div></div></div><div class="content-header-card_cardBottom__ndKDE"><ul class="content-header-card_linksList__vaxQ3"><li class="content-header-card_link___8sUH"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_secondary__H0E0A" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-40" target="_blank" href="https://github.com/hashicorp/packer-plugin-docker/tree/main/docs"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">GitHub</span></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-40">(opens in new tab)</span></li></ul></div></div><h1>Docker</h1><div class="style_integrationComponentView__dxO7C"><div class="style_mdxWrapper__6wQJC"><div class="dev-dot-content_root__UJDct hds-typography-body-300"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Type: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker</code></p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker</code> Packer builder builds <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://www.docker.io">Docker</a> images using
Docker. The builder starts a Docker container, runs provisioners within this
container, then exports the container for reuse or commits the image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer builds Docker containers <em>without</em> the use of
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://docs.docker.com/engine/reference/builder/">Dockerfiles</a>. By not using
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">Dockerfiles</code>, Packer is able to provision containers with portable scripts or
configuration management systems that are not tied to Docker in any way. It
also has a simple mental model: you provision containers much the same way you
provision a normal virtualized or dedicated server. For more information, read
the section on <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#dockerfiles">Dockerfiles</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The Docker builder must run on a machine that has Docker Engine installed.
Therefore the builder only works on machines that support Docker and <em>does not
support running on a Docker remote host</em>. You can learn about what <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://docs.docker.com/engine/installation/">platforms
Docker supports and how to install onto
them</a> in the Docker
documentation.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-basic-example:-export"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Basic Example Export permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-export"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Basic Example: Export</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Below is a fully functioning example. It doesn&#x27;t do anything useful, since no
provisioners are defined, but it will effectively repackage an image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R12hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;example&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  image </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  export_path </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;image.tar&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">build</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  sources </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;source.docker.example&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R12hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reh2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R1ahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;image&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;export_path&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;image.tar&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R1ahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rehahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-basic-example:-commit"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Basic Example Commit permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-commit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Basic Example: Commit</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Below is another example, the same as above but instead of exporting the
running container, this one commits the container to an image. The image can
then be more easily tagged, pushed, etc.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R1qhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;example&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  image </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  commit </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">build</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  sources </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;source.docker.example&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R1qhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rehqhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R22hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;image&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;export_path&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;image.tar&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R22hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rei2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-basic-example:-changes-to-metadata"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Basic Example Changes to Metadata permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-changes-to-metadata"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Basic Example: Changes to Metadata</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Below is an example using the changes argument of the builder. This feature
allows the source images metadata to be changed when committed back into the
Docker environment. It is derived from the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker commit --change</code> command
line <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://docs.docker.com/engine/reference/commandline/commit/">option to
Docker</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Example uses of all of the options, assuming one is building an NGINX image
from ubuntu as an simple example:</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2mhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;example&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    image </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    commit </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      changes </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;USER www-data&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;WORKDIR /var/www&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;ENV HOSTNAME www.example.com&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;VOLUME /test1 /test2&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;EXPOSE 80 443&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;LABEL version=1.0&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;ONBUILD RUN date&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;CMD [\&quot;nginx\&quot;, \&quot;-g\&quot;, \&quot;daemon off;\&quot;]&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;ENTRYPOINT /var/www/start.sh&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2mhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reimhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2uhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;image&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;ubuntu&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;commit&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;changes&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;USER www-data&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;WORKDIR /var/www&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;ENV HOSTNAME www.example.com&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;VOLUME /test1 /test2&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;EXPOSE 80 443&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;LABEL version=1.0&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;ONBUILD RUN date&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;CMD [\&quot;nginx\&quot;, \&quot;-g\&quot;, \&quot;daemon off;\&quot;]&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">    &quot;ENTRYPOINT /var/www/start.sh&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2uhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reiuhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Allowed metadata fields that can be changed are:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">CMD<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, supports both array (escaped) and string form</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;CMD [\&quot;nginx\&quot;, \&quot;-g\&quot;, \&quot;daemon off;\&quot;]&quot;</code> corresponds to Docker exec form</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;CMD nginx -g daemon off;&quot;</code> corresponds to Docker shell form, invokes a command shell first</li></ul></li><li class="mdx-lists_listItem__nkqhg">ENTRYPOINT<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, supports both array (escaped) and string form</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;ENTRYPOINT [\&quot;/bin/sh\&quot;, \&quot;-c\&quot;, \&quot;/var/www/start.sh\&quot;]&quot;</code> corresponds to Docker exec form</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;ENTRYPOINT /var/www/start.sh&quot;</code> corresponds to Docker shell form, invokes a command shell first</li></ul></li><li class="mdx-lists_listItem__nkqhg">ENV<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, note there is no equal sign:</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;ENV HOSTNAME www.example.com&quot;</code> not
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;ENV HOSTNAME=www.example.com&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">EXPOSE<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, space separated ports</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;EXPOSE 80 443&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">LABEL<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, space separated key=value pairs</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;LABEL version=1.0&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">ONBUILD<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;ONBUILD RUN date&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">MAINTAINER<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String, deprecated in Docker version 1.13.0</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;MAINTAINER NAME&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">USER<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;USER USERNAME&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">VOLUME<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;VOLUME FROM TO&quot;</code></li></ul></li><li class="mdx-lists_listItem__nkqhg">WORKDIR<ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">String</li><li class="mdx-lists_listItem__nkqhg">EX: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;WORKDIR PATH&quot;</code></li></ul></li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-configuration-reference"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Configuration Reference permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#configuration-reference"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration Reference</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Configuration options are organized below into two categories: required and
optional. Within each category, the available options are alphabetized and
described.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The Docker builder uses a special Docker communicator <em>and will not use</em> the
standard <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/legacy_json_templates/communicators">communicators</a>.</p><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-required:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Required permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#required:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Required:</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">You must specify (only) one of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">commit</code>, <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discard</code>, or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">export_path</code>.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">commit</code> (bool) - If true, the container will be committed to an image rather than exported.
Default <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>. If <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">commit</code> is <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>, then either <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discard</code> must be
set to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code> or an <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">export_path</code> must be provided.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discard</code> (bool) - Throw away the container when the build is complete. This is useful for
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/post-processor/artifice">artifice
post-processor</a>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">export_path</code> (string) - The path where the final container will be exported as a tar file.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">message</code> (string) - Set a message for the commit.</p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Optional permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">build</code> (DockerfileBootstrapConfig) - Configuration for a bootstrap image derived from a Dockerfile</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Specifying this will make the builder run <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker build</code> on a provided
Dockerfile, and this image will then be used to perform the rest of
the build process.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">For more information on the contents of this object, refer to the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#bootstrapping-a-build-with-a-dockerfile">Bootstrapping a build with a Dockerfile</a>
section of this documentation.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">author</code> (string) - Set the author (e-mail) of a commit.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">changes</code> ([]string) - Dockerfile instructions to add to the commit. Example of instructions
are CMD, ENTRYPOINT, ENV, and EXPOSE. Example: <!-- -->[ &quot;USER ubuntu&quot;, &quot;WORKDIR
/app&quot;, &quot;EXPOSE 8080&quot; ]</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">container_dir</code> (string) - The directory inside container to mount temp directory from host server
for work <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/provisioner/file">file provisioner</a>. This defaults
to c:/packer-files on windows and /packer-files on other systems.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">device</code> ([]string) - An array of devices which will be accessible in container when it&#x27;s run
without <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">--privileged</code> flag.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">cap_add</code> ([]string) - An array of additional <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities">Linux
capabilities</a>
to grant to the container.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">cap_drop</code> ([]string) - An array of <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities">Linux
capabilities</a>
to drop from the container.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker_path</code> (string) - Sets the docker binary to use for running commands.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you want to use a specific version of the docker binary, or a
docker alternative for building your container, you can specify this
through this option.
<strong>Note</strong>: if using an alternative like <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">podman</code>, not all options are
equivalent, and the build may fail in this case.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Defaults to &quot;docker&quot;</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">exec_user</code> (string) - Username (UID) to run remote commands with. You can also set the group
name/ID if you want: (UID or UID:GID). You may need this if you get
permission errors trying to run the shell or other provisioners.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image</code> (string) - The base image for the Docker container that will be started. This image
will be pulled from the Docker registry if it doesn&#x27;t already exist.
Any value format that you can provide to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker pull</code> is valid.
Example: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ubuntu</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ubuntu:xenial</code>. If you only provide the repo, Docker
will pull the latest image, so setting <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ubuntu</code> is the same as setting
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ubuntu:latest</code>. You can also set a distribution digest. For example,
ubuntu@sha256:a0d9e826ab87bd665cfc640598a871b748b4b70a01a4f3d174d4fb02adad07a9</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This cannot be used at the same time as <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">build</code></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">privileged</code> (bool) - If true, run the docker container with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">--privileged</code> flag. This
defaults to false if not set.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">runtime</code> (string) - Set the container runtime. A runtime different from the one installed
by default with Docker (<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">runc</code>) must be installed and configured.
The possible values are (non-exhaustive list):
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">runsc</code> for <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://gvisor.dev/">gVisor</a>,
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">kata-runtime</code> for <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://katacontainers.io/">Kata Containers</a>,
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sysbox-runc</code> for <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://www.nestybox.com/">Nestybox</a>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pull</code> (bool) - If true, the configured image will be pulled using <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker pull</code> prior
to use. Otherwise, it is assumed the image already exists and can be
used. This defaults to true if not set.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If using <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">build</code>, this field will be ignored, as the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pull</code> option for
this operation will instead have precedence.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">run_command</code> ([]string) - An array of arguments to pass to docker run in order to run the
container. By default this is set to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">[&quot;-d&quot;, &quot;-i&quot;, &quot;-t&quot;,
&quot;--entrypoint=/bin/sh&quot;, &quot;--&quot;, &quot;{{.Image}}&quot;]</code> if you are using a linux
container, and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">[&quot;-d&quot;, &quot;-i&quot;, &quot;-t&quot;, &quot;--entrypoint=powershell&quot;, &quot;--&quot;,
&quot;{{.Image}}&quot;]</code> if you are running a windows container. <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">{{.Image}}</code> is a
template variable that corresponds to the image template option. Passing
the entrypoint option this way will make it the default entrypoint of
the resulting image, so running docker run -it --rm  will start the
docker image from the /bin/sh shell interpreter; you could run a script
or another shell by running docker run -it --rm  -c /bin/bash. If your
docker image embeds a binary intended to be run often, you should
consider changing the default entrypoint to point to it.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">tmpfs</code> ([]string) - An array of additional tmpfs volumes to mount into this container.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">volumes</code> (map<!-- -->[string]<!-- -->string) - A mapping of additional volumes to mount into this container. The key of
the object is the host path, the value is the container path.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">fix_upload_owner</code> (bool) - If true, files uploaded to the container will be owned by the user the
container is running as. If false, the owner will depend on the version
of docker installed in the system. Defaults to true.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">windows_container</code> (bool) - If &quot;true&quot;, tells Packer that you are building a Windows container
running on a windows host. This is necessary for building Windows
containers, because our normal docker bindings do not work for them.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">platform</code> (string) - Set platform if server is multi-platform capable</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">login</code> (bool) - This is used to login to a private docker repository (e.g., dockerhub)
to build or pull a private base container. For pushing to a private
repository, see the docker post-processors.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">login_password</code> (string) - The password to use to authenticate to login.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">login_server</code> (string) - The server address to login to.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">login_username</code> (string) - The username to use to authenticate to login.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ecr_login</code> (bool) - Defaults to false. If true, the builder will login in order to build or
pull the image from Amazon EC2 Container Registry (ECR). The builder
only logs in for the duration of the build or pull step. If true,
login_server is required and login, login_username, and login_password
will be ignored. For more information see the section on ECR.</p></li></ul><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_access_key</code> (string) - The AWS access key used to communicate with AWS.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_secret_key</code> (string) - The AWS secret key used to communicate with AWS.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_token</code> (string) - The AWS access token to use. This is different from
the access key and secret key. If you&#x27;re not sure what this is, then you
probably don&#x27;t need it. This will also be read from the AWS_SESSION_TOKEN
environmental variable.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_profile</code> (string) - The AWS shared credentials profile used to communicate with AWS.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_force_use_public_ecr</code> (bool) - The flag to identify whether to push docker image to Public <em>or</em> Private
ECR. If the user sets this to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code> from the config, we will forcefully
try to push to Public ECR otherwise set this from code based on the
given LoginServer value.</p></li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-bootstrapping-a-build-with-a-dockerfile"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Bootstrapping a build with a Dockerfile permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#bootstrapping-a-build-with-a-dockerfile"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Bootstrapping a build with a Dockerfile</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">build</code> section of a template allows you to specify a Dockerfile to use for bootstrapping a packer build with a locally-built image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When using this, you won&#x27;t be able to specify an image as source for the container, instead the image built from the Dockerfile will be used for the remainder of the build after that initial step.</p><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-configuration-examples:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Configuration examples permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#configuration-examples:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration examples:</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R52hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;example&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    build</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        path </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;Dockerfile&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    commit </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R52hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rel2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R5ahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;build&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">    &quot;path&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;Dockerfile&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;commit&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R5ahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Relahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-required:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Required permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#required:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Required:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">path</code> (string) - Path to the dockerfile to use for building the base image</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If set, the builder will invoke <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker build</code> on it, and use the
produced image to continue the build afterwards.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note: Mutually exclusive with &quot;image&quot;</p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Optional permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">build_dir</code> (string) - Directory to invoke <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker build</code> from</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Defaults to the directory from which we invoke packer.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">arguments</code> (map<!-- -->[string]<!-- -->string) - A mapping of additional build args to provide. The key of
the object is the argument name, the value is the argument value.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pull</code> (boolean) - Pull the image when building the base docker image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note: defaults to true, to disable this, explicitly set it to false.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">compress</code> (bool) - Compress the build context before sending to the docker daemon.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This is especially useful if the build context is large, as copying it
can take a significant amount of time, while once compressed, this
can make builds faster, at the price of extra CPU resources.</p></li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-build-shared-information-variables"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Build Shared Information Variables permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#build-shared-information-variables"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Build Shared Information Variables</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This build shares generated data with provisioners and post-processors via <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/legacy_json_templates/engine">template engines</a>
for JSON and <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/hcl_templates/contextual-variables">contextual variables</a> for HCL2.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The generated variable available for this builder is:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ImageSha256</code> - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,
this variable is only available for post-processors.</li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-using-the-artifact:-export"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Using the Artifact Export permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#using-the-artifact:-export"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Using the Artifact: Export</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Once the tar artifact has been generated, you will likely want to import, tag,
and push it to a container repository. Packer can do this for you automatically
with the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import">docker-import</a> and
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push">docker-push</a> post-processors.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> This section is covering how to use an artifact that has been
<em>exported</em>. More specifically, if you set <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">export_path</code> in your configuration.
If you set <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">commit</code>, see the next section.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The example below shows a full configuration that would import and push the
created image. This is accomplished using a sequence definition (a collection
of post-processors that are treated as as single pipeline, see
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/legacy_json_templates/post-processors">Post-Processors</a> for more information):</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R72hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;post-processors&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-import&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;myrepo/myimage&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;0.7&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-push&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R72hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Ren2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R7ahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-import&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)">  &quot;myrepo/myimage&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        tag </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;0.7&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R7ahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Renahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In the above example, the result of each builder is passed through the defined
sequence of post-processors starting first with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker-import</code>
post-processor which will import the artifact as a docker image. The resulting
docker image is then passed on to the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker-push</code> post-processor which
handles pushing the image to a container repository.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you want to do this manually, however, perhaps from a script, you can import
the image using the process below:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R7mhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> docker import - registry.mydomain.com/mycontainer:latest </span><span style="color:var(--hds-code-block-color-keyword)">&lt;</span><span style="color:var(--hds-code-block-color-token)"> artifact.tar</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R7mhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Renmhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">You can then add additional tags and push the image as usual with <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker tag</code>
and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker push</code>, respectively.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-using-the-artifact:-committed"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Using the Artifact Committed permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#using-the-artifact:-committed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Using the Artifact: Committed</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you committed your container to an image, you probably want to tag, save,
push, etc. Packer can do this automatically for you. An example is shown below
which tags and pushes an image. This is accomplished using a sequence
definition (a collection of post-processors that are treated as as single
pipeline, see <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/legacy_json_templates/post-processors">Post-Processors</a> for more
information):</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R8ahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)">  &quot;myrepo/myimage&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        tags </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R8ahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reoahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R8ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;post-processors&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;myrepo/myimage&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;tags&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-push&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R8ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reoihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In the above example, the result of each builder is passed through the defined
sequence of post-processors starting first with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker-tag</code> post-processor
which tags the committed image with the supplied repository and tag
information. Once tagged, the resulting artifact is then passed on to the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker-push</code> post-processor which handles pushing the image to a container
repository.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Going a step further, if you wanted to tag and push an image to multiple
container repositories, this could be accomplished by defining two,
nearly-identical sequence definitions, as demonstrated by the example below:</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R92hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)">  &quot;myrepo/myimage1&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        tags </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)">  &quot;myrepo/myimage2&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        tags </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R92hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rep2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R9ahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;post-processors&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;myrepo/myimage1&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;tags&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;docker-push&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;myrepo/myimage2&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;tags&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">      &quot;docker-push&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R9ahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Repahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-docker-for-windows"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Docker For Windows permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#docker-for-windows"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Docker For Windows</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">You should be able to run docker builds against both linux and Windows
containers. Windows containers use a different communicator than linux
containers, because Windows containers cannot use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker cp</code>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you are building a Windows container, you must set the template option
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;windows_container&quot;: true</code>. Please note that docker cannot export Windows
containers, so you must either commit or discard them.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following is a fully functional template for building a Windows
container.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Ra2hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;windows&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    image </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;microsoft/windowsservercore:1709&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    container_dir </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;c:/app&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    windows_container </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    commit </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">build</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  sources </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;source.docker.example&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Ra2hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Req2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Raahdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;builders&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">      &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">      &quot;image&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;microsoft/windowsservercore:1709&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">      &quot;container_dir&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;c:/app&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">      &quot;windows_container&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">      &quot;commit&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Raahdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reqahdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-amazon-ec2-container-registry"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Amazon EC2 Container Registry permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#amazon-ec2-container-registry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Amazon EC2 Container Registry</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer can tag and push images for use in <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://aws.amazon.com/ecr/">Amazon EC2 Container
Registry</a>. The post processors work as described
above and example configuration properties are shown below:</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Raqhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)">  &quot;12345.dkr.ecr.us-east-1.amazonaws.com/packer&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    tags       </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ecr_login </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    aws_access_key </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR KEY HERE&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    aws_secret_key </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR SECRET KEY HERE&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    login_server </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;https://12345.dkr.ecr.us-east-1.amazonaws.com/&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Raqhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Reqqhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Rb2hdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">  &quot;post-processors&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;12345.dkr.ecr.us-east-1.amazonaws.com/packer&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;tags&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;0.7&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;ecr_login&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;aws_access_key&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;aws_secret_key&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR SECRET KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;login_server&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;https://12345.dkr.ecr.us-east-1.amazonaws.com/&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">      }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Rb2hdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rer2hdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-amazon-ecr-public-gallery"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Amazon ECR Public Gallery permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#amazon-ecr-public-gallery"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Amazon ECR Public Gallery</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer can tag and push images for use in <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://gallery.ecr.aws/">Amazon ECR Public
Gallery</a>. The post processors work as described above
and example configuration properties are shown below:</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>HCL2</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Rbihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">    post-processors</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">        post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">            repository </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">            tags       </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;latest&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">        post-processor</span><span style="color:var(--hds-code-block-color-constant)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">            &quot;ecr_login&quot;</span><span style="color:var(--hds-code-block-color-keyword)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-token)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">            &quot;aws_access_key&quot;</span><span style="color:var(--hds-code-block-color-keyword)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-token)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">            &quot;aws_secret_key&quot;</span><span style="color:var(--hds-code-block-color-keyword)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR SECRET KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-token)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">            login_server </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;public.ecr.aws/YOUR REGISTRY ALIAS HERE&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    }</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Rbihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rerihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>JSON</strong></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Rbqhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">        &quot;post-processors&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">            [</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">                {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-tag&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;repository&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;tags&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;latest&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">                }</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">                {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;type&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;docker-push&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;ecr_login&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-constant)"> true</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;aws_access_key&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;aws_secret_key&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;YOUR SECRET KEY HERE&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">                    &quot;login_server&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;public.ecr.aws/YOUR REGISTRY ALIAS HERE&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">                }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">            ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">        ]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    }</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Rbqhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rerqhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/amazon#specifying-amazon-credentials">Learn how to set Amazon AWS credentials.</a></p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-dockerfiles"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Dockerfiles permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#dockerfiles"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Dockerfiles</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This builder allows you to build Docker images <em>without</em> Dockerfiles.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">With this builder, you can repeatedly create Docker images without the use of a
Dockerfile. You don&#x27;t need to know the syntax or semantics of Dockerfiles.
Instead, you can just provide shell scripts, Chef recipes, Puppet manifests,
etc. to provision your Docker container just like you would a regular
virtualized or dedicated machine.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">While Docker has many features, Packer views Docker simply as a container
runner. To that end, Packer is able to repeatedly build these containers using
portable provisioning scripts.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note</strong>: starting with v1.1.0 of the plugin, this builder supports bootstrapping
a build from a Dockerfile. This slightly conflicts with the original intent, but
practically, for users who already have working Dockerfile-centric pipelines,
this limitation was a hinderance to adopting Packer for later provisioning images,
so we opted to add this capability to the builder.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-overriding-the-host-directory"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Overriding the host directory permalink" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#overriding-the-host-directory"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Overriding the host directory</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">By default, Packer creates a temporary folder under your home directory, and
uses that to stage files for uploading into the container. If you would like to
change the path to this temporary folder, you can set the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">PACKER_TMP_DIR</code>.
This can be useful, for example, if you have your home directory permissions
set up to disallow access from the docker daemon.</p></div></div></div></main><div class="sidebar-sidecar-layout_sidecarPosition__WtTq0"><div class="sidebar-sidecar-layout_sidecarTopSlot__qRAEI"></div><div class="sidecar-scroll-container_root__a8nIj"><div class="sidecar-scroll-container_scrollContainer__Dw9id"><div><nav aria-labelledby="react-aria-64"><p id="react-aria-64" class="outline-nav_navLabel__HrjQb hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__Sm1fr"><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-export">Basic Example: Export</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-commit">Basic Example: Commit</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#basic-example:-changes-to-metadata">Basic Example: Changes to Metadata</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#configuration-reference">Configuration Reference</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#required:">Required:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#bootstrapping-a-build-with-a-dockerfile">Bootstrapping a build with a Dockerfile</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#configuration-examples:">Configuration examples:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#required:">Required:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#build-shared-information-variables">Build Shared Information Variables</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#using-the-artifact:-export">Using the Artifact: Export</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#using-the-artifact:-committed">Using the Artifact: Committed</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#docker-for-windows">Docker For Windows</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#amazon-ec2-container-registry">Amazon EC2 Container Registry</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#amazon-ecr-public-gallery">Amazon ECR Public Gallery</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#dockerfiles">Dockerfiles</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/docker/latest/components/builder/docker#overriding-the-host-directory">Overriding the host directory</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-layout_footer__HGqK8 base-layout_showFooterTopBorder__4_CwH"><footer class="footer_root__qJO_k"><span class="footer_logoAndSwitcher__CJkN3"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__pe9i3 g-focus-ring-from-box-shadow"><div><svg xmlns="http://www.w3.org/2000/svg" width="266" height="65" fill="none" viewBox="0 0 266 65"><path fill="#000" d="M71.823 62.023c-.817 0-1.171-.519-1.253-1.174h-.081c-.3.874-1.09 1.365-2.097 1.365-1.524 0-2.423-.846-2.423-2.185 0-1.338.98-2.13 3.077-2.13h1.443v-.71c0-1.038-.572-1.584-1.716-1.584-1.143 0-1.443.41-1.851 1.093l-.68-.629c.38-.764 1.252-1.42 2.559-1.42 1.306 0 2.777.929 2.777 2.458v3.987h.816v.984h-.626zm-1.307-2.103v-1.202h-1.498c-1.28 0-1.85.383-1.85 1.093v.3c0 .71.57 1.12 1.442 1.12.871 0 1.906-.573 1.906-1.31M74.137 62.023v-7.265h1.116v1.175h.055c.354-.82.98-1.366 2.042-1.366 1.062 0 2.423 1.01 2.423 2.786v4.67h-1.117v-4.452c0-1.283-.571-1.966-1.633-1.966s-1.77.464-1.77 1.393v5.052h-1.116zM84.646 62.023v-.983h1.389v-7.866h-1.389v-.983h3.92v.983h-1.388v7.866h1.389v.983zM90.8 52.191h4.029c1.606 0 2.614 1.01 2.614 2.54s-.953 1.994-1.58 2.076v.082c.708.054 1.934.655 1.934 2.294 0 1.638-1.09 2.84-2.532 2.84h-4.466zm1.17 4.26h2.723c.925 0 1.497-.49 1.497-1.365v-.492c0-.873-.572-1.365-1.497-1.365H91.97zm0 4.534h2.913c1.008 0 1.634-.546 1.634-1.53v-.49c0-.984-.626-1.53-1.634-1.53H91.97v3.523zM100.056 52.191h1.579l2.805 5.298h.081l2.832-5.298h1.525v9.832h-1.144v-8.275h-.082l-.816 1.639-2.342 4.287-2.341-4.287-.817-1.64h-.082v8.276h-1.143v-9.832zM113.86 57.162c0-3.278 1.47-5.135 3.948-5.135 2.477 0 2.75.792 3.376 2.158l-.953.573c-.381-1.01-1.198-1.666-2.423-1.666s-2.696 1.339-2.696 3.36v1.474c0 2.021 1.008 3.25 2.696 3.25 1.688 0 2.096-.71 2.505-1.775l.953.601c-.627 1.393-1.825 2.24-3.431 2.24-2.478 0-3.948-1.748-3.948-5.026zM122.491 58.39c0-2.32 1.334-3.796 3.267-3.796 1.933 0 3.267 1.503 3.267 3.797 0 2.294-1.334 3.796-3.267 3.796-1.933 0-3.267-1.502-3.267-3.796m5.336.52v-1.038c0-1.53-.844-2.294-2.069-2.294s-2.069.737-2.069 2.294v1.038c0 1.53.844 2.294 2.069 2.294s2.069-.738 2.069-2.294M130.958 62.023v-7.265h1.116v1.175h.055c.327-.738.817-1.366 1.96-1.366 1.144 0 1.824.437 2.205 1.475h.028c.272-.792.98-1.475 2.205-1.475s2.369 1.01 2.369 2.786v4.67h-1.117v-4.452c0-1.283-.49-1.966-1.579-1.966s-1.688.464-1.688 1.393v5.052h-1.116V57.6c0-1.284-.49-1.967-1.552-1.967s-1.715.465-1.715 1.393v5.053h-1.116zM143.292 54.758h1.116v1.175h.054c.381-.929 1.117-1.366 2.124-1.366 1.824 0 2.94 1.475 2.94 3.796 0 2.322-1.143 3.797-2.94 3.797s-1.688-.465-2.124-1.366h-.054v3.987h-1.116V54.704zm5.036 4.26V57.79c0-1.284-.789-2.158-2.042-2.158-1.252 0-1.878.601-1.878 1.393v2.704c0 .956.844 1.475 1.878 1.475 1.035 0 2.042-.874 2.042-2.158zM156.768 62.023c-.816 0-1.17-.519-1.252-1.174h-.082c-.299.874-1.089 1.365-2.096 1.365-1.525 0-2.423-.846-2.423-2.185 0-1.338.98-2.13 3.076-2.13h1.443v-.71c0-1.038-.571-1.584-1.715-1.584-1.143 0-1.443.41-1.851 1.093l-.681-.629c.381-.764 1.253-1.42 2.559-1.42 1.307 0 2.777.929 2.777 2.458v3.987h.817v.984h-.626zm-1.334-2.103v-1.202h-1.497c-1.28 0-1.851.383-1.851 1.093v.3c0 .71.571 1.12 1.443 1.12.871 0 1.905-.573 1.905-1.31M159.056 62.023v-7.265h1.116v1.175h.054c.354-.82.98-1.366 2.042-1.366 1.062 0 2.423 1.01 2.423 2.786v4.67h-1.116v-4.452c0-1.283-.572-1.966-1.633-1.966-1.062 0-1.77.464-1.77 1.393v5.052h-1.116zM171.471 54.758h1.116l-3.24 8.958c-.327.874-.626 1.12-1.688 1.12h-.572v-.983h1.144l.544-1.557-2.722-7.538h1.116l1.742 4.944.327 1.174h.082l.381-1.174 1.742-4.944zM66.132 12.863h5.582v12.045H84.51V12.863h5.636V42.36H84.51V29.96H71.714v12.4h-5.582zM93.74 36.651c0-4.424 3.104-5.899 6.888-6.8l6.398-1.475v-.519c0-2.157-1.388-3.496-3.621-3.496-2.232 0-3.54 1.23-3.948 3.25l-4.791-.546c.707-4.042 4.11-6.664 8.957-6.664 4.846 0 8.821 3.387 8.821 8.303v8.63c0 .546.164.71.545.71h1.17v4.288h-3.267c-2.069 0-2.995-.683-2.995-2.349 0-1.666.082-1.092.3-1.857l-.463-.164c-1.525 3.277-3.73 4.725-6.888 4.725s-7.106-2.403-7.106-6.063zm8.549 2.103c2.777 0 4.737-2.02 4.737-5.216v-1.693l-4.574 1.092c-2.314.546-3.267 1.338-3.267 3.113 0 1.776 1.225 2.704 3.104 2.704M116.147 36.542l5.119-1.01c.544 2.266 2.341 3.413 4.737 3.413s3.73-.983 3.73-2.621c0-1.64-1.606-1.994-4.629-2.54-3.811-.601-8.766-1.311-8.766-6.61 0-5.298 3.403-6.8 8.957-6.8s8.74 2.076 9.611 6.227l-5.173.847c-.463-2.104-2.178-3.196-4.465-3.196s-3.649 1.065-3.649 2.485 1.634 1.994 4.656 2.54c3.785.601 8.74 1.311 8.74 6.61 0 5.298-3.376 6.964-9.039 6.964s-8.958-2.103-9.883-6.336zM143.836 42.387h-5.472V12.044h5.472v9.45c0 1.092-.218 2.157-.517 3.714l.517.164c1.307-3.114 3.267-4.943 6.943-4.943 3.675 0 7.133 2.95 7.133 7.974v13.984h-5.473v-13.82c0-2.458-1.225-3.796-3.648-3.796s-4.955 2.103-4.955 5.817zM169.129 36.924c0 .847.3 1.093.926 1.093h2.396v4.342h-4.955c-2.478 0-3.812-1.393-3.812-3.96V25.263h-3.022V20.92h8.494v16.004zm-6.207-21.74c0-1.856 1.524-3.386 3.321-3.386 1.797 0 3.322 1.53 3.322 3.387a3.305 3.305 0 0 1-3.322 3.332 3.305 3.305 0 0 1-3.321-3.332M174.248 27.639c0-8.85 5.799-15.24 14.185-15.24 8.385 0 11.897 4.097 13.177 9.64l-5.554 1.34c-1.062-3.879-3.621-6.064-7.651-6.064-4.029 0-8.358 4.26-8.358 10.324 0 6.063 3.376 10.323 8.576 10.323 5.2 0 6.643-2.24 7.705-6.363l5.255.6c-1.253 6.61-6.126 10.707-13.014 10.707-6.889 0-14.321-6.419-14.321-15.24zM203.87 31.626c0-6.527 4.574-11.197 10.918-11.197 6.343 0 10.917 4.67 10.917 11.197 0 6.527-4.574 11.252-10.917 11.252-6.344 0-10.918-4.725-10.918-11.252m16.39 0c0-4.042-2.151-6.746-5.472-6.746-3.322 0-5.473 2.704-5.473 6.746s2.178 6.8 5.473 6.8c3.294 0 5.472-2.703 5.472-6.8M229.163 20.92h5.037v.847c0 1.147-.055 2.075-.381 3.796l.517.137c.79-2.813 2.26-4.752 5.717-4.752h1.552v5.325h-2.232c-3.077 0-4.738 1.857-4.738 5.271v10.87h-5.472v-21.44zM244.165 20.92h5.39v.983c0 .984-.081 1.72-.381 3.469l.517.136c1.307-3.413 3.73-5.052 6.889-5.052 5.2 0 9.338 4.288 9.338 11.197 0 6.91-4.111 11.253-9.338 11.253-5.228 0-5.473-1.64-6.807-5.108l-.463.164c.245 1.694.327 2.485.327 3.414v9.64h-5.472zm16.308 10.706c0-4.178-2.26-6.746-5.472-6.746-3.213 0-5.473 2.568-5.473 6.746 0 4.179 2.26 6.8 5.473 6.8 3.212 0 5.472-2.567 5.472-6.8M21.781 0 0 12.618v30.26l8.168 4.725v-30.26L21.78 9.476z"/><path fill="#000" d="M30.466 0v24.116h-8.685v-9.013l-8.195 4.752v30.889l8.195 4.724V31.435h8.685v8.958l8.195-4.752V4.752z"/><path fill="#000" d="m30.466 55.496 21.781-12.618v-30.26l-8.195-4.725v30.26L30.466 46.02z"/></svg></div></a><span class="footer_themeSwitcher__CPJxw hds-font-weight-regular"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-83">Theme</label></span></span><ul class="footer_links__t81SU"><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="/certifications"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://status.hashicorp.com"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/security"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/privacy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trade-controls"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/accessibility"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Accessibility</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="opens-in-new-tab-label-react-aria-92" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-92">(opens in new tab)</span></li></ul></footer></div></div></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metadata":{"title":"Docker Builder | Integrations"},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"71558389-27de-4318-a844-88d5fcf3c5e2","slug":"docker","name":"Docker","description":"The docker plugin can be used with HashiCorp Packer to manage containers with Docker.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"official","repo_url":"https://github.com/hashicorp/packer-plugin-docker","subdirectory":"/.web-docs","created_at":"2023-06-15T19:02:45.745Z","updated_at":"2023-08-08T17:01:05.785Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.1.1","1.1.0","1.0.11","1.0.10","1.0.9","1.0.8"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"}],"flags":[{"id":"3709e036-b45f-4be8-9043-f7c8cc2af00f","slug":"hcp-ready","name":"HCP Ready","description":"This integration has been tested to work with HashiCorp Cloud Platform (HCP)","created_at":"2022-11-09T22:56:30.673Z","updated_at":"2022-11-09T22:56:30.673Z"}],"integration_type":null},"activeRelease":{"id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","integration_id":"71558389-27de-4318-a844-88d5fcf3c5e2","version":"1.1.1","readme":"The Docker plugin is intended to be used for managing docker images through Packer.\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    docker = {\n      source  = \"github.com/hashicorp/docker\"\n      version = \"~\u003e 1\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/hashicorp/docker\n```\n\n### Components\n\n#### Builders\n\n- [docker](/packer/integrations/hashicorp/docker/latest/components/builder/docker) - The builder builds Docker images using Docker.\n  The builder starts a Docker container, runs provisioners within this container, then exports the container for reuse or commits the image.\n\n#### Post-Processors\n\n- [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) - The import post-processor\n  takes an artifact from the docker builder and imports it with Docker locally.\n\n- [docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) - The push post-processor takes\n  an artifact from the docker-import post-processor and pushes it to a Docker registry.\n\n- [docker-save](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-save) - The save post-processor takes\n  an artifact from the docker builder that was committed and saves it to a file.\n\n- [docker-tag](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-tag) - The tag post-processor takes an\n  artifact from the docker builder that was committed and tags it into a repository.\n","created_at":"2024-12-10T19:30:41.182Z","updated_at":"2024-12-10T19:30:41.182Z","components":[{"id":"a1b476c0-e3db-415b-a0b1-a4d24fd9d016","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `docker`\n\nThe `docker` Packer builder builds [Docker](https://www.docker.io) images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.\n\nPacker builds Docker containers _without_ the use of\n[Dockerfiles](https://docs.docker.com/engine/reference/builder/). By not using\n`Dockerfiles`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on [Dockerfiles](#dockerfiles).\n\nThe Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and _does not\nsupport running on a Docker remote host_. You can learn about what [platforms\nDocker supports and how to install onto\nthem](https://docs.docker.com/engine/installation/) in the Docker\ndocumentation.\n\n## Basic Example: Export\n\nBelow is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  export_path = \"image.tar\"\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n## Basic Example: Commit\n\nBelow is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n## Basic Example: Changes to Metadata\n\nBelow is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `docker commit --change` command\nline [option to\nDocker](https://docs.docker.com/engine/reference/commandline/commit/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu\"\n    commit = true\n      changes = [\n      \"USER www-data\",\n      \"WORKDIR /var/www\",\n      \"ENV HOSTNAME www.example.com\",\n      \"VOLUME /test1 /test2\",\n      \"EXPOSE 80 443\",\n      \"LABEL version=1.0\",\n      \"ONBUILD RUN date\",\n      \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n      \"ENTRYPOINT /var/www/start.sh\"\n    ]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"commit\": true,\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"` corresponds to Docker exec form\n  - EX: `\"CMD nginx -g daemon off;\"` corresponds to Docker shell form, invokes a command shell first\n- ENTRYPOINT\n  - String, supports both array (escaped) and string form\n  - EX: `\"ENTRYPOINT [\\\"/bin/sh\\\", \\\"-c\\\", \\\"/var/www/start.sh\\\"]\"` corresponds to Docker exec form\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"` corresponds to Docker shell form, invokes a command shell first\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nThe Docker builder uses a special Docker communicator _and will not use_ the\nstandard [communicators](/packer/docs/templates/legacy_json_templates/communicators).\n\n### Required:\n\nYou must specify (only) one of `commit`, `discard`, or `export_path`.\n\n\u003c!-- Code generated from the comments of the Config struct in builder/docker/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `commit` (bool) - If true, the container will be committed to an image rather than exported.\n  Default `false`. If `commit` is `false`, then either `discard` must be\n  set to `true` or an `export_path` must be provided.\n\n- `discard` (bool) - Throw away the container when the build is complete. This is useful for\n  the [artifice\n  post-processor](/packer/docs/post-processor/artifice).\n\n- `export_path` (string) - The path where the final container will be exported as a tar file.\n\n- `message` (string) - Set a message for the commit.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/docker/config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/docker/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `build` (DockerfileBootstrapConfig) - Configuration for a bootstrap image derived from a Dockerfile\n  \n  Specifying this will make the builder run `docker build` on a provided\n  Dockerfile, and this image will then be used to perform the rest of\n  the build process.\n  \n  For more information on the contents of this object, refer to the\n  [Bootstrapping a build with a Dockerfile](#bootstrapping-a-build-with-a-dockerfile)\n  section of this documentation.\n\n- `author` (string) - Set the author (e-mail) of a commit.\n\n- `changes` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\n  are CMD, ENTRYPOINT, ENV, and EXPOSE. Example: [ \"USER ubuntu\", \"WORKDIR\n  /app\", \"EXPOSE 8080\" ]\n\n- `container_dir` (string) - The directory inside container to mount temp directory from host server\n  for work [file provisioner](/packer/docs/provisioner/file). This defaults\n  to c:/packer-files on windows and /packer-files on other systems.\n\n- `device` ([]string) - An array of devices which will be accessible in container when it's run\n  without `--privileged` flag.\n\n- `cap_add` ([]string) - An array of additional [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to grant to the container.\n\n- `cap_drop` ([]string) - An array of [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to drop from the container.\n\n- `docker_path` (string) - Sets the docker binary to use for running commands.\n  \n  If you want to use a specific version of the docker binary, or a\n  docker alternative for building your container, you can specify this\n  through this option.\n  **Note**: if using an alternative like `podman`, not all options are\n  equivalent, and the build may fail in this case.\n  \n  Defaults to \"docker\"\n\n- `exec_user` (string) - Username (UID) to run remote commands with. You can also set the group\n  name/ID if you want: (UID or UID:GID). You may need this if you get\n  permission errors trying to run the shell or other provisioners.\n\n- `image` (string) - The base image for the Docker container that will be started. This image\n  will be pulled from the Docker registry if it doesn't already exist.\n  Any value format that you can provide to `docker pull` is valid.\n  Example: `ubuntu` or `ubuntu:xenial`. If you only provide the repo, Docker\n  will pull the latest image, so setting `ubuntu` is the same as setting\n  `ubuntu:latest`. You can also set a distribution digest. For example,\n  ubuntu@sha256:a0d9e826ab87bd665cfc640598a871b748b4b70a01a4f3d174d4fb02adad07a9\n  \n  This cannot be used at the same time as `build`\n\n- `privileged` (bool) - If true, run the docker container with the `--privileged` flag. This\n  defaults to false if not set.\n\n- `runtime` (string) - Set the container runtime. A runtime different from the one installed\n  by default with Docker (`runc`) must be installed and configured.\n  The possible values are (non-exhaustive list):\n  `runsc` for [gVisor](https://gvisor.dev/),\n  `kata-runtime` for [Kata Containers](https://katacontainers.io/),\n  `sysbox-runc` for [Nestybox](https://www.nestybox.com/).\n\n- `pull` (bool) - If true, the configured image will be pulled using `docker pull` prior\n  to use. Otherwise, it is assumed the image already exists and can be\n  used. This defaults to true if not set.\n  \n  If using `build`, this field will be ignored, as the `pull` option for\n  this operation will instead have precedence.\n\n- `run_command` ([]string) - An array of arguments to pass to docker run in order to run the\n  container. By default this is set to `[\"-d\", \"-i\", \"-t\",\n  \"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]` if you are using a linux\n  container, and `[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n  \"{{.Image}}\"]` if you are running a windows container. `{{.Image}}` is a\n  template variable that corresponds to the image template option. Passing\n  the entrypoint option this way will make it the default entrypoint of\n  the resulting image, so running docker run -it --rm  will start the\n  docker image from the /bin/sh shell interpreter; you could run a script\n  or another shell by running docker run -it --rm  -c /bin/bash. If your\n  docker image embeds a binary intended to be run often, you should\n  consider changing the default entrypoint to point to it.\n\n- `tmpfs` ([]string) - An array of additional tmpfs volumes to mount into this container.\n\n- `volumes` (map[string]string) - A mapping of additional volumes to mount into this container. The key of\n  the object is the host path, the value is the container path.\n\n- `fix_upload_owner` (bool) - If true, files uploaded to the container will be owned by the user the\n  container is running as. If false, the owner will depend on the version\n  of docker installed in the system. Defaults to true.\n\n- `windows_container` (bool) - If \"true\", tells Packer that you are building a Windows container\n  running on a windows host. This is necessary for building Windows\n  containers, because our normal docker bindings do not work for them.\n\n- `platform` (string) - Set platform if server is multi-platform capable\n\n- `login` (bool) - This is used to login to a private docker repository (e.g., dockerhub)\n  to build or pull a private base container. For pushing to a private\n   repository, see the docker post-processors.\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `ecr_login` (bool) - Defaults to false. If true, the builder will login in order to build or\n  pull the image from Amazon EC2 Container Registry (ECR). The builder\n  only logs in for the duration of the build or pull step. If true,\n  login_server is required and login, login_username, and login_password\n  will be ignored. For more information see the section on ECR.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/docker/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the AwsAccessConfig struct in builder/docker/ecr_login.go; DO NOT EDIT MANUALLY --\u003e\n\n- `aws_access_key` (string) - The AWS access key used to communicate with AWS.\n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with AWS.\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the AWS_SESSION_TOKEN\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to communicate with AWS.\n\n- `aws_force_use_public_ecr` (bool) - The flag to identify whether to push docker image to Public _or_ Private\n  ECR. If the user sets this to `true` from the config, we will forcefully\n  try to push to Public ECR otherwise set this from code based on the\n  given LoginServer value.\n\n\u003c!-- End of code generated from the comments of the AwsAccessConfig struct in builder/docker/ecr_login.go; --\u003e\n\n\n## Bootstrapping a build with a Dockerfile\n\nThe `build` section of a template allows you to specify a Dockerfile to use for bootstrapping a packer build with a locally-built image.\n\nWhen using this, you won't be able to specify an image as source for the container, instead the image built from the Dockerfile will be used for the remainder of the build after that initial step.\n\n### Configuration examples:\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    build {\n        path = \"Dockerfile\"\n    }\n    commit = true\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"build\": {\n    \"path\": \"Dockerfile\"\n  },\n  \"commit\": true,\n}\n```\n\n### Required:\n\n\u003c!-- Code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `path` (string) - Path to the dockerfile to use for building the base image\n  \n  If set, the builder will invoke `docker build` on it, and use the\n  produced image to continue the build afterwards.\n  \n  Note: Mutually exclusive with \"image\"\n\n\u003c!-- End of code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `build_dir` (string) - Directory to invoke `docker build` from\n  \n  Defaults to the directory from which we invoke packer.\n\n- `arguments` (map[string]string) - A mapping of additional build args to provide. The key of\n  the object is the argument name, the value is the argument value.\n\n- `pull` (boolean) - Pull the image when building the base docker image.\n  \n  Note: defaults to true, to disable this, explicitly set it to false.\n\n- `compress` (bool) - Compress the build context before sending to the docker daemon.\n  \n  This is especially useful if the build context is large, as copying it\n  can take a significant amount of time, while once compressed, this\n  can make builds faster, at the price of extra CPU resources.\n\n\u003c!-- End of code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; --\u003e\n\n\n## Build Shared Information Variables\n\nThis build shares generated data with provisioners and post-processors via [template engines](/packer/docs/templates/legacy_json_templates/engine)\nfor JSON and [contextual variables](/packer/docs/templates/hcl_templates/contextual-variables) for HCL2.\n\nThe generated variable available for this builder is:\n\n- `ImageSha256` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\n  this variable is only available for post-processors.\n\n## Using the Artifact: Export\n\nOnce the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) and\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processors.\n\n**Note:** This section is covering how to use an artifact that has been\n_exported_. More specifically, if you set `export_path` in your configuration.\nIf you set `commit`, see the next section.\n\nThe example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n[Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more information):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-import\",\n        \"repository\": \"myrepo/myimage\",\n        \"tag\": \"0.7\"\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-import\" {\n        repository =  \"myrepo/myimage\"\n        tag = \"0.7\"\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-import`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `docker-push` post-processor which\nhandles pushing the image to a container repository.\n\nIf you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:\n\n```shell-session\n$ docker import - registry.mydomain.com/mycontainer:latest \u003c artifact.tar\n```\n\nYou can then add additional tags and push the image as usual with `docker tag`\nand `docker push`, respectively.\n\n## Using the Artifact: Committed\n\nIf you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see [Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more\ninformation):\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-tag` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`docker-push` post-processor which handles pushing the image to a container\nrepository.\n\nGoing a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage1\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage2\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage1\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ],\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage2\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ]\n  ]\n}\n```\n\n\u003cspan id=\"amazon-ec2-container-registry\"\u003e\u003c/span\u003e\n\n## Docker For Windows\n\nYou should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `docker cp`.\n\nIf you are building a Windows container, you must set the template option\n`\"windows_container\": true`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.\n\nThe following is a fully functional template for building a Windows\ncontainer.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"windows\" {\n    image = \"microsoft/windowsservercore:1709\"\n    container_dir = \"c:/app\"\n    windows_container = true\n    commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"microsoft/windowsservercore:1709\",\n      \"container_dir\": \"c:/app\",\n      \"windows_container\": true,\n      \"commit\": true\n    }\n  ]\n}\n```\n\n## Amazon EC2 Container Registry\n\nPacker can tag and push images for use in [Amazon EC2 Container\nRegistry](https://aws.amazon.com/ecr/). The post processors work as described\nabove and example configuration properties are shown below:\n\n**HCL2**\n\n```hcl\npost-processors {\n  post-processor \"docker-tag\" {\n    repository =  \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\"\n    tags       = [\"0.7\"]\n  }\n\n  post-processor \"docker-push\" {\n    ecr_login = true\n    aws_access_key = \"YOUR KEY HERE\"\n    aws_secret_key = \"YOUR SECRET KEY HERE\"\n    login_server = \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\",\n        \"ecr_login\": true,\n        \"aws_access_key\": \"YOUR KEY HERE\",\n        \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n        \"login_server\": \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n      }\n    ]\n  ]\n}\n```\n\n## Amazon ECR Public Gallery\n\nPacker can tag and push images for use in [Amazon ECR Public\nGallery](https://gallery.ecr.aws/). The post processors work as described above\nand example configuration properties are shown below:\n\n**HCL2**\n\n```hcl\n    post-processors {\n        post-processor \"docker-tag\" {\n            repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n            tags       = [\"latest\"]\n        }\n\n        post-processor \"docker-push\" {\n            \"ecr_login\": true,\n            \"aws_access_key\": \"YOUR KEY HERE\",\n            \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n            login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n        }\n    }\n```\n\n**JSON**\n\n```json\n    {\n        \"post-processors\": [\n            [\n                {\n                    \"type\": \"docker-tag\",\n                    \"repository\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\",\n                    \"tags\": [\"latest\"]\n                },\n                {\n                    \"type\": \"docker-push\",\n                    \"ecr_login\": true,\n                    \"aws_access_key\": \"YOUR KEY HERE\",\n                    \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n                    \"login_server\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n                }\n            ]\n        ]\n    }\n```\n\n[Learn how to set Amazon AWS credentials.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n## Dockerfiles\n\nThis builder allows you to build Docker images _without_ Dockerfiles.\n\nWith this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.\n\nWhile Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.\n\n**Note**: starting with v1.1.0 of the plugin, this builder supports bootstrapping\na build from a Dockerfile. This slightly conflicts with the original intent, but\npractically, for users who already have working Dockerfile-centric pipelines,\nthis limitation was a hinderance to adopting Packer for later provisioning images,\nso we opted to add this capability to the builder.\n\n## Overriding the host directory\n\nBy default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `PACKER_TMP_DIR`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.\n","created_at":"2024-12-10T19:30:42.580Z","updated_at":"2024-12-10T19:30:42.580Z","name":"Docker","slug":"docker","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},{"id":"0b7425ac-afa8-4b17-9244-b025b373a248","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-import`\n\nThe Packer Docker import post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) and imports it with Docker locally. This\nallows you to apply a repository and tag to the image and lets you use the\nother Docker post-processors such as\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) to push the image to a\nregistry.\n\n## Basic Example\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"ubuntu:18.04\",\n      \"export_path\": \"party_parrot.tar\"\n    }\n  ],\n  \"post-processors\": [\n    {\n      \"type\": \"docker-import\",\n      \"repository\": \"local/ubuntu\",\n      \"tag\": \"latest\"\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu:18.04\"\n    export_path = \"party_parrot.tar\"\n}\n\nbuild {\n  sources = [\n    \"source.docker.example\"\n  ]\n\n  post-processor \"docker-import\" {\n    repository = \"local/ubuntu\"\n    tag = \"latest\"\n  }\n}\n```\n\n## Configuration\n\nThe configuration for this post-processor only requires a `repository`, a `tag`\nis optional.\n\n### Required:\n\n- `repository` (string) - The repository of the imported image.\n\n### Optional:\n\n- `tag` (string) - The tag for the imported image. By default this is not\n  set.\n\n- `changes` (array of strings) - Dockerfile instructions to add to the\n  commit. Example of instructions are `CMD`, `ENTRYPOINT`, `ENV`, and\n  `EXPOSE`. Example: `[ \"USER ubuntu\", \"WORKDIR /app\", \"EXPOSE 8080\" ]`\n\n- `keep_input_artifact` (boolean) - if true, do not delete the source tar\n  after importing it to docker. Defaults to false.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-import\",\n  \"repository\": \"hashicorp/packer\",\n  \"tag\": \"0.7\"\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-import\" {\n  repository = \"hashicorp/packer\"\n  tag = \"0.7\"\n}\n```\n\n\nThis example would take the image created by the Docker builder and import it\ninto the local Docker process with a name of `hashicorp/packer:0.7`.\n\nFollowing this, you can use the\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processor to push it\nto a registry, if you want.\n\n## Changing Metadata\n\nBelow is an example using the changes argument of the post-processor. This\nfeature allows the tarball metadata to be changed when imported into the Docker\nenvironment. It is derived from the `docker import --change` command line\n[option to\nDocker](https://docs.docker.com/engine/reference/commandline/import/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**JSON**\n\n```hcl\npost-processor \"docker-import\" {\n  repository = \"local/centos6\"\n  tag = \"latest\"\n  changes = [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\",\n  ]\n}\n```\n\n**HCL2**\n\n```json\n{\n  \"type\": \"docker-import\",\n  \"repository\": \"local/centos6\",\n  \"tag\": \"latest\",\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"`\n  - EX: `\"CMD nginx -g daemon off;\"`\n- ENTRYPOINT\n  - String\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"`\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n","created_at":"2024-12-10T19:30:43.038Z","updated_at":"2024-12-10T19:30:43.038Z","name":"Docker Import","slug":"docker-import","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"f3688f29-e812-401f-ba1b-d0f8009c59ab","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-save`\n\nThe Packer Docker Save post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) that was committed and saves it to a file.\nThis is similar to exporting the Docker image directly from the builder, except\nthat it preserves the hierarchy of images and metadata.\n\nWe understand the terminology can be a bit confusing, but we've adopted the\nterminology from Docker, so if you're familiar with that, then you'll be\nfamiliar with this and vice versa.\n\n## Configuration\n\n### Required\n\nThe configuration for this post-processor only requires one option.\n\n- `path` (string) - The path to save the image.\n\n### Optional\n\n- `keep_input_artifact` (boolean) - if true, do not delete the docker\n  container, and only save the .tar created by docker save. Defaults to true.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-save\",\n  \"path\": \"foo.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-save\" {\n  path = \"foo.tar\"\n}\n```\n","created_at":"2024-12-10T19:30:43.373Z","updated_at":"2024-12-10T19:30:43.373Z","name":"Docker Save","slug":"docker-save","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"fd64b476-d60a-4c29-b3ef-643135062c35","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-tag`\n\nThe Packer Docker Tag post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) that was committed and tags it into a\nrepository. This allows you to use the other Docker post-processors such as\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) to push the image to a\nregistry.\n\nThis is very similar to the\n[docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) post-processor except\nthat this works with committed resources, rather than exported.\n\n## Configuration\n\nThe configuration for this post-processor requires `repository`, all other\nsettings are optional.\n\n- `repository` (string) - The repository of the image.\n\n- `tags` (array of strings) - A list of tags for the image. By default this is\n  not set. Example of declaration: `\"tags\": [\"mytag-1\", \"mytag-2\"]`\n\n- `force` (boolean) - If true, this post-processor forcibly tag the image\n  even if tag name is collided. Default to `false`. But it will be ignored if\n  Docker \u0026gt;= 1.12.0 was detected, since the `force` option was removed\n  after 1.12.0.\n  [reference](https://docs.docker.com/engine/deprecated/#/f-flag-on-docker-tag)\n\n- `keep_input_artifact` (boolean) - Unlike most other post-processors, the\n  keep_input_artifact option will have no effect for the docker-tag\n  post-processor. We will always retain the input artifact for docker-tag,\n  since deleting the image we just tagged is not a behavior anyone should ever\n  expect. `keep_input_artifact will` therefore always be evaluated as true,\n  regardless of the value you enter into this field.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-tag\",\n  \"repository\": \"hashicorp/packer\",\n  \"tags\": [\"0.7\", \"anothertag\"]\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-tag\" {\n  repository = \"hashicorp/packer\"\n  tags = [\"0.7\", \"anothertag\"]\n}\n```\n\nThis example would take the image created by the Docker builder and tag it into\nthe local Docker process with a name of `hashicorp/packer:0.7`.\n\nFollowing this, you can use the\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processor to push it\nto a registry, if you want.\n","created_at":"2024-12-10T19:30:43.700Z","updated_at":"2024-12-10T19:30:43.700Z","name":"Docker Tag","slug":"docker-tag","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"d1219b0d-6d96-4abf-9a20-c1205feb1445","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-push`\n\nThe Packer Docker push post-processor takes an artifact from the\n[docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) post-processor and\npushes it to a Docker registry.\n\n## Configuration\n\nThis post-processor has only optional configuration:\n\n- `aws_access_key` (string) - The AWS access key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the `AWS_SESSION_TOKEN`\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to\n  communicate with AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `ecr_login` (boolean) - Defaults to false. If true, the post-processor will\n  login in order to push the image to [Amazon EC2 Container Registry\n  (ECR)](https://aws.amazon.com/ecr/). The post-processor only logs in for\n  the duration of the push. If true `login_server` is required and `login`,\n  `login_username`, and `login_password` will be ignored.\n\n- `aws_force_use_public_ecr` (boolean) - Defaults to false. If true, the\npost-processor will try to force push the image to ECR Public Gallery. However,\nthis flag is optional if you specify the correct ECR Public URL in the\n`login_server`, the post-processor will automatically detect it as ECR Public.\n\n- `keep_input_artifact` (boolean) - if true, do not delete the docker image\n  after pushing it to the cloud. Defaults to true, but can be set to false if\n  you do not need to save your local copy of the docker container.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n- `login` (boolean) - Defaults to false. If true, the post-processor will\n  login prior to pushing. For log into ECR see `ecr_login`.\n  Note that a corresponding `logout` will be performed right after the push.\n  This may conflict with other parallel post-processor instances that also\n  perform login/logout (e.g. if you're building and pushing several images\n  in parallel).\n  In that case, it's better to keep `login` set to `false` and have\n  the `docker login` and `docker logout` performed out of band, separately\n  from Packer.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n-\u003e **Note:** When using _Docker Hub_ or _Quay_ registry servers, `login`\nmust to be set to `true` and `login_username`, **and** `login_password` must to\nbe set to your registry credentials. When using Docker Hub, `login_server` can\nbe omitted.\n\n-\u003e **Note:** If you login using the credentials above, the post-processor\nwill automatically log you out afterwards (just the server specified).\n\n## Example\n\nFor an example of using docker-push, see the section on using generated\nartifacts from the [docker builder](/packer/integrations/hashicorp/docker).\n","created_at":"2024-12-10T19:30:44.032Z","updated_at":"2024-12-10T19:30:44.032Z","name":"Docker Push","slug":"docker-push","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]}]},"component":{"id":"a1b476c0-e3db-415b-a0b1-a4d24fd9d016","integration_release_id":"01ffd3a8-a8f0-433f-8713-b4843de50fd0","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `docker`\n\nThe `docker` Packer builder builds [Docker](https://www.docker.io) images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.\n\nPacker builds Docker containers _without_ the use of\n[Dockerfiles](https://docs.docker.com/engine/reference/builder/). By not using\n`Dockerfiles`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on [Dockerfiles](#dockerfiles).\n\nThe Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and _does not\nsupport running on a Docker remote host_. You can learn about what [platforms\nDocker supports and how to install onto\nthem](https://docs.docker.com/engine/installation/) in the Docker\ndocumentation.\n\n## Basic Example: Export\n\nBelow is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  export_path = \"image.tar\"\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n## Basic Example: Commit\n\nBelow is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n## Basic Example: Changes to Metadata\n\nBelow is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `docker commit --change` command\nline [option to\nDocker](https://docs.docker.com/engine/reference/commandline/commit/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu\"\n    commit = true\n      changes = [\n      \"USER www-data\",\n      \"WORKDIR /var/www\",\n      \"ENV HOSTNAME www.example.com\",\n      \"VOLUME /test1 /test2\",\n      \"EXPOSE 80 443\",\n      \"LABEL version=1.0\",\n      \"ONBUILD RUN date\",\n      \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n      \"ENTRYPOINT /var/www/start.sh\"\n    ]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"commit\": true,\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"` corresponds to Docker exec form\n  - EX: `\"CMD nginx -g daemon off;\"` corresponds to Docker shell form, invokes a command shell first\n- ENTRYPOINT\n  - String, supports both array (escaped) and string form\n  - EX: `\"ENTRYPOINT [\\\"/bin/sh\\\", \\\"-c\\\", \\\"/var/www/start.sh\\\"]\"` corresponds to Docker exec form\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"` corresponds to Docker shell form, invokes a command shell first\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nThe Docker builder uses a special Docker communicator _and will not use_ the\nstandard [communicators](/packer/docs/templates/legacy_json_templates/communicators).\n\n### Required:\n\nYou must specify (only) one of `commit`, `discard`, or `export_path`.\n\n\u003c!-- Code generated from the comments of the Config struct in builder/docker/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `commit` (bool) - If true, the container will be committed to an image rather than exported.\n  Default `false`. If `commit` is `false`, then either `discard` must be\n  set to `true` or an `export_path` must be provided.\n\n- `discard` (bool) - Throw away the container when the build is complete. This is useful for\n  the [artifice\n  post-processor](/packer/docs/post-processor/artifice).\n\n- `export_path` (string) - The path where the final container will be exported as a tar file.\n\n- `message` (string) - Set a message for the commit.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/docker/config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/docker/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `build` (DockerfileBootstrapConfig) - Configuration for a bootstrap image derived from a Dockerfile\n  \n  Specifying this will make the builder run `docker build` on a provided\n  Dockerfile, and this image will then be used to perform the rest of\n  the build process.\n  \n  For more information on the contents of this object, refer to the\n  [Bootstrapping a build with a Dockerfile](#bootstrapping-a-build-with-a-dockerfile)\n  section of this documentation.\n\n- `author` (string) - Set the author (e-mail) of a commit.\n\n- `changes` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\n  are CMD, ENTRYPOINT, ENV, and EXPOSE. Example: [ \"USER ubuntu\", \"WORKDIR\n  /app\", \"EXPOSE 8080\" ]\n\n- `container_dir` (string) - The directory inside container to mount temp directory from host server\n  for work [file provisioner](/packer/docs/provisioner/file). This defaults\n  to c:/packer-files on windows and /packer-files on other systems.\n\n- `device` ([]string) - An array of devices which will be accessible in container when it's run\n  without `--privileged` flag.\n\n- `cap_add` ([]string) - An array of additional [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to grant to the container.\n\n- `cap_drop` ([]string) - An array of [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to drop from the container.\n\n- `docker_path` (string) - Sets the docker binary to use for running commands.\n  \n  If you want to use a specific version of the docker binary, or a\n  docker alternative for building your container, you can specify this\n  through this option.\n  **Note**: if using an alternative like `podman`, not all options are\n  equivalent, and the build may fail in this case.\n  \n  Defaults to \"docker\"\n\n- `exec_user` (string) - Username (UID) to run remote commands with. You can also set the group\n  name/ID if you want: (UID or UID:GID). You may need this if you get\n  permission errors trying to run the shell or other provisioners.\n\n- `image` (string) - The base image for the Docker container that will be started. This image\n  will be pulled from the Docker registry if it doesn't already exist.\n  Any value format that you can provide to `docker pull` is valid.\n  Example: `ubuntu` or `ubuntu:xenial`. If you only provide the repo, Docker\n  will pull the latest image, so setting `ubuntu` is the same as setting\n  `ubuntu:latest`. You can also set a distribution digest. For example,\n  ubuntu@sha256:a0d9e826ab87bd665cfc640598a871b748b4b70a01a4f3d174d4fb02adad07a9\n  \n  This cannot be used at the same time as `build`\n\n- `privileged` (bool) - If true, run the docker container with the `--privileged` flag. This\n  defaults to false if not set.\n\n- `runtime` (string) - Set the container runtime. A runtime different from the one installed\n  by default with Docker (`runc`) must be installed and configured.\n  The possible values are (non-exhaustive list):\n  `runsc` for [gVisor](https://gvisor.dev/),\n  `kata-runtime` for [Kata Containers](https://katacontainers.io/),\n  `sysbox-runc` for [Nestybox](https://www.nestybox.com/).\n\n- `pull` (bool) - If true, the configured image will be pulled using `docker pull` prior\n  to use. Otherwise, it is assumed the image already exists and can be\n  used. This defaults to true if not set.\n  \n  If using `build`, this field will be ignored, as the `pull` option for\n  this operation will instead have precedence.\n\n- `run_command` ([]string) - An array of arguments to pass to docker run in order to run the\n  container. By default this is set to `[\"-d\", \"-i\", \"-t\",\n  \"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]` if you are using a linux\n  container, and `[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n  \"{{.Image}}\"]` if you are running a windows container. `{{.Image}}` is a\n  template variable that corresponds to the image template option. Passing\n  the entrypoint option this way will make it the default entrypoint of\n  the resulting image, so running docker run -it --rm  will start the\n  docker image from the /bin/sh shell interpreter; you could run a script\n  or another shell by running docker run -it --rm  -c /bin/bash. If your\n  docker image embeds a binary intended to be run often, you should\n  consider changing the default entrypoint to point to it.\n\n- `tmpfs` ([]string) - An array of additional tmpfs volumes to mount into this container.\n\n- `volumes` (map[string]string) - A mapping of additional volumes to mount into this container. The key of\n  the object is the host path, the value is the container path.\n\n- `fix_upload_owner` (bool) - If true, files uploaded to the container will be owned by the user the\n  container is running as. If false, the owner will depend on the version\n  of docker installed in the system. Defaults to true.\n\n- `windows_container` (bool) - If \"true\", tells Packer that you are building a Windows container\n  running on a windows host. This is necessary for building Windows\n  containers, because our normal docker bindings do not work for them.\n\n- `platform` (string) - Set platform if server is multi-platform capable\n\n- `login` (bool) - This is used to login to a private docker repository (e.g., dockerhub)\n  to build or pull a private base container. For pushing to a private\n   repository, see the docker post-processors.\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `ecr_login` (bool) - Defaults to false. If true, the builder will login in order to build or\n  pull the image from Amazon EC2 Container Registry (ECR). The builder\n  only logs in for the duration of the build or pull step. If true,\n  login_server is required and login, login_username, and login_password\n  will be ignored. For more information see the section on ECR.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/docker/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the AwsAccessConfig struct in builder/docker/ecr_login.go; DO NOT EDIT MANUALLY --\u003e\n\n- `aws_access_key` (string) - The AWS access key used to communicate with AWS.\n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with AWS.\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the AWS_SESSION_TOKEN\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to communicate with AWS.\n\n- `aws_force_use_public_ecr` (bool) - The flag to identify whether to push docker image to Public _or_ Private\n  ECR. If the user sets this to `true` from the config, we will forcefully\n  try to push to Public ECR otherwise set this from code based on the\n  given LoginServer value.\n\n\u003c!-- End of code generated from the comments of the AwsAccessConfig struct in builder/docker/ecr_login.go; --\u003e\n\n\n## Bootstrapping a build with a Dockerfile\n\nThe `build` section of a template allows you to specify a Dockerfile to use for bootstrapping a packer build with a locally-built image.\n\nWhen using this, you won't be able to specify an image as source for the container, instead the image built from the Dockerfile will be used for the remainder of the build after that initial step.\n\n### Configuration examples:\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    build {\n        path = \"Dockerfile\"\n    }\n    commit = true\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"build\": {\n    \"path\": \"Dockerfile\"\n  },\n  \"commit\": true,\n}\n```\n\n### Required:\n\n\u003c!-- Code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `path` (string) - Path to the dockerfile to use for building the base image\n  \n  If set, the builder will invoke `docker build` on it, and use the\n  produced image to continue the build afterwards.\n  \n  Note: Mutually exclusive with \"image\"\n\n\u003c!-- End of code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `build_dir` (string) - Directory to invoke `docker build` from\n  \n  Defaults to the directory from which we invoke packer.\n\n- `arguments` (map[string]string) - A mapping of additional build args to provide. The key of\n  the object is the argument name, the value is the argument value.\n\n- `pull` (boolean) - Pull the image when building the base docker image.\n  \n  Note: defaults to true, to disable this, explicitly set it to false.\n\n- `compress` (bool) - Compress the build context before sending to the docker daemon.\n  \n  This is especially useful if the build context is large, as copying it\n  can take a significant amount of time, while once compressed, this\n  can make builds faster, at the price of extra CPU resources.\n\n\u003c!-- End of code generated from the comments of the DockerfileBootstrapConfig struct in builder/docker/dockerfile_config.go; --\u003e\n\n\n## Build Shared Information Variables\n\nThis build shares generated data with provisioners and post-processors via [template engines](/packer/docs/templates/legacy_json_templates/engine)\nfor JSON and [contextual variables](/packer/docs/templates/hcl_templates/contextual-variables) for HCL2.\n\nThe generated variable available for this builder is:\n\n- `ImageSha256` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\n  this variable is only available for post-processors.\n\n## Using the Artifact: Export\n\nOnce the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) and\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processors.\n\n**Note:** This section is covering how to use an artifact that has been\n_exported_. More specifically, if you set `export_path` in your configuration.\nIf you set `commit`, see the next section.\n\nThe example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n[Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more information):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-import\",\n        \"repository\": \"myrepo/myimage\",\n        \"tag\": \"0.7\"\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-import\" {\n        repository =  \"myrepo/myimage\"\n        tag = \"0.7\"\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-import`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `docker-push` post-processor which\nhandles pushing the image to a container repository.\n\nIf you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:\n\n```shell-session\n$ docker import - registry.mydomain.com/mycontainer:latest \u003c artifact.tar\n```\n\nYou can then add additional tags and push the image as usual with `docker tag`\nand `docker push`, respectively.\n\n## Using the Artifact: Committed\n\nIf you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see [Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more\ninformation):\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-tag` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`docker-push` post-processor which handles pushing the image to a container\nrepository.\n\nGoing a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage1\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage2\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage1\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ],\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage2\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ]\n  ]\n}\n```\n\n\u003cspan id=\"amazon-ec2-container-registry\"\u003e\u003c/span\u003e\n\n## Docker For Windows\n\nYou should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `docker cp`.\n\nIf you are building a Windows container, you must set the template option\n`\"windows_container\": true`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.\n\nThe following is a fully functional template for building a Windows\ncontainer.\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"windows\" {\n    image = \"microsoft/windowsservercore:1709\"\n    container_dir = \"c:/app\"\n    windows_container = true\n    commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"microsoft/windowsservercore:1709\",\n      \"container_dir\": \"c:/app\",\n      \"windows_container\": true,\n      \"commit\": true\n    }\n  ]\n}\n```\n\n## Amazon EC2 Container Registry\n\nPacker can tag and push images for use in [Amazon EC2 Container\nRegistry](https://aws.amazon.com/ecr/). The post processors work as described\nabove and example configuration properties are shown below:\n\n**HCL2**\n\n```hcl\npost-processors {\n  post-processor \"docker-tag\" {\n    repository =  \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\"\n    tags       = [\"0.7\"]\n  }\n\n  post-processor \"docker-push\" {\n    ecr_login = true\n    aws_access_key = \"YOUR KEY HERE\"\n    aws_secret_key = \"YOUR SECRET KEY HERE\"\n    login_server = \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n  }\n}\n```\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\",\n        \"ecr_login\": true,\n        \"aws_access_key\": \"YOUR KEY HERE\",\n        \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n        \"login_server\": \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n      }\n    ]\n  ]\n}\n```\n\n## Amazon ECR Public Gallery\n\nPacker can tag and push images for use in [Amazon ECR Public\nGallery](https://gallery.ecr.aws/). The post processors work as described above\nand example configuration properties are shown below:\n\n**HCL2**\n\n```hcl\n    post-processors {\n        post-processor \"docker-tag\" {\n            repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n            tags       = [\"latest\"]\n        }\n\n        post-processor \"docker-push\" {\n            \"ecr_login\": true,\n            \"aws_access_key\": \"YOUR KEY HERE\",\n            \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n            login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n        }\n    }\n```\n\n**JSON**\n\n```json\n    {\n        \"post-processors\": [\n            [\n                {\n                    \"type\": \"docker-tag\",\n                    \"repository\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\",\n                    \"tags\": [\"latest\"]\n                },\n                {\n                    \"type\": \"docker-push\",\n                    \"ecr_login\": true,\n                    \"aws_access_key\": \"YOUR KEY HERE\",\n                    \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n                    \"login_server\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n                }\n            ]\n        ]\n    }\n```\n\n[Learn how to set Amazon AWS credentials.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n## Dockerfiles\n\nThis builder allows you to build Docker images _without_ Dockerfiles.\n\nWith this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.\n\nWhile Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.\n\n**Note**: starting with v1.1.0 of the plugin, this builder supports bootstrapping\na build from a Dockerfile. This slightly conflicts with the original intent, but\npractically, for users who already have working Dockerfile-centric pipelines,\nthis limitation was a hinderance to adopting Packer for later provisioning images,\nso we opted to add this capability to the builder.\n\n## Overriding the host directory\n\nBy default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `PACKER_TMP_DIR`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.\n","created_at":"2024-12-10T19:30:42.580Z","updated_at":"2024-12-10T19:30:42.580Z","name":"Docker","slug":"docker","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},"processedVariablesMarkdown":{},"anchorLinks":[{"id":"basic-example:-export","level":2,"title":"Basic Example: Export"},{"id":"basic-example:-commit","level":2,"title":"Basic Example: Commit"},{"id":"basic-example:-changes-to-metadata","level":2,"title":"Basic Example: Changes to Metadata"},{"id":"configuration-reference","level":2,"title":"Configuration Reference"},{"id":"required:","level":3,"title":"Required:"},{"id":"optional:","level":3,"title":"Optional:"},{"id":"bootstrapping-a-build-with-a-dockerfile","level":2,"title":"Bootstrapping a build with a Dockerfile"},{"id":"configuration-examples:","level":3,"title":"Configuration examples:"},{"id":"required:","level":3,"title":"Required:"},{"id":"optional:","level":3,"title":"Optional:"},{"id":"build-shared-information-variables","level":2,"title":"Build Shared Information Variables"},{"id":"using-the-artifact:-export","level":2,"title":"Using the Artifact: Export"},{"id":"using-the-artifact:-committed","level":2,"title":"Using the Artifact: Committed"},{"id":"docker-for-windows","level":2,"title":"Docker For Windows"},{"id":"amazon-ec2-container-registry","level":2,"title":"Amazon EC2 Container Registry"},{"id":"amazon-ecr-public-gallery","level":2,"title":"Amazon ECR Public Gallery"},{"id":"dockerfiles","level":2,"title":"Dockerfiles"},{"id":"overriding-the-host-directory","level":2,"title":"Overriding the host directory"}],"serializedREADME":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",{\"className\":\"g-type-long-body\"},`Type: `,mdx(\"inlineCode\",{parentName:\"p\"},`docker`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The `,mdx(\"inlineCode\",{parentName:\"p\"},`docker`),` Packer builder builds `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.docker.io\"},`Docker`),` images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Packer builds Docker containers `,mdx(\"em\",{parentName:\"p\"},`without`),` the use of\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://docs.docker.com/engine/reference/builder/\"},`Dockerfiles`),`. By not using\n`,mdx(\"inlineCode\",{parentName:\"p\"},`Dockerfiles`),`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on `,mdx(\"a\",{parentName:\"p\",\"href\":\"#dockerfiles\"},`Dockerfiles`),`.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and `,mdx(\"em\",{parentName:\"p\"},`does not\nsupport running on a Docker remote host`),`. You can learn about what `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://docs.docker.com/engine/installation/\"},`platforms\nDocker supports and how to install onto\nthem`),` in the Docker\ndocumentation.`),mdx(\"h2\",{\"id\":\"user-content-basic-example:-export\",\"data-text-content\":\"Basic Example Export\",\"className\":\"g-type-display-3\"},`Basic Example: Export`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Below is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  image `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  export_path `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"image.tar\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`build`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  sources `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"source.docker.example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"image\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"export_path\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"image.tar\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h2\",{\"id\":\"user-content-basic-example:-commit\",\"data-text-content\":\"Basic Example Commit\",\"className\":\"g-type-display-3\"},`Basic Example: Commit`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Below is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  image `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  commit `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`build`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  sources `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"source.docker.example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"image\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"export_path\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"image.tar\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h2\",{\"id\":\"user-content-basic-example:-changes-to-metadata\",\"data-text-content\":\"Basic Example Changes to Metadata\",\"className\":\"g-type-display-3\"},`Basic Example: Changes to Metadata`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Below is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `,mdx(\"inlineCode\",{parentName:\"p\"},`docker commit --change`),` command\nline `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://docs.docker.com/engine/reference/commandline/commit/\"},`option to\nDocker`),`.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Example uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    image `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    commit `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      changes `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"USER www-data\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"WORKDIR /var/www\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"ENV HOSTNAME www.example.com\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"VOLUME /test1 /test2\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"EXPOSE 80 443\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"LABEL version=1.0\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"ONBUILD RUN date\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"ENTRYPOINT /var/www/start.sh\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"image\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"ubuntu\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"commit\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"changes\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"USER www-data\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"WORKDIR /var/www\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"ENV HOSTNAME www.example.com\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"VOLUME /test1 /test2\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"EXPOSE 80 443\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"LABEL version=1.0\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"ONBUILD RUN date\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`    \"ENTRYPOINT /var/www/start.sh\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Allowed metadata fields that can be changed are:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`CMD`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, supports both array (escaped) and string form`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"`),` corresponds to Docker exec form`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"CMD nginx -g daemon off;\"`),` corresponds to Docker shell form, invokes a command shell first`))),mdx(\"li\",{parentName:\"ul\"},`ENTRYPOINT`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, supports both array (escaped) and string form`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"ENTRYPOINT [\\\\\"/bin/sh\\\\\", \\\\\"-c\\\\\", \\\\\"/var/www/start.sh\\\\\"]\"`),` corresponds to Docker exec form`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"ENTRYPOINT /var/www/start.sh\"`),` corresponds to Docker shell form, invokes a command shell first`))),mdx(\"li\",{parentName:\"ul\"},`ENV`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, note there is no equal sign:`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"ENV HOSTNAME www.example.com\"`),` not\n`,mdx(\"inlineCode\",{parentName:\"li\"},`\"ENV HOSTNAME=www.example.com\"`)))),mdx(\"li\",{parentName:\"ul\"},`EXPOSE`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, space separated ports`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"EXPOSE 80 443\"`)))),mdx(\"li\",{parentName:\"ul\"},`LABEL`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, space separated key=value pairs`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"LABEL version=1.0\"`)))),mdx(\"li\",{parentName:\"ul\"},`ONBUILD`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"ONBUILD RUN date\"`)))),mdx(\"li\",{parentName:\"ul\"},`MAINTAINER`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String, deprecated in Docker version 1.13.0`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"MAINTAINER NAME\"`)))),mdx(\"li\",{parentName:\"ul\"},`USER`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"USER USERNAME\"`)))),mdx(\"li\",{parentName:\"ul\"},`VOLUME`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"VOLUME FROM TO\"`)))),mdx(\"li\",{parentName:\"ul\"},`WORKDIR`,mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`String`),mdx(\"li\",{parentName:\"ul\"},`EX: `,mdx(\"inlineCode\",{parentName:\"li\"},`\"WORKDIR PATH\"`))))),mdx(\"h2\",{\"id\":\"user-content-configuration-reference\",\"data-text-content\":\"Configuration Reference\",\"className\":\"g-type-display-3\"},`Configuration Reference`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Configuration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The Docker builder uses a special Docker communicator `,mdx(\"em\",{parentName:\"p\"},`and will not use`),` the\nstandard `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/legacy_json_templates/communicators\"},`communicators`),`.`),mdx(\"h3\",{\"id\":\"user-content-required:\",\"data-text-content\":\"Required\",\"className\":\"g-type-display-4\"},`Required:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`You must specify (only) one of `,mdx(\"inlineCode\",{parentName:\"p\"},`commit`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`discard`),`, or `,mdx(\"inlineCode\",{parentName:\"p\"},`export_path`),`.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`commit`),` (bool) - If true, the container will be committed to an image rather than exported.\nDefault `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. If `,mdx(\"inlineCode\",{parentName:\"p\"},`commit`),` is `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`, then either `,mdx(\"inlineCode\",{parentName:\"p\"},`discard`),` must be\nset to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` or an `,mdx(\"inlineCode\",{parentName:\"p\"},`export_path`),` must be provided.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`discard`),` (bool) - Throw away the container when the build is complete. This is useful for\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/post-processor/artifice\"},`artifice\npost-processor`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`export_path`),` (string) - The path where the final container will be exported as a tar file.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`message`),` (string) - Set a message for the commit.`))),mdx(\"h3\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-4\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`build`),` (DockerfileBootstrapConfig) - Configuration for a bootstrap image derived from a Dockerfile`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Specifying this will make the builder run `,mdx(\"inlineCode\",{parentName:\"p\"},`docker build`),` on a provided\nDockerfile, and this image will then be used to perform the rest of\nthe build process.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`For more information on the contents of this object, refer to the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#bootstrapping-a-build-with-a-dockerfile\"},`Bootstrapping a build with a Dockerfile`),`\nsection of this documentation.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`author`),` (string) - Set the author (e-mail) of a commit.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`changes`),` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\nare CMD, ENTRYPOINT, ENV, and EXPOSE. Example: `,`[ \"USER ubuntu\", \"WORKDIR\n/app\", \"EXPOSE 8080\" ]`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`container_dir`),` (string) - The directory inside container to mount temp directory from host server\nfor work `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/provisioner/file\"},`file provisioner`),`. This defaults\nto c:/packer-files on windows and /packer-files on other systems.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`device`),` ([]string) - An array of devices which will be accessible in container when it's run\nwithout `,mdx(\"inlineCode\",{parentName:\"p\"},`--privileged`),` flag.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`cap_add`),` ([]string) - An array of additional `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\"},`Linux\ncapabilities`),`\nto grant to the container.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`cap_drop`),` ([]string) - An array of `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\"},`Linux\ncapabilities`),`\nto drop from the container.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`docker_path`),` (string) - Sets the docker binary to use for running commands.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If you want to use a specific version of the docker binary, or a\ndocker alternative for building your container, you can specify this\nthrough this option.\n`,mdx(\"strong\",{parentName:\"p\"},`Note`),`: if using an alternative like `,mdx(\"inlineCode\",{parentName:\"p\"},`podman`),`, not all options are\nequivalent, and the build may fail in this case.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Defaults to \"docker\"`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`exec_user`),` (string) - Username (UID) to run remote commands with. You can also set the group\nname/ID if you want: (UID or UID:GID). You may need this if you get\npermission errors trying to run the shell or other provisioners.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image`),` (string) - The base image for the Docker container that will be started. This image\nwill be pulled from the Docker registry if it doesn't already exist.\nAny value format that you can provide to `,mdx(\"inlineCode\",{parentName:\"p\"},`docker pull`),` is valid.\nExample: `,mdx(\"inlineCode\",{parentName:\"p\"},`ubuntu`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`ubuntu:xenial`),`. If you only provide the repo, Docker\nwill pull the latest image, so setting `,mdx(\"inlineCode\",{parentName:\"p\"},`ubuntu`),` is the same as setting\n`,mdx(\"inlineCode\",{parentName:\"p\"},`ubuntu:latest`),`. You can also set a distribution digest. For example,\nubuntu@sha256:a0d9e826ab87bd665cfc640598a871b748b4b70a01a4f3d174d4fb02adad07a9`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This cannot be used at the same time as `,mdx(\"inlineCode\",{parentName:\"p\"},`build`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`privileged`),` (bool) - If true, run the docker container with the `,mdx(\"inlineCode\",{parentName:\"p\"},`--privileged`),` flag. This\ndefaults to false if not set.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`runtime`),` (string) - Set the container runtime. A runtime different from the one installed\nby default with Docker (`,mdx(\"inlineCode\",{parentName:\"p\"},`runc`),`) must be installed and configured.\nThe possible values are (non-exhaustive list):\n`,mdx(\"inlineCode\",{parentName:\"p\"},`runsc`),` for `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://gvisor.dev/\"},`gVisor`),`,\n`,mdx(\"inlineCode\",{parentName:\"p\"},`kata-runtime`),` for `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://katacontainers.io/\"},`Kata Containers`),`,\n`,mdx(\"inlineCode\",{parentName:\"p\"},`sysbox-runc`),` for `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.nestybox.com/\"},`Nestybox`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`pull`),` (bool) - If true, the configured image will be pulled using `,mdx(\"inlineCode\",{parentName:\"p\"},`docker pull`),` prior\nto use. Otherwise, it is assumed the image already exists and can be\nused. This defaults to true if not set.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If using `,mdx(\"inlineCode\",{parentName:\"p\"},`build`),`, this field will be ignored, as the `,mdx(\"inlineCode\",{parentName:\"p\"},`pull`),` option for\nthis operation will instead have precedence.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`run_command`),` ([]string) - An array of arguments to pass to docker run in order to run the\ncontainer. By default this is set to `,mdx(\"inlineCode\",{parentName:\"p\"},`[\"-d\", \"-i\", \"-t\",\n\"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]`),` if you are using a linux\ncontainer, and `,mdx(\"inlineCode\",{parentName:\"p\"},`[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n\"{{.Image}}\"]`),` if you are running a windows container. `,mdx(\"inlineCode\",{parentName:\"p\"},`{{.Image}}`),` is a\ntemplate variable that corresponds to the image template option. Passing\nthe entrypoint option this way will make it the default entrypoint of\nthe resulting image, so running docker run -it --rm  will start the\ndocker image from the /bin/sh shell interpreter; you could run a script\nor another shell by running docker run -it --rm  -c /bin/bash. If your\ndocker image embeds a binary intended to be run often, you should\nconsider changing the default entrypoint to point to it.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`tmpfs`),` ([]string) - An array of additional tmpfs volumes to mount into this container.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`volumes`),` (map`,`[string]`,`string) - A mapping of additional volumes to mount into this container. The key of\nthe object is the host path, the value is the container path.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`fix_upload_owner`),` (bool) - If true, files uploaded to the container will be owned by the user the\ncontainer is running as. If false, the owner will depend on the version\nof docker installed in the system. Defaults to true.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`windows_container`),` (bool) - If \"true\", tells Packer that you are building a Windows container\nrunning on a windows host. This is necessary for building Windows\ncontainers, because our normal docker bindings do not work for them.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`platform`),` (string) - Set platform if server is multi-platform capable`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`login`),` (bool) - This is used to login to a private docker repository (e.g., dockerhub)\nto build or pull a private base container. For pushing to a private\nrepository, see the docker post-processors.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`login_password`),` (string) - The password to use to authenticate to login.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`login_server`),` (string) - The server address to login to.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`login_username`),` (string) - The username to use to authenticate to login.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ecr_login`),` (bool) - Defaults to false. If true, the builder will login in order to build or\npull the image from Amazon EC2 Container Registry (ECR). The builder\nonly logs in for the duration of the build or pull step. If true,\nlogin_server is required and login, login_username, and login_password\nwill be ignored. For more information see the section on ECR.`))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`aws_access_key`),` (string) - The AWS access key used to communicate with AWS.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`aws_secret_key`),` (string) - The AWS secret key used to communicate with AWS.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`aws_token`),` (string) - The AWS access token to use. This is different from\nthe access key and secret key. If you're not sure what this is, then you\nprobably don't need it. This will also be read from the AWS_SESSION_TOKEN\nenvironmental variable.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`aws_profile`),` (string) - The AWS shared credentials profile used to communicate with AWS.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`aws_force_use_public_ecr`),` (bool) - The flag to identify whether to push docker image to Public `,mdx(\"em\",{parentName:\"p\"},`or`),` Private\nECR. If the user sets this to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` from the config, we will forcefully\ntry to push to Public ECR otherwise set this from code based on the\ngiven LoginServer value.`))),mdx(\"h2\",{\"id\":\"user-content-bootstrapping-a-build-with-a-dockerfile\",\"data-text-content\":\"Bootstrapping a build with a Dockerfile\",\"className\":\"g-type-display-3\"},`Bootstrapping a build with a Dockerfile`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The `,mdx(\"inlineCode\",{parentName:\"p\"},`build`),` section of a template allows you to specify a Dockerfile to use for bootstrapping a packer build with a locally-built image.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`When using this, you won't be able to specify an image as source for the container, instead the image built from the Dockerfile will be used for the remainder of the build after that initial step.`),mdx(\"h3\",{\"id\":\"user-content-configuration-examples:\",\"data-text-content\":\"Configuration examples\",\"className\":\"g-type-display-4\"},`Configuration examples:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    build`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        path `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"Dockerfile\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    commit `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"build\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`    \"path\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"Dockerfile\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"commit\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h3\",{\"id\":\"user-content-required:\",\"data-text-content\":\"Required\",\"className\":\"g-type-display-4\"},`Required:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`path`),` (string) - Path to the dockerfile to use for building the base image`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If set, the builder will invoke `,mdx(\"inlineCode\",{parentName:\"p\"},`docker build`),` on it, and use the\nproduced image to continue the build afterwards.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Note: Mutually exclusive with \"image\"`))),mdx(\"h3\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-4\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`build_dir`),` (string) - Directory to invoke `,mdx(\"inlineCode\",{parentName:\"p\"},`docker build`),` from`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Defaults to the directory from which we invoke packer.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`arguments`),` (map`,`[string]`,`string) - A mapping of additional build args to provide. The key of\nthe object is the argument name, the value is the argument value.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`pull`),` (boolean) - Pull the image when building the base docker image.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Note: defaults to true, to disable this, explicitly set it to false.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`compress`),` (bool) - Compress the build context before sending to the docker daemon.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This is especially useful if the build context is large, as copying it\ncan take a significant amount of time, while once compressed, this\ncan make builds faster, at the price of extra CPU resources.`))),mdx(\"h2\",{\"id\":\"user-content-build-shared-information-variables\",\"data-text-content\":\"Build Shared Information Variables\",\"className\":\"g-type-display-3\"},`Build Shared Information Variables`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`This build shares generated data with provisioners and post-processors via `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/legacy_json_templates/engine\"},`template engines`),`\nfor JSON and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/hcl_templates/contextual-variables\"},`contextual variables`),` for HCL2.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The generated variable available for this builder is:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},`ImageSha256`),` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\nthis variable is only available for post-processors.`)),mdx(\"h2\",{\"id\":\"user-content-using-the-artifact:-export\",\"data-text-content\":\"Using the Artifact Export\",\"className\":\"g-type-display-3\"},`Using the Artifact: Export`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Once the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import\"},`docker-import`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push\"},`docker-push`),` post-processors.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`Note:`),` This section is covering how to use an artifact that has been\n`,mdx(\"em\",{parentName:\"p\"},`exported`),`. More specifically, if you set `,mdx(\"inlineCode\",{parentName:\"p\"},`export_path`),` in your configuration.\nIf you set `,mdx(\"inlineCode\",{parentName:\"p\"},`commit`),`, see the next section.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/legacy_json_templates/post-processors\"},`Post-Processors`),` for more information):`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"post-processors\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-import\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"myrepo/myimage\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"0.7\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-push\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-import\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"myrepo/myimage\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        tag `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"0.7\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`In the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `,mdx(\"inlineCode\",{parentName:\"p\"},`docker-import`),`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `,mdx(\"inlineCode\",{parentName:\"p\"},`docker-push`),` post-processor which\nhandles pushing the image to a container repository.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`If you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` docker import - registry.mydomain.com/mycontainer:latest `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\u003c`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` artifact.tar`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`You can then add additional tags and push the image as usual with `,mdx(\"inlineCode\",{parentName:\"p\"},`docker tag`),`\nand `,mdx(\"inlineCode\",{parentName:\"p\"},`docker push`),`, respectively.`),mdx(\"h2\",{\"id\":\"user-content-using-the-artifact:-committed\",\"data-text-content\":\"Using the Artifact Committed\",\"className\":\"g-type-display-3\"},`Using the Artifact: Committed`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`If you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/legacy_json_templates/post-processors\"},`Post-Processors`),` for more\ninformation):`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"myrepo/myimage\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        tags `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"post-processors\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"myrepo/myimage\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"tags\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-push\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`In the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `,mdx(\"inlineCode\",{parentName:\"p\"},`docker-tag`),` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`docker-push`),` post-processor which handles pushing the image to a container\nrepository.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Going a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"myrepo/myimage1\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        tags `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"myrepo/myimage2\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        tags `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {}`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"post-processors\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"myrepo/myimage1\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"tags\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"docker-push\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"myrepo/myimage2\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"tags\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`      \"docker-push\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h2\",{\"id\":\"user-content-docker-for-windows\",\"data-text-content\":\"Docker For Windows\",\"className\":\"g-type-display-3\"},`Docker For Windows`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`You should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `,mdx(\"inlineCode\",{parentName:\"p\"},`docker cp`),`.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`If you are building a Windows container, you must set the template option\n`,mdx(\"inlineCode\",{parentName:\"p\"},`\"windows_container\": true`),`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The following is a fully functional template for building a Windows\ncontainer.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"windows\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    image `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"microsoft/windowsservercore:1709\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    container_dir `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"c:/app\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    windows_container `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    commit `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`build`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  sources `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"source.docker.example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"builders\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"image\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"microsoft/windowsservercore:1709\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"container_dir\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"c:/app\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"windows_container\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`      \"commit\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h2\",{\"id\":\"user-content-amazon-ec2-container-registry\",\"data-text-content\":\"Amazon EC2 Container Registry\",\"className\":\"g-type-display-3\"},`Amazon EC2 Container Registry`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Packer can tag and push images for use in `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://aws.amazon.com/ecr/\"},`Amazon EC2 Container\nRegistry`),`. The post processors work as described\nabove and example configuration properties are shown below:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    tags       `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ecr_login `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    aws_access_key `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR KEY HERE\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    aws_secret_key `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR SECRET KEY HERE\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    login_server `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`  \"post-processors\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"tags\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"0.7\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"ecr_login\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"aws_access_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"aws_secret_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR SECRET KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"login_server\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`      }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h2\",{\"id\":\"user-content-amazon-ecr-public-gallery\",\"data-text-content\":\"Amazon ECR Public Gallery\",\"className\":\"g-type-display-3\"},`Amazon ECR Public Gallery`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Packer can tag and push images for use in `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://gallery.ecr.aws/\"},`Amazon ECR Public\nGallery`),`. The post processors work as described above\nand example configuration properties are shown below:`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`HCL2`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`    post-processors`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`        post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`            repository `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`            tags       `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"latest\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        }`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`        post-processor`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`            \"ecr_login\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`            \"aws_access_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`            \"aws_secret_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR SECRET KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`            login_server `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`JSON`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`        \"post-processors\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`            [`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`                {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-tag\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"repository\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"tags\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"latest\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`                }`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`                {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"type\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"docker-push\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"ecr_login\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` true`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"aws_access_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"aws_secret_key\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"YOUR SECRET KEY HERE\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`                    \"login_server\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`                }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`            ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`        ]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    }`)),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/integrations/hashicorp/amazon#specifying-amazon-credentials\"},`Learn how to set Amazon AWS credentials.`)),mdx(\"h2\",{\"id\":\"user-content-dockerfiles\",\"data-text-content\":\"Dockerfiles\",\"className\":\"g-type-display-3\"},`Dockerfiles`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`This builder allows you to build Docker images `,mdx(\"em\",{parentName:\"p\"},`without`),` Dockerfiles.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`With this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`While Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`Note`),`: starting with v1.1.0 of the plugin, this builder supports bootstrapping\na build from a Dockerfile. This slightly conflicts with the original intent, but\npractically, for users who already have working Dockerfile-centric pipelines,\nthis limitation was a hinderance to adopting Packer for later provisioning images,\nso we opted to add this capability to the builder.`),mdx(\"h2\",{\"id\":\"user-content-overriding-the-host-directory\",\"data-text-content\":\"Overriding the host directory\",\"className\":\"g-type-display-3\"},`Overriding the host directory`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`By default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `,mdx(\"inlineCode\",{parentName:\"p\"},`PACKER_TMP_DIR`),`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.`))};MDXContent.isMDXComponent=true;","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"Docker","url":"/packer/integrations/hashicorp/docker","isCurrentPage":false},{"title":"v1.1.1","url":"/packer/integrations/hashicorp/docker/v1.1.1","isCurrentPage":false},{"title":"Components"},{"title":"Builder"},{"title":"Docker","url":"/packer/integrations/hashicorp/docker/latest/components/builder/docker","isCurrentPage":true}]},"__N_SSG":true},"page":"/[productSlug]/integrations/[organizationSlug]/[integrationSlug]/[integrationVersion]/components/[componentType]/[componentSlug]","query":{"productSlug":"packer","organizationSlug":"hashicorp","integrationSlug":"docker","integrationVersion":"latest","componentType":"builder","componentSlug":"docker"},"buildId":"Eq7mQN_7lDQbF6kuSpl3s","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>