"use strict";(()=>{var t={};t.id=3500,t.ids=[3500],t.modules={48010:t=>{t.exports=require("http-status-codes")},52591:t=>{t.exports=require("moize")},20145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},57147:t=>{t.exports=require("fs")},71017:t=>{t.exports=require("path")},56249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},27277:(t,e,r)=>{r.r(e),r.d(e,{config:()=>u,default:()=>i,routeModule:()=>d});var a=r(71802),o=r(47153),n=r(56249),s=r(7951);let i=(0,n.l)(s,"default"),u=(0,n.l)(s,"config"),d=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/revalidate",pathname:"/api/revalidate",bundlePath:"",filename:""},userland:s})},6200:(t,e,r)=>{r.d(e,{R:()=>o});var a=r(48010);function o(t,e){return(r,o)=>{if(!e?.onlyMethods||r.method&&e?.onlyMethods?.includes(r.method)){let t=r.headers.authorization?.split(" ");if(!t||t.length<2||"Bearer"!==t[0]||t[1]!==e.token){o.status(a.StatusCodes.UNAUTHORIZED).end();return}}return t(r,o)}}},77609:(t,e,r)=>{r.d(e,{i:()=>u});var a=r(57147),o=r.n(a),n=r(71017),s=r.n(n),i=r(52591);let u=r.n(i)()(function(t){try{return JSON.parse(o().readFileSync(s().join(process.cwd(),`src/data/${t}.json`),"utf-8"))}catch(e){throw console.error(`[Error]: unable to fetch product data for ${t} â€” ${e.message}`),e}})},7951:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u,resolveProduct:()=>s});var a=r(48010),o=r(6200),n=r(77609);function s(t){return t.startsWith("terraform-")||"terraform-enterprise"===t?"terraform":"hcp-docs"===t?"hcp":t}async function i(t,e){if("POST"!==t.method){e.status(a.StatusCodes.NOT_FOUND);return}let{product:r}=t.body;if(!r){e.status(a.StatusCodes.BAD_REQUEST).json({error:"No product provided."});return}let o=s(r),i=(0,n.i)(o).rootDocsPaths.map(({navDataPrefix:t,path:e,productSlugForLoader:r})=>({navDataPrefix:t,path:e,productSlugForLoader:r})),u=(await Promise.all(i.map(async({navDataPrefix:t,path:e,productSlugForLoader:a})=>{if(r!==o&&a!==r)return!1;a||=r;let n=await fetch(`https://content.hashicorp.com/api/content/${a}/nav-data/latest/${t??e}`),{result:s}=await n.json();return s&&s.navData?[e,s.navData]:(console.log(`[revalidate] failed to find nav data for path: ${e}. It is possible that this path does not have nav data, this is likely safe to ignore.`),!1)}))).filter(Boolean),d=[];u.forEach(([t,r])=>{!function t(r,a){a.forEach(({path:a,routes:n})=>{if(n){t(r,n);return}if(void 0!==a){let t=`/${o}/${r}/${a}`.replace(/\/$/,"");d.push(new Promise((r,a)=>{e.revalidate(t).then(()=>r({path:t})).catch(e=>a({error:e?.toString(),path:t}))}))}})}(t,r)});let l=await Promise.allSettled(d),p={},c=[];l.forEach(t=>{let e;let r=p[t.status];-1===(e=r&&-1!==r?r:c.findIndex(e=>e.status===t.status))&&(e=c.push({status:t.status,paths:[]})-1,p[t.status]=e),c[e].paths.push("fulfilled"===t.status?t.value.path:{path:t.reason.path,error:t.reason.error})}),e.status(200).json(c)}let u=(0,o.R)(i,{token:process.env.REVALIDATE_TOKEN,onlyMethods:["POST"]})},47153:(t,e)=>{var r;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return r}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(r||(r={}))},71802:(t,e,r)=>{t.exports=r(20145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var r=e(e.s=27277);module.exports=r})();