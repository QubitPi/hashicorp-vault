{"pageProps":{"metadata":{"title":"Kamatera | Integrations","description":"Build Kamatera cloud images and add them to the account's disk library."},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"9706d288-38fa-4cfa-b552-f04a7dca5fc2","slug":"kamatera","name":"Kamatera","description":"Build Kamatera cloud images and add them to the account's disk library.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"community","repo_url":"https://github.com/Kamatera/packer-plugin-kamatera","subdirectory":"/.web-docs","created_at":"2024-02-08T17:17:06.363Z","updated_at":"2024-02-10T13:31:56.151Z","hide_versions":false,"organization":{"id":"0ac80ed2-f56a-4b66-83e1-5713cc51ed88","slug":"Kamatera","created_at":"2024-02-08T17:17:05.448Z","updated_at":"2024-02-08T17:17:05.448Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["0.6.5","0.6.4","0.6.3","0.0.56"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"}],"flags":[],"integration_type":null},"activeRelease":{"id":"b599e5e5-2154-4238-8d13-ddf2b2219bcb","integration_id":"9706d288-38fa-4cfa-b552-f04a7dca5fc2","version":"0.6.5","readme":"The Kamatera plugin is intended to be used for managing [Kamatera cloud](https://www.kamatera.com/express/compute/) images through Packer\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    kamatera = {\n      version = \">= 0.5.0\"\n      source  = \"github.com/kamatera/kamatera\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/kamatera/kamatera\n```\n\n\n### Components\n\n#### Builders\n\n- [kamatera](/packer/integrations/Kamatera/kamatera/latest/components/builder/kamatera) - The builder builds Kamatera images.\n","created_at":"2024-02-11T07:07:11.942Z","updated_at":"2024-02-11T07:07:11.942Z","components":[{"id":"8259cfaa-df95-4761-8150-ff996b6d5be6","integration_release_id":"b599e5e5-2154-4238-8d13-ddf2b2219bcb","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `kamatera`\n\nThe `kamatera` Packer builder builds [Kamatera cloud](https://www.kamatera.com/express/compute/)\nimages and adds them to the account's disk library.\n\nThe builder process is as follows:\n\n1. Create a temporary Kamatera server according to the builder configuration\n2. Establish SSH connection to the server\n3. Run provisioners\n4. Create a Kamatera hard disk image from the server\n5. Poweroff and terminate the server\n\nFor details on how to use the Kamatera builder please see the [Tutorial](#tutorial) below.\n\n## Configuration Reference\n\n### Required Builder Configuration options:\n\n- `api_secret` (string) - The Kamatera API secret to use. It can also be specified via environment variable `KAMATERA_API_SECRET`.\n- `api_client_id` (string) - The Kamatera API client ID to use. It can also be specified via environment variable `KAMATERA_API_CLIENT_ID`.\n- `datacenter` (string) - The Kamatera datacenter to which the server is deployed.\n- `ssh_username` (string) - Must be set with a value of `root`\n\n### Optional:\n\n- `image_name` (string) - The name of the resulting image that will appear in your Kamatera hard disk library. Defaults to `packer-{{timestamp}}`.\n- `cpu` (string) - The cpu assigned to the temporary server. Default to `1A`.\n- `ram` (string) - The ram assigned to the temporary server. Default to `1024`.\n- `image` (string) - The image used by the temporary server. Default to `ubuntu_server_18.04_64-bit`.\n- `disk` (string) - The disk size in GB assigned to the temporary server. Default to `10`.\n- `script` (string) - Script to run for provisioning the server - Bash for linux images, Powershell for windows images.\n- `disable_ssh` (bool) - Disable SSH access to the server, this is required when provisioning a Windows image.\n\n## Tutorial\n\nThis tutorial creates a Linux machine image, for Windows images see below.\n\nSet environment variables with your Kamatera API key (you can generate an API key from the [Kamatera console](https://console.kamatera.com) -> API -> Keys):\n\n```shell\nexport KAMATERA_API_CLIENT_ID=\nexport KAMATERA_API_SECRET=\n```\n\nCreate a new directory named `packer_tutorial` and paste the following configuration into a file named `kamatera-ubuntu.pkr.hcl`:\n\n```hcl\npacker {\n  required_plugins {\n    kamatera = {\n      version = \">= 0.5.0\"\n      source  = \"github.com/kamatera/kamatera\"\n    }\n  }\n}\n\nsource \"kamatera\" \"ubuntu\" {\n  datacenter = \"EU\"\n  ssh_username = \"root\"\n  image_name = \"ubuntu-example-packer-image\"\n  script = <<-EOF\n    echo Creating example.txt &&\\\n    echo \"Hello World\" > example.txt\n  EOF\n}\n\nbuild {\n  sources = [\n    \"source.kamatera.ubuntu\"\n  ]\n}\n```\n\nChange to the `packer_tutorial` directory and run the following commands to download the Kamatera plugin:\n\n```shell\npacker init .\n```\n\nBuild the image:\n\n```shell\npacker build .\n```\n\nPlease wait, this will take a while...\n\nWhen done, log-in to [Kamatera console](https://console.kamatera.com) and navigate to My Cloud -> Hard Disk Library.\nChoose zone `EU` and click on MY PRIVATE IMAGES - you should see the created image there.\n\nYou can now create a new server from this image, SSH into that server and run `cat example.txt`.\n\n## Creating Windows machine images\n\nWindows machine images are supported but have to use the inline script argument instead of custom provisioners.\n\nFollowing is an example of a windows image source configuration:\n\n```\nsource \"kamatera\" \"windows\" {\n  datacenter = \"EU\"\n  image = \"windows_server_2022_datacenter_64-bit\"\n  // windows images do not support SSH, this also prevents running any custom provisioners\n  disable_ssh = true\n  // ssh_user is still required even though it is not used\n  ssh_username = \"root\"\n  image_name = \"windows-example-packer-image\"\n  // powershell script can be used to provision the server\n  script = <<-EOF\n    Write-Host \"Hello World!\"\n    \"Hello World\" | Out-File -FilePath test.txt\n  EOF\n}\n```\n\nIf you create a server using this configuration you should be able to find the created `test.txt` file on the server.\n","created_at":"2024-02-11T07:07:12.270Z","updated_at":"2024-02-11T07:07:12.270Z","name":"Kamatera","slug":"kamatera","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]}]},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"Kamatera","url":"/packer/integrations/Kamatera/kamatera","isCurrentPage":true}],"anchorLinks":[{"id":"installation","level":3,"title":"Installation"},{"id":"components","level":3,"title":"Components"},{"id":"builders","level":4,"title":"Builders"}],"serializedREADME":{"compiledSource":"var i=Object.defineProperty,u=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var c=(e,n,t)=>n in e?i(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,a=(e,n)=>{for(var t in n||(n={}))o.call(n,t)&&c(e,t,n[t]);if(p)for(var t of p(n))r.call(n,t)&&c(e,t,n[t]);return e},m=(e,n)=>u(e,d(n));var l=(e,n)=>{var t={};for(var s in e)o.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&p)for(var s of p(e))n.indexOf(s)<0&&r.call(e,s)&&(t[s]=e[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:e}=s,n=l(s,[\"components\"]);return mdx(MDXLayout,m(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The Kamatera plugin is intended to be used for managing \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.kamatera.com/express/compute/\"}),\"Kamatera cloud\"),\" images through Packer\"),mdx(\"h3\",a({},{id:\"user-content-installation\",\"data-text-content\":\"Installation\",className:\"g-type-display-4\"}),\"Installation\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To install this plugin, copy and paste this code into your Packer configuration, then run \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.packer.io/docs/commands/init\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"packer init\")),\".\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"kamatera\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\">= 0.5.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/kamatera/kamatera\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Alternatively, you can use \",mdx(\"inlineCode\",{parentName:\"p\"},\"packer plugins install\"),\" to manage installation of this plugin.\"),mdx(\"pre\",a({},{className:\"language-sh\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-sh\"}),\"$ packer plugins install github.com/kamatera/kamatera\",`\n`)),mdx(\"h3\",a({},{id:\"user-content-components\",\"data-text-content\":\"Components\",className:\"g-type-display-4\"}),\"Components\"),mdx(\"h4\",a({},{id:\"user-content-builders\",\"data-text-content\":\"Builders\",className:\"g-type-display-5\"}),\"Builders\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",a({parentName:\"li\"},{href:\"/packer/integrations/Kamatera/kamatera/latest/components/builder/kamatera\"}),\"kamatera\"),\" - The builder builds Kamatera images.\")))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true}