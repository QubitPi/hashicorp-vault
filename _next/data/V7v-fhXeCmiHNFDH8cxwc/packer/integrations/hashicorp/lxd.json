{"pageProps":{"metadata":{"title":"LXD | Integrations","description":"The LXD plugin can be used with HashiCorp Packer to create OCI images with LXD."},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"3e86c027-ff11-47ee-b092-538288026966","slug":"lxd","name":"LXD","description":"The LXD plugin can be used with HashiCorp Packer to create OCI images with LXD.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"community","repo_url":"https://github.com/hashicorp/packer-plugin-lxd","subdirectory":"/.web-docs","created_at":"2023-06-15T19:02:55.988Z","updated_at":"2023-08-08T17:01:11.662Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.0.2","1.0.1"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"}],"flags":[],"integration_type":null},"activeRelease":{"id":"e930185c-97bf-445b-8b3f-e6110cf01c52","integration_id":"3e86c027-ff11-47ee-b092-538288026966","version":"1.0.2","readme":"The LXD plugin allows building containers for LXD, by starting an LXD container,\nrunning provisioners within this container, then saveing the container\nas an LXD image.\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    lxd = {\n      source  = \"github.com/hashicorp/lxd\"\n      version = \"~> 1\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/hashicorp/lxd\n```\n\n### Components\n\n#### Builders\n\n- [lxd](/packer/integrations/hashicorp/lxd/latest/components/builder/lxd) - The LXD builder builds containers with LXD\n  by starting a container, provisioning it, and exporting it as a tar.gz archive of the root file system.\n","created_at":"2023-11-28T17:29:17.259Z","updated_at":"2023-11-28T17:29:17.259Z","components":[{"id":"e20035ed-a5c7-433d-b32d-cc03ca1720ee","integration_release_id":"e930185c-97bf-445b-8b3f-e6110cf01c52","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `lxd`\nArtifact BuilderId: `lxd`\n\nThe `lxd` Packer builder builds containers for LXD. The builder starts an LXD\ncontainer, runs provisioners within this container, then saves the container as\nan LXD image.\n\nThe LXD builder requires a modern linux kernel and the `lxd` package. This\nbuilder does not work with LXC.\n\n## Basic Example\n\nBelow is a fully functioning example.\n\n**HCL**\n\n```hcl\nsource \"lxd\" \"lxd-xenial\" {\n  image = \"ubuntu-daily:xenial\"\n  output_image = \"ubuntu-xenial\"\n  publish_properties {\n    description = \"Trivial repackage with Packer\"\n  }\n}\n\nbuild {\n  sources = [\"lxd.lxd-xenial\"]\n}\n```\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"lxd\",\n      \"name\": \"lxd-xenial\",\n      \"image\": \"ubuntu-daily:xenial\",\n      \"output_image\": \"ubuntu-xenial\",\n      \"publish_properties\": {\n        \"description\": \"Trivial repackage with Packer\"\n      }\n    }\n  ]\n}\n```\n\n## Configuration Reference\n\n### Required:\n\n<!-- Code generated from the comments of the Config struct in builder/lxd/config.go; DO NOT EDIT MANUALLY -->\n\n- `image` (string) - The source image to use when creating the build\n  container. This can be a (local or remote) image (name or fingerprint).\n  E.G. my-base-image, ubuntu-daily:x, 08fababf6f27, ...\n\n<!-- End of code generated from the comments of the Config struct in builder/lxd/config.go; -->\n\n\n  ~> Note: The builder may appear to pause if required to download a\n  remote image, as they are usually 100-200MB. `/var/log/lxd/lxd.log` will\n  mention starting such downloads.\n\n### Optional:\n\n<!-- Code generated from the comments of the Config struct in builder/lxd/config.go; DO NOT EDIT MANUALLY -->\n\n- `output_image` (string) - The name of the output artifact. Defaults to\n  name.\n\n- `container_name` (string) - Container Name\n\n- `publish_remote_name` (string) - The (optional) name of the LXD remote on which to publish the\n  container image.\n\n- `command_wrapper` (string) - Lets you prefix all builder commands, such as\n  with ssh for a remote build host. Defaults to `{{.Command}}`; i.e. no\n  wrapper.\n\n- `profile` (string) - Profile\n\n- `init_sleep` (string) - The number of seconds to sleep between launching\n  the LXD instance and provisioning it; defaults to 3 seconds.\n\n- `publish_properties` (map[string]string) - Pass key values to the publish\n  step to be set as properties on the output image. This is most helpful to\n  set the description, but can be used to set anything needed. See\n  https://stgraber.org/2016/03/30/lxd-2-0-image-management-512/\n  for more properties.\n\n- `launch_config` (map[string]string) - List of key/value pairs you wish to\n  pass to lxc launch via --config. Defaults to empty.\n\n- `virtual_machine` (bool) - Create LXD virtual-machine image on hosts running LXD 4.0 and above; defaults to false for container image\n\n- `skip_publish` (bool) - Skip execute `lxc publish`; defaults to false\n\n<!-- End of code generated from the comments of the Config struct in builder/lxd/config.go; -->\n","created_at":"2023-11-28T17:29:17.541Z","updated_at":"2023-11-28T17:29:17.541Z","name":"LXD","slug":"lxd","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]}]},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"LXD","url":"/packer/integrations/hashicorp/lxd","isCurrentPage":true}],"anchorLinks":[{"id":"installation","level":3,"title":"Installation"},{"id":"components","level":3,"title":"Components"},{"id":"builders","level":4,"title":"Builders"}],"serializedREADME":{"compiledSource":"var m=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var c=(e,n,t)=>n in e?m(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,a=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&c(e,t,n[t]);if(o)for(var t of o(n))i.call(n,t)&&c(e,t,n[t]);return e},r=(e,n)=>d(e,u(n));var l=(e,n)=>{var t={};for(var s in e)p.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&o)for(var s of o(e))n.indexOf(s)<0&&i.call(e,s)&&(t[s]=e[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:e}=s,n=l(s,[\"components\"]);return mdx(MDXLayout,r(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`The LXD plugin allows building containers for LXD, by starting an LXD container,\nrunning provisioners within this container, then saveing the container\nas an LXD image.`),mdx(\"h3\",a({},{id:\"user-content-installation\",\"data-text-content\":\"Installation\",className:\"g-type-display-4\"}),\"Installation\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To install this plugin, copy and paste this code into your Packer configuration, then run \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.packer.io/docs/commands/init\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"packer init\")),\".\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"lxd\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/hashicorp/lxd\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"~> 1\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Alternatively, you can use \",mdx(\"inlineCode\",{parentName:\"p\"},\"packer plugins install\"),\" to manage installation of this plugin.\"),mdx(\"pre\",a({},{className:\"language-sh\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-sh\"}),\"$ packer plugins install github.com/hashicorp/lxd\",`\n`)),mdx(\"h3\",a({},{id:\"user-content-components\",\"data-text-content\":\"Components\",className:\"g-type-display-4\"}),\"Components\"),mdx(\"h4\",a({},{id:\"user-content-builders\",\"data-text-content\":\"Builders\",className:\"g-type-display-5\"}),\"Builders\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",a({parentName:\"li\"},{href:\"/packer/integrations/hashicorp/lxd/latest/components/builder/lxd\"}),\"lxd\"),` - The LXD builder builds containers with LXD\nby starting a container, provisioning it, and exporting it as a tar.gz archive of the root file system.`)))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true}