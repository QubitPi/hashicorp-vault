{"pageProps":{"metadata":{"title":"LXC | Integrations","description":"The LXC plugin can be used with HashiCorp Packer to create OCI images with LXC."},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"ac0443be-7bc4-4ba8-8538-dc89d3e04e42","slug":"lxc","name":"LXC","description":"The LXC plugin can be used with HashiCorp Packer to create OCI images with LXC.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"community","repo_url":"https://github.com/hashicorp/packer-plugin-lxc","subdirectory":"/.web-docs","created_at":"2023-06-15T19:02:55.323Z","updated_at":"2023-08-08T17:01:10.920Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.0.2"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"}],"flags":[],"integration_type":null},"activeRelease":{"id":"0327272c-0894-417f-900b-d71d10881df4","integration_id":"ac0443be-7bc4-4ba8-8538-dc89d3e04e42","version":"1.0.2","readme":"The LXC plugin allows building containers for lxc. The plugin contains a single builder [lxc](/docs/builders/lxc.mdx),\nwhich starts an LXC container, runs provisioners within this container, then exports the container\nas a tar.gz of the root file system.\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    lxc = {\n      source  = \"github.com/hashicorp/lxc\"\n      version = \"~> 1\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/hashicorp/lxc\n```\n\n### Components\n\n#### Builders\n\n- [lxc](/packer/integrations/hashicorp/lxc/latest/components/builder/lxc) - The LXC builder builds containers for LXC by starting\n  a container, provisioning it, and exporting it as a tar.gz archive of the root file system.\n","created_at":"2023-06-15T20:45:24.365Z","updated_at":"2023-08-30T22:36:23.197Z","components":[{"id":"bc1aa10e-fbcd-458a-8f49-42ead93a6405","integration_release_id":"0327272c-0894-417f-900b-d71d10881df4","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `lxc`\nArtifact BuilderId: `ustream.lxc`\n\nThe `lxc` Packer builder builds containers for LXC. The builder starts an LXC\ncontainer, runs provisioners within this container, then exports the container\nas a tar.gz of the root file system.\n\nThe LXC builder requires a modern linux kernel and the `lxc` package.\nThis builder does not work with LXD.\n\n~> Note: to build Centos images on a Debian family host, you will need the\n`yum` package installed. <br />Some provisioners such as `ansible-local` get\nconfused when running in a container of a different family. E.G. it will\nattempt to use `apt-get` to install packages, when running in a Centos\ncontainer if the parent OS is Debian based.\n\n## Basic Example\n\nBelow is a fully functioning example.\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"lxc\",\n      \"name\": \"lxc-trusty\",\n      \"config_file\": \"/tmp/lxc/config\",\n      \"template_name\": \"ubuntu\",\n      \"template_environment_vars\": [\"SUITE=trusty\"]\n    },\n    {\n      \"type\": \"lxc\",\n      \"name\": \"lxc-xenial\",\n      \"config_file\": \"/tmp/lxc/config\",\n      \"template_name\": \"ubuntu\",\n      \"template_environment_vars\": [\"SUITE=xenial\"]\n    },\n    {\n      \"type\": \"lxc\",\n      \"name\": \"lxc-jessie\",\n      \"config_file\": \"/tmp/lxc/config\",\n      \"template_name\": \"debian\",\n      \"template_environment_vars\": [\"SUITE=jessie\"]\n    },\n    {\n      \"type\": \"lxc\",\n      \"name\": \"lxc-centos-7-x64\",\n      \"config_file\": \"/tmp/lxc/config\",\n      \"template_name\": \"centos\",\n      \"template_parameters\": [\"-R\", \"7\", \"-a\", \"x86_64\"]\n    }\n  ]\n}\n```\n\n## Configuration Reference\n\n### Required:\n\n- `config_file` (string) - The path to the lxc configuration file.\n\n- `template_name` (string) - The LXC template name to use.\n\n- `template_environment_vars` (array of strings) - Environmental variables to\n  use to build the template with.\n\n### Optional:\n\n- `target_runlevel` (number) - The minimum run level to wait for the\n  container to reach. Note some distributions (Ubuntu) simulate run levels\n  and may report 5 rather than 3.\n\n- `output_directory` (string) - The directory in which to save the exported\n  tar.gz. Defaults to `output-<BuildName>` in the current directory.\n\n- `container_name` (string) - The name of the LXC container. Usually stored\n  in `/var/lib/lxc/containers/<container_name>`. Defaults to\n  `packer-<BuildName>`.\n\n- `command_wrapper` (string) - Allows you to specify a wrapper command, such\n  as `ssh` so you can execute Packer builds on a remote host. Defaults to\n  Empty.\n\n- `init_timeout` (string) - The timeout in seconds to wait for the the\n  container to start. Defaults to 20 seconds.\n\n- `template_parameters` (array of strings) - Options to pass to the given\n  `lxc-template` command, usually located in\n  `/usr/share/lxc/templates/lxc-<template_name>`. Note: This gets passed as\n  ARGV to the template command. Ensure you have an array of strings, as a\n  single string with spaces probably won't work. Defaults to `[]`.\n\n- `create_options` (array of strings) - Options to pass to `lxc-create`. For\n  instance, you can specify a custom LXC container configuration file with\n  `[\"-f\", \"/path/to/lxc.conf\"]`. Defaults to `[]`. See `man 1 lxc-create` for\n  available options.\n\n- `start_options` (array of strings) - Options to pass to `lxc-start`. For\n  instance, you can override parameters from the LXC container configuration\n  file via `[\"--define\", \"KEY=VALUE\"]`. Defaults to `[]`. See\n  `man 1 lxc-start` for available options.\n\n- `attach_options` (array of strings) - Options to pass to `lxc-attach`. For\n  instance, you can prevent the container from inheriting the host machine's\n  environment by specifying `[\"--clear-env\"]`. Defaults to `[]`. See\n  `man 1 lxc-attach` for available options.\n","created_at":"2023-06-15T20:45:24.650Z","updated_at":"2023-07-26T15:20:27.911Z","name":"LXC","slug":"lxc","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]}]},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"LXC","url":"/packer/integrations/hashicorp/lxc","isCurrentPage":true}],"anchorLinks":[{"id":"installation","level":3,"title":"Installation"},{"id":"components","level":3,"title":"Components"},{"id":"builders","level":4,"title":"Builders"}],"serializedREADME":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",{\"className\":\"g-type-long-body\"},`The LXC plugin allows building containers for lxc. The plugin contains a single builder `,mdx(\"a\",{parentName:\"p\",\"href\":\"/docs/builders/lxc.mdx\"},`lxc`),`,\nwhich starts an LXC container, runs provisioners within this container, then exports the container\nas a tar.gz of the root file system.`),mdx(\"h3\",{\"id\":\"user-content-installation\",\"data-text-content\":\"Installation\",\"className\":\"g-type-display-4\"},`Installation`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`To install this plugin, copy and paste this code into your Packer configuration, then run `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.packer.io/docs/commands/init\"},mdx(\"inlineCode\",{parentName:\"a\"},`packer init`)),`.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`packer`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`required_plugins`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`lxc`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`source`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"github.com/hashicorp/lxc\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`version`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"~> 1\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Alternatively, you can use `,mdx(\"inlineCode\",{parentName:\"p\"},`packer plugins install`),` to manage installation of this plugin.`),mdx(\"pre\",{\"className\":\"language-sh\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-sh\"},`$ packer plugins install github.com/hashicorp/lxc`,`\n`)),mdx(\"h3\",{\"id\":\"user-content-components\",\"data-text-content\":\"Components\",\"className\":\"g-type-display-4\"},`Components`),mdx(\"h4\",{\"id\":\"user-content-builders\",\"data-text-content\":\"Builders\",\"className\":\"g-type-display-5\"},`Builders`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/packer/integrations/hashicorp/lxc/latest/components/builder/lxc\"},`lxc`),` - The LXC builder builds containers for LXC by starting\na container, provisioning it, and exporting it as a tar.gz archive of the root file system.`)))};MDXContent.isMDXComponent=true;","scope":{}}},"__N_SSG":true}