{"pageProps":{"metadata":{"title":"Vector | Integrations","description":"Vector is a high-performance observability data pipeline."},"product":{"name":"Nomad","slug":"nomad","algoliaConfig":{"indexName":"product_NOMAD","searchOnlyApiKey":"9bfec34ea54e56a11bd50d6bfedc5e71"},"analyticsConfig":{"includedDomains":"nomadproject.io www.nomadproject.io","segmentWriteKey":"qW11yxgipKMsKFKQUCpTVgQUYftYsJj0"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Nomad by HashiCorp","description":"Nomad is a highly available, distributed, data-center aware cluster and application scheduler designed to support the modern datacenter with support for long-running services, batch jobs, and much more.","image":"https://www.nomadproject.io/nomad-public/img/og-image.png","icon":[{"href":"/nomad-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.2.5","subnavItems":[{"text":"Overview","url":"/","type":"inbound"},{"text":"Enterprise","url":"https://www.hashicorp.com/products/nomad/","type":"outbound"},"divider",{"text":"Tutorials","url":"https://developer.hashicorp.com/nomad/tutorials","type":"outbound"},{"text":"Docs","url":"/docs","type":"inbound"},{"text":"API","url":"/api-docs","type":"inbound"},{"text":"Plugins","url":"/plugins","type":"inbound"},{"text":"Tools","url":"/tools","type":"inbound"},{"text":"Community","url":"/community","type":"inbound"}],"basePaths":["docs","api-docs","plugins","tools","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"entry-point","name":"Intro","path":"intro"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"Tools","path":"tools"},{"iconName":"plug","name":"Plugins","path":"plugins"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Nomad Integrations."}},"integration":{"id":"b4732d14-d0ba-4892-8784-3d7c22837b7a","slug":"vector","name":"Vector","description":"Vector is a high-performance observability data pipeline.","license_type":null,"license_url":null,"external_only":false,"external_url":"https://vector.dev/","tier":"community","repo_url":"https://github.com/hashicorp/nomad-pack-community-registry","subdirectory":"/packs/vector","created_at":"2023-05-17T17:28:26.489Z","updated_at":"2023-07-12T18:05:12.451Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"40557cca-56ca-4cb2-abc6-9bba2a9ca62d","slug":"nomad","name":"Nomad","created_at":"2022-11-09T22:56:29.799Z","updated_at":"2022-11-09T22:56:29.799Z"},"versions":["0.0.1"],"components":[],"flags":[],"integration_type":{"id":"e8835871-6a6a-4836-8797-505cbfbe426a","product_id":"40557cca-56ca-4cb2-abc6-9bba2a9ca62d","slug":"pack","name":"Pack","plural_name":"Packs","description":"Packs are templated sets of resources that are meant to be deployed to Nomad together. Each pack defines parameters that can be customized by the end user.","created_at":"2023-05-02T17:31:29.062Z","updated_at":"2023-05-17T22:44:11.429Z"}},"activeRelease":{"id":"93772bea-a74e-4ff5-b1a9-1b444bdb4da1","integration_id":"b4732d14-d0ba-4892-8784-3d7c22837b7a","version":"0.0.1","readme":"This pack contains a single system job that runs [Vector](https://vector.dev) across all Nomad clients. It currently supports\nbeing run by the [Docker](https://www.nomadproject.io/docs/drivers/docker) driver.\n\nThe inbuilt configuration file is configured to read from 3 sources:\n- **Docker logs:** [*(reference)*](https://vector.dev/docs/reference/configuration/sources/docker_logs/) plugs into the Docker socket to collect container logs;\n- **Host metrics:** [*(reference)*](https://vector.dev/docs/reference/configuration/sources/host_metrics/) collects host metrics, such as CPU, memory, disk, and network utilization with Vector's inbuilt collector;\n- **Nomad metrics:** [*(reference)*](https://www.nomadproject.io/docs/operations/metrics) collects exposed Nomad metrics via the Prometheus client.\n\nAdditionally, Docker logs will be sent to the specified [Loki](https://vector.dev/docs/reference/configuration/sinks/loki/) endpoint (with support for basic authentication) and host/Nomad metrics to the specified [Prometheus](https://vector.dev/docs/reference/configuration/sinks/prometheus_remote_write/) endpoint (also with support for basic authentication).\n\n## Requirements\n### Loki and Prometheus\nRunning instances of Loki and Prometheus are required and are not deployed with this pack.\n\nVector will collect:\n  - Docker logs: forwarding them to a running Loki instance;\n  - Host metrics: forwarding them to a running Prometheus instance.\n\nNomad packs for [Loki](https://github.com/hashicorp/nomad-pack-community-registry/tree/main/packs/loki) and [Prometheus](https://github.com/hashicorp/nomad-pack-community-registry/tree/main/packs/prometheus) are readily available for a self-hosted solution.\n\n[Grafana Cloud](https://grafana.com/products/cloud/), Grafana Labs' managed service, is also supported by this pack with basic authentication.\n\n### Nomad\nClients that expect to run this job require:\n- Docker volumes to be enabled within their Docker plugin stanza, due to read-only bind mounts of /proc, /sys and /var/run/docker.sock:\n```hcl\nplugin \"docker\" {\n  config {\n    volumes {\n      enabled = true\n    }\n  }\n}\n```\n- Extra Docker labels to be added within their Docker plugin stanza, in order to facilitate logs filtering:\n```hcl\nplugin \"docker\" {\n  config {\n    extra_labels = [\"job_name\", \"job_id\", \"task_group_name\", \"task_name\", \"namespace\", \"node_name\", \"node_id\"]\n  }\n}\n```\n- Telemetry to be enabled within their config stanza:\n```hcl\ntelemetry {\n  collection_interval = \"5s\"\n  disable_hostname = false\n  prometheus_metrics = true\n  publish_allocation_metrics = true\n  publish_node_metrics = true\n}\n```\n- [CNI plugins installed](https://www.nomadproject.io/docs/job-specification/network#network-modes \"CNI plugins installed\") and [its path](https://www.nomadproject.io/docs/configuration/client#cni_path \"its path\") set in the client's configuration if network mode is set to bridge.\n\n## Variables\n\n- `job_name` (string \"\") - The name to use as the job name which overrides using the pack name.\n- `datacenters` (list(string) [\"dc1\"]) - A list of datacenters in the region which are eligible for task placement.\n- `region` (string \"global\") - The region where the job should be placed.\n- `namespace` (string \"default\") - The namespace where the job should be placed.\n- `constraints` (list(object)) - Constraints to apply to the entire job.\n- `vector_group_network` (object) - The Vector network configuration options.\n- `vector_group_update` (object) - The Vector update configuration options.\n- `vector_group_ephemeral_disk` (object) - The Vector ephemeral disk configuration options.\n- `vector_task` (object) - Details configuration options for the Vector task.\n- `vector_task_bind_mounts` (object) - Details configuration options for the Vector bind mounts.\n- `vector_task_loki_prometheus` (object) - Details Loki and Prometheus endpoints/credentials for the Vector task.\n- `vector_task_data_config_toml` (string) - The Vector configuration to pass to the\ntask.\n- `vector_task_resources` (object) - The resource to assign to the Vector task.\n- `vector_task_services` (object) - Configuration options of the Vector service and checks.\n\n### `constraints` List of Objects\n\n[Nomad job constraint stanza](https://www.nomadproject.io/docs/job-specification/constraint) allows restricting the set of eligible nodes on which the Vector task will run.\n\n- `attribute` (string) - Specifies the name or reference of the attribute to examine for the\nconstraint.\n- `operator` (string) - Specifies the comparison operator. The ordering is compared lexically.\n- `value` (string) - Specifies the value to compare the attribute against using the specified\noperation.\n\nThe default value constrains the job to run on client whose kernel name is `linux`. The HCL variable list of objects is shown below and uses a double dollar sign for escaping:\n```hcl\n[\n  {\n    attribute = \"$${attr.kernel.name}\",\n    value     = \"linux\",\n    operator  = \"\",\n  }\n]\n```\n\n### `vector_group_network` Object\n\n[Nomad job network stanza](https://www.nomadproject.io/docs/job-specification/network) specifies the networking requirements for the task group, including the network mode and port allocations.\n\n- `mode` (string \"bridge\") - Mode of the network.\n- `hostname` (string \"${attr.unique.hostname}\") - Specifies the hostname assigned to the network namespace. If hostname is not specified, the container hostname will be used in the metrics.\n- `ports` (map<string|number> api:8686) - Specifies the port mapping for the Vector task. The map key indicates the port label, and the value is the Vector port inside the network namespace.\n\n### `vector_group_update` Object\n\n[Nomad job update stanza](https://www.nomadproject.io/docs/job-specification/update) specifies the networking requirements for the task group, including the network mode and port allocations.\n\n- `min_healthy_time` (string \"10s\") - The minimum time the allocation must be in the healthy state before it is marked as healthy.\n- `healthy_deadline` (string \"5m\") - The deadline in which the allocation must be marked as healthy after which the allocation is automatically transitioned to unhealthy.\n- `progress_deadline` (string \"10m\") - The deadline in which an allocation must be marked as healthy.\n- `auto_revert` (bool \"true\") - Specifies if the job should auto-revert to the last stable job on deployment failure.\n\n### `vector_group_ephemeral_disk` Object\n\n[Nomad job ephemeral disk stanza](https://www.nomadproject.io/docs/job-specification/ephemeral_disk) describes the ephemeral disk requirements of the group.\n\n- `migrate` (bool true) - Specifies that the Nomad client should make a best-effort attempt to migrate the data from a remote machine if placement cannot be made on the original node.\n- `size` (number 300) - Specifies the size of the ephemeral disk in MB.\n- `sticky` (bool true) - Specifies that Nomad should make a best-effort attempt to place the updated allocation on the same machine.\n\n### `vector_task` Object\n\n- `driver` (string \"docker\") - The Nomad task driver to use to run the Vector task. Currently, only \"docker\" is supported.\n- `version` (string \"0.17.3-alpine\") - The Vector version to run.\n\n### `vector_task_bind_mounts` Object\n\nDetails configuration options for the Vector bind mounts. Three directories are mounted into the container and there are 2 variables exposed for each bind mount: [the source and target paths](https://www.nomadproject.io/docs/drivers/docker#mount).\n\n- `source_procfs_root_path` (string \"/proc\") - The absolute path for the procfs in the host (node).\n- `source_sysfs_root_path` (string \"/sys\") - The absolute path for the sysfs in the host (node).\n- `source_docker_socket_path` (string \"/var/run/docker.sock\") - The absolute path for the Docker socket in the host (node).\n- `target_procfs_root_path` (string \"/host/proc\") - The absolute path for the procfs mount in the container's filesystem.\n- `target_sysfs_root_path` (string \"/host/sys\") - The absolute path for the sysfs mount in the container's filesystem.\n- `target_docker_socket_path` (string \"/host/var/run/docker.sock\") - The absolute path for the Docker socket mount in the container's filesystem.\n\n### `vector_task_loki_prometheus` Object\n\nDetails endpoints and credentials for the Loki and Prometheus instances that Vector will send data to.\n\n- `loki_endpoint_url` (string \"http://127.0.0.1:3100\") - Loki's endpoint URL. In case the logs are to be sent to Grafana Cloud, use the base URL. For example: ```https://logs-prod-eu-west-0.grafana.net/```.\n- `loki_username` (string \"\") - Loki's basic authentication username.\n- `loki_password` (string \"\") - Loki's basic authentication password.\n- `prometheus_endpoint_url` (string \"http://127.0.0.1:9090\") - Prometheus's remote write endpoint URL. In case the logs are to be sent to Grafana Cloud, use the remote write URL. For example: ```https://prometheus-prod-01-eu-west-0.grafana.net/api/prom/push```.\n- `prometheus_username` (string \"\") - Prometheus' basic authentication username.\n- `prometheus_password` (string \"\") - Prometheus' basic authentication password.\n\n### `vector_task_resources` Object\n\n-`cpu` (number 64) - Specifies the CPU required to run this task in MHz.\n-`memory` (number 64) - Specifies the memory required in MB.\n\n### `vector_task_services` List of Objects\n\n- `service_port_label` (string \"api\") - Specifies the port to advertise for this service.\n- `service_name` (string \"vector\") - Specifies the name this service will be advertised as in Consul.\n- `service_tags` (list(string) [\"observability\"]) - Specifies the list of tags to associate with this service.\n- `check_enabled` (bool true) - Whether to enable a check for this service.\n- `check_path` (string \"/health\") - The HTTP path to query Vector's API.\n- `check_interval` (string \"3s\") - Specifies the frequency of the health checks that Consul will perform.\n- `check_timeout` (string \"1s\") - Specifies how long Consul will wait for a health check query to succeed.\n\nThe default value for this variable configures a service for the Vector API along with a check running against the Vector API [health check endpoint](https://vector.dev/docs/reference/api/).\n```hcl\n[\n  {\n    service_port_label = \"api\",\n    service_name       = \"vector\",\n    service_tags       = [\"observability\"],\n    check_enabled      = true,\n    check_path         = \"/health\",\n    check_interval     = \"3s\",\n    check_timeout      = \"1s\",\n  }\n]\n```","created_at":"2023-05-17T22:19:20.627Z","updated_at":"2023-05-17T22:19:20.627Z","components":[]},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Nomad","url":"/nomad"},{"title":"Integrations","url":"/nomad/integrations"},{"title":"Vector","url":"/nomad/integrations/hashicorp/vector","isCurrentPage":true}],"anchorLinks":[{"id":"requirements","level":2,"title":"Requirements"},{"id":"loki-and-prometheus","level":3,"title":"Loki and Prometheus"},{"id":"nomad","level":3,"title":"Nomad"},{"id":"variables","level":2,"title":"Variables"},{"id":"constraints-list-of-objects","level":3,"title":"constraints List of Objects"},{"id":"vector_group_network-object","level":3,"title":"vector_group_network Object"},{"id":"vector_group_update-object","level":3,"title":"vector_group_update Object"},{"id":"vector_group_ephemeral_disk-object","level":3,"title":"vector_group_ephemeral_disk Object"},{"id":"vector_task-object","level":3,"title":"vector_task Object"},{"id":"vector_task_bind_mounts-object","level":3,"title":"vector_task_bind_mounts Object"},{"id":"vector_task_loki_prometheus-object","level":3,"title":"vector_task_loki_prometheus Object"},{"id":"vector_task_resources-object","level":3,"title":"vector_task_resources Object"},{"id":"vector_task_services-list-of-objects","level":3,"title":"vector_task_services List of Objects"}],"serializedREADME":{"compiledSource":"var m=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var p=(a,t,n)=>t in a?m(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,e=(a,t)=>{for(var n in t||(t={}))i.call(t,n)&&p(a,n,t[n]);if(s)for(var n of s(t))r.call(t,n)&&p(a,n,t[n]);return a},l=(a,t)=>d(a,u(t));var c=(a,t)=>{var n={};for(var o in a)i.call(a,o)&&t.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&s)for(var o of s(a))t.indexOf(o)<0&&r.call(a,o)&&(n[o]=a[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:a}=o,t=c(o,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This pack contains a single system job that runs \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vector.dev\"}),\"Vector\"),` across all Nomad clients. It currently supports\nbeing run by the `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/drivers/docker\"}),\"Docker\"),\" driver.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The inbuilt configuration file is configured to read from 3 sources:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Docker logs:\"),\" \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://vector.dev/docs/reference/configuration/sources/docker_logs/\"}),mdx(\"em\",{parentName:\"a\"},\"(reference)\")),\" plugs into the Docker socket to collect container logs;\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Host metrics:\"),\" \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://vector.dev/docs/reference/configuration/sources/host_metrics/\"}),mdx(\"em\",{parentName:\"a\"},\"(reference)\")),\" collects host metrics, such as CPU, memory, disk, and network utilization with Vector's inbuilt collector;\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Nomad metrics:\"),\" \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.nomadproject.io/docs/operations/metrics\"}),mdx(\"em\",{parentName:\"a\"},\"(reference)\")),\" collects exposed Nomad metrics via the Prometheus client.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Additionally, Docker logs will be sent to the specified \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vector.dev/docs/reference/configuration/sinks/loki/\"}),\"Loki\"),\" endpoint (with support for basic authentication) and host/Nomad metrics to the specified \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vector.dev/docs/reference/configuration/sinks/prometheus_remote_write/\"}),\"Prometheus\"),\" endpoint (also with support for basic authentication).\"),mdx(\"h2\",e({},{id:\"user-content-requirements\",\"data-text-content\":\"Requirements\",className:\"g-type-display-3\"}),\"Requirements\"),mdx(\"h3\",e({},{id:\"user-content-loki-and-prometheus\",\"data-text-content\":\"Loki and Prometheus\",className:\"g-type-display-4\"}),\"Loki and Prometheus\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Running instances of Loki and Prometheus are required and are not deployed with this pack.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Vector will collect:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Docker logs: forwarding them to a running Loki instance;\"),mdx(\"li\",{parentName:\"ul\"},\"Host metrics: forwarding them to a running Prometheus instance.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Nomad packs for \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/hashicorp/nomad-pack-community-registry/tree/main/packs/loki\"}),\"Loki\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/hashicorp/nomad-pack-community-registry/tree/main/packs/prometheus\"}),\"Prometheus\"),\" are readily available for a self-hosted solution.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"https://grafana.com/products/cloud/\"}),\"Grafana Cloud\"),\", Grafana Labs' managed service, is also supported by this pack with basic authentication.\"),mdx(\"h3\",e({},{id:\"user-content-nomad\",\"data-text-content\":\"Nomad\",className:\"g-type-display-4\"}),\"Nomad\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Clients that expect to run this job require:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Docker volumes to be enabled within their Docker plugin stanza, due to read-only bind mounts of /proc, /sys and /var/run/docker.sock:\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"plugin \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"config\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"volumes\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"enabled\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Extra Docker labels to be added within their Docker plugin stanza, in order to facilitate logs filtering:\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"plugin \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"config\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"extra_labels\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"job_name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"job_id\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"task_group_name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"task_name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"namespace\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"node_name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"node_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Telemetry to be enabled within their config stanza:\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"telemetry\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"collection_interval\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"5s\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"disable_hostname\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"prometheus_metrics\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"publish_allocation_metrics\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"publish_node_metrics\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.nomadproject.io/docs/job-specification/network#network-modes\",title:\"CNI plugins installed\"}),\"CNI plugins installed\"),\" and \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.nomadproject.io/docs/configuration/client#cni_path\",title:\"its path\"}),\"its path\"),\" set in the client's configuration if network mode is set to bridge.\")),mdx(\"h2\",e({},{id:\"user-content-variables\",\"data-text-content\":\"Variables\",className:\"g-type-display-3\"}),\"Variables\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"job_name\"),' (string \"\") - The name to use as the job name which overrides using the pack name.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"datacenters\"),\" (list(string) \",'[\"dc1\"]',\") - A list of datacenters in the region which are eligible for task placement.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"region\"),' (string \"global\") - The region where the job should be placed.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"namespace\"),' (string \"default\") - The namespace where the job should be placed.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"constraints\"),\" (list(object)) - Constraints to apply to the entire job.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_group_network\"),\" (object) - The Vector network configuration options.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_group_update\"),\" (object) - The Vector update configuration options.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_group_ephemeral_disk\"),\" (object) - The Vector ephemeral disk configuration options.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task\"),\" (object) - Details configuration options for the Vector task.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task_bind_mounts\"),\" (object) - Details configuration options for the Vector bind mounts.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task_loki_prometheus\"),\" (object) - Details Loki and Prometheus endpoints/credentials for the Vector task.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task_data_config_toml\"),` (string) - The Vector configuration to pass to the\ntask.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task_resources\"),\" (object) - The resource to assign to the Vector task.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"vector_task_services\"),\" (object) - Configuration options of the Vector service and checks.\")),mdx(\"h3\",e({},{id:\"user-content-constraints-list-of-objects\",\"data-text-content\":\"constraints List of Objects\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"constraints\"),\" List of Objects\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/job-specification/constraint\"}),\"Nomad job constraint stanza\"),\" allows restricting the set of eligible nodes on which the Vector task will run.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"attribute\"),` (string) - Specifies the name or reference of the attribute to examine for the\nconstraint.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"operator\"),\" (string) - Specifies the comparison operator. The ordering is compared lexically.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"value\"),` (string) - Specifies the value to compare the attribute against using the specified\noperation.`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The default value constrains the job to run on client whose kernel name is \",mdx(\"inlineCode\",{parentName:\"p\"},\"linux\"),\". The HCL variable list of objects is shown below and uses a double dollar sign for escaping:\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"attribute\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"$${attr.kernel.name}\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"value\"),\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"linux\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"operator\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`)),mdx(\"h3\",e({},{id:\"user-content-vector_group_network-object\",\"data-text-content\":\"vector_group_network Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_group_network\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/job-specification/network\"}),\"Nomad job network stanza\"),\" specifies the networking requirements for the task group, including the network mode and port allocations.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"mode\"),' (string \"bridge\") - Mode of the network.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"hostname\"),' (string \"${attr.unique.hostname}\") - Specifies the hostname assigned to the network namespace. If hostname is not specified, the container hostname will be used in the metrics.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"ports\"),\" (map<string|number> api:8686) - Specifies the port mapping for the Vector task. The map key indicates the port label, and the value is the Vector port inside the network namespace.\")),mdx(\"h3\",e({},{id:\"user-content-vector_group_update-object\",\"data-text-content\":\"vector_group_update Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_group_update\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/job-specification/update\"}),\"Nomad job update stanza\"),\" specifies the networking requirements for the task group, including the network mode and port allocations.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"min_healthy_time\"),' (string \"10s\") - The minimum time the allocation must be in the healthy state before it is marked as healthy.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"healthy_deadline\"),' (string \"5m\") - The deadline in which the allocation must be marked as healthy after which the allocation is automatically transitioned to unhealthy.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"progress_deadline\"),' (string \"10m\") - The deadline in which an allocation must be marked as healthy.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"auto_revert\"),' (bool \"true\") - Specifies if the job should auto-revert to the last stable job on deployment failure.')),mdx(\"h3\",e({},{id:\"user-content-vector_group_ephemeral_disk-object\",\"data-text-content\":\"vector_group_ephemeral_disk Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_group_ephemeral_disk\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/job-specification/ephemeral_disk\"}),\"Nomad job ephemeral disk stanza\"),\" describes the ephemeral disk requirements of the group.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"migrate\"),\" (bool true) - Specifies that the Nomad client should make a best-effort attempt to migrate the data from a remote machine if placement cannot be made on the original node.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"size\"),\" (number 300) - Specifies the size of the ephemeral disk in MB.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"sticky\"),\" (bool true) - Specifies that Nomad should make a best-effort attempt to place the updated allocation on the same machine.\")),mdx(\"h3\",e({},{id:\"user-content-vector_task-object\",\"data-text-content\":\"vector_task Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_task\"),\" Object\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"driver\"),' (string \"docker\") - The Nomad task driver to use to run the Vector task. Currently, only \"docker\" is supported.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"version\"),' (string \"0.17.3-alpine\") - The Vector version to run.')),mdx(\"h3\",e({},{id:\"user-content-vector_task_bind_mounts-object\",\"data-text-content\":\"vector_task_bind_mounts Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_task_bind_mounts\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Details configuration options for the Vector bind mounts. Three directories are mounted into the container and there are 2 variables exposed for each bind mount: \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.nomadproject.io/docs/drivers/docker#mount\"}),\"the source and target paths\"),\".\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"source_procfs_root_path\"),' (string \"/proc\") - The absolute path for the procfs in the host (node).'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"source_sysfs_root_path\"),' (string \"/sys\") - The absolute path for the sysfs in the host (node).'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"source_docker_socket_path\"),' (string \"/var/run/docker.sock\") - The absolute path for the Docker socket in the host (node).'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"target_procfs_root_path\"),` (string \"/host/proc\") - The absolute path for the procfs mount in the container's filesystem.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"target_sysfs_root_path\"),` (string \"/host/sys\") - The absolute path for the sysfs mount in the container's filesystem.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"target_docker_socket_path\"),` (string \"/host/var/run/docker.sock\") - The absolute path for the Docker socket mount in the container's filesystem.`)),mdx(\"h3\",e({},{id:\"user-content-vector_task_loki_prometheus-object\",\"data-text-content\":\"vector_task_loki_prometheus Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_task_loki_prometheus\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Details endpoints and credentials for the Loki and Prometheus instances that Vector will send data to.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"loki_endpoint_url\"),' (string \"',mdx(\"a\",e({parentName:\"li\"},{href:\"http://127.0.0.1:3100%22\"}),'http://127.0.0.1:3100\"'),\") - Loki's endpoint URL. In case the logs are to be sent to Grafana Cloud, use the base URL. For example: \",mdx(\"inlineCode\",{parentName:\"li\"},\"https://logs-prod-eu-west-0.grafana.net/\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"loki_username\"),` (string \"\") - Loki's basic authentication username.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"loki_password\"),` (string \"\") - Loki's basic authentication password.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"prometheus_endpoint_url\"),' (string \"',mdx(\"a\",e({parentName:\"li\"},{href:\"http://127.0.0.1:9090%22\"}),'http://127.0.0.1:9090\"'),\") - Prometheus's remote write endpoint URL. In case the logs are to be sent to Grafana Cloud, use the remote write URL. For example: \",mdx(\"inlineCode\",{parentName:\"li\"},\"https://prometheus-prod-01-eu-west-0.grafana.net/api/prom/push\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"prometheus_username\"),` (string \"\") - Prometheus' basic authentication username.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"prometheus_password\"),` (string \"\") - Prometheus' basic authentication password.`)),mdx(\"h3\",e({},{id:\"user-content-vector_task_resources-object\",\"data-text-content\":\"vector_task_resources Object\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_task_resources\"),\" Object\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"-\",mdx(\"inlineCode\",{parentName:\"p\"},\"cpu\"),` (number 64) - Specifies the CPU required to run this task in MHz.\n-`,mdx(\"inlineCode\",{parentName:\"p\"},\"memory\"),\" (number 64) - Specifies the memory required in MB.\"),mdx(\"h3\",e({},{id:\"user-content-vector_task_services-list-of-objects\",\"data-text-content\":\"vector_task_services List of Objects\",className:\"g-type-display-4\"}),mdx(\"inlineCode\",{parentName:\"h3\"},\"vector_task_services\"),\" List of Objects\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"service_port_label\"),' (string \"api\") - Specifies the port to advertise for this service.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"service_name\"),' (string \"vector\") - Specifies the name this service will be advertised as in Consul.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"service_tags\"),\" (list(string) \",'[\"observability\"]',\") - Specifies the list of tags to associate with this service.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"check_enabled\"),\" (bool true) - Whether to enable a check for this service.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"check_path\"),` (string \"/health\") - The HTTP path to query Vector's API.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"check_interval\"),' (string \"3s\") - Specifies the frequency of the health checks that Consul will perform.'),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"check_timeout\"),' (string \"1s\") - Specifies how long Consul will wait for a health check query to succeed.')),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The default value for this variable configures a service for the Vector API along with a check running against the Vector API \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://vector.dev/docs/reference/api/\"}),\"health check endpoint\"),\".\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"service_port_label\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"api\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"service_name\"),\"       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"vector\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"service_tags\"),\"       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"observability\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"check_enabled\"),\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"check_path\"),\"         \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"/health\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"check_interval\"),\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"3s\"'),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"check_timeout\"),\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"1s\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true}