{"pageProps":{"metadata":{"title":"Docker Builder | Integrations"},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"71558389-27de-4318-a844-88d5fcf3c5e2","slug":"docker","name":"Docker","description":"The docker plugin can be used with HashiCorp Packer to manage containers with Docker.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"official","repo_url":"https://github.com/hashicorp/packer-plugin-docker","subdirectory":"/.web-docs","created_at":"2023-06-15T19:02:45.745Z","updated_at":"2023-08-08T17:01:05.785Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.0.9","1.0.8"],"components":[{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"}],"flags":[{"id":"3709e036-b45f-4be8-9043-f7c8cc2af00f","slug":"hcp-ready","name":"HCP Ready","description":"This integration has been tested to work with HashiCorp Cloud Platform (HCP)","created_at":"2022-11-09T22:56:30.673Z","updated_at":"2022-11-09T22:56:30.673Z"}],"integration_type":null},"activeRelease":{"id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","integration_id":"71558389-27de-4318-a844-88d5fcf3c5e2","version":"1.0.9","readme":"The Docker plugin is intended to be used for managing docker images through Packer.\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    docker = {\n      source  = \"github.com/hashicorp/docker\"\n      version = \"~> 1\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/hashicorp/docker\n```\n\n### Components\n\n#### Builders\n\n- [docker](/packer/integrations/hashicorp/docker/latest/components/builder/docker) - The builder builds Docker images using Docker.\n  The builder starts a Docker container, runs provisioners within this container, then exports the container for reuse or commits the image.\n\n#### Post-Processors\n\n- [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) - The import post-processor\n  takes an artifact from the docker builder and imports it with Docker locally.\n\n- [docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) - The push post-processor takes\n  an artifact from the docker-import post-processor and pushes it to a Docker registry.\n\n- [docker-save](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-save) - The save post-processor takes\n  an artifact from the docker builder that was committed and saves it to a file.\n\n- [docker-tag](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-tag) - The tag post-processor takes an\n  artifact from the docker builder that was committed and tags it into a repository.\n","created_at":"2023-12-22T15:48:27.328Z","updated_at":"2023-12-22T15:48:27.328Z","components":[{"id":"2a965084-8b1d-4e1f-abdc-2c61cd80bbbd","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-save`\n\nThe Packer Docker Save post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) that was committed and saves it to a file.\nThis is similar to exporting the Docker image directly from the builder, except\nthat it preserves the hierarchy of images and metadata.\n\nWe understand the terminology can be a bit confusing, but we've adopted the\nterminology from Docker, so if you're familiar with that, then you'll be\nfamiliar with this and vice versa.\n\n## Configuration\n\n### Required\n\nThe configuration for this post-processor only requires one option.\n\n- `path` (string) - The path to save the image.\n\n### Optional\n\n- `keep_input_artifact` (boolean) - if true, do not delete the docker\n  container, and only save the .tar created by docker save. Defaults to true.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-save\",\n  \"path\": \"foo.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-save\" {\n  path = \"foo.tar\"\n}\n```\n","created_at":"2023-12-22T15:48:28.524Z","updated_at":"2023-12-22T15:48:28.524Z","name":"Docker Save","slug":"docker-save","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"3e58e509-b40b-41b5-920d-cc7c3fa097b4","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `docker`\n\nThe `docker` Packer builder builds [Docker](https://www.docker.io) images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.\n\nPacker builds Docker containers _without_ the use of\n[Dockerfiles](https://docs.docker.com/engine/reference/builder/). By not using\n`Dockerfiles`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on [Dockerfiles](#dockerfiles).\n\nThe Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and _does not\nsupport running on a Docker remote host_. You can learn about what [platforms\nDocker supports and how to install onto\nthem](https://docs.docker.com/engine/installation/) in the Docker\ndocumentation.\n\n## Basic Example: Export\n\nBelow is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  export_path = \"image.tar\"\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Basic Example: Commit\n\nBelow is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Basic Example: Changes to Metadata\n\nBelow is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `docker commit --change` command\nline [option to\nDocker](https://docs.docker.com/engine/reference/commandline/commit/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"commit\": true,\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu\"\n    commit = true\n      changes = [\n      \"USER www-data\",\n      \"WORKDIR /var/www\",\n      \"ENV HOSTNAME www.example.com\",\n      \"VOLUME /test1 /test2\",\n      \"EXPOSE 80 443\",\n      \"LABEL version=1.0\",\n      \"ONBUILD RUN date\",\n      \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n      \"ENTRYPOINT /var/www/start.sh\"\n    ]\n}\n```\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"` corresponds to Docker exec form\n  - EX: `\"CMD nginx -g daemon off;\"` corresponds to Docker shell form, invokes a command shell first\n- ENTRYPOINT\n  - String, supports both array (escaped) and string form\n  - EX: `\"ENTRYPOINT [\\\"/bin/sh\\\", \\\"-c\\\", \\\"/var/www/start.sh\\\"]\"` corresponds to Docker exec form\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"` corresponds to Docker shell form, invokes a command shell first\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nThe Docker builder uses a special Docker communicator _and will not use_ the\nstandard [communicators](/packer/docs/templates/legacy_json_templates/communicators).\n\n### Required:\n\nYou must specify (only) one of `commit`, `discard`, or `export_path`.\n\n- `commit` (bool) - If true, the container will be committed to an image rather than exported.\n\n- `discard` (bool) - Throw away the container when the build is complete. This is useful for\n  the [artifice\n  post-processor](/packer/docs/post-processor/artifice).\n\n- `export_path` (string) - The path where the final container will be exported as a tar file.\n\n- `image` (string) - The base image for the Docker container that will be started. This image\n  will be pulled from the Docker registry if it doesn't already exist.\n\n- `message` (string) - Set a message for the commit.\n\n### Optional:\n\n- `aws_access_key` (string) - The AWS access key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials) \n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the AWS_SESSION_TOKEN\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to\n  communicate with AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `author` (string) - Set the author (e-mail) of a commit.\n\n- `changes` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\n  are CMD, ENTRYPOINT, ENV, and EXPOSE. Example: [ \"USER ubuntu\", \"WORKDIR\n  /app\", \"EXPOSE 8080\" ]\n\n- `container_dir` (string) - The directory inside container to mount temp directory from host server\n  for work [file provisioner](/packer/docs/provisioner/file). This defaults\n  to c:/packer-files on windows and /packer-files on other systems.\n\n- `device` ([]string) - An array of devices which will be accessible in container when it's run\n  without `--privileged` flag.\n\n- `cap_add` ([]string) - An array of additional [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to grant to the container.\n\n- `cap_drop` ([]string) - An array of [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to drop from the container.\n\n- `exec_user` (string) - Username (UID) to run remote commands with. You can also set the group\n  name/ID if you want: (UID or UID:GID). You may need this if you get\n  permission errors trying to run the shell or other provisioners.\n\n- `privileged` (bool) - If true, run the docker container with the `--privileged` flag. This\n  defaults to false if not set.\n\n- `pull` (bool) - If true, the configured image will be pulled using `docker pull` prior\n  to use. Otherwise, it is assumed the image already exists and can be\n  used. This defaults to true if not set.\n\n- `run_command` ([]string) - An array of arguments to pass to docker run in order to run the\n  container. By default this is set to `[\"-d\", \"-i\", \"-t\",\n  \"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]` if you are using a linux\n  container, and `[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n  \"{{.Image}}\"]` if you are running a windows container. `{{.Image}}` is a\n  template variable that corresponds to the image template option. Passing\n  the entrypoint option this way will make it the default entrypoint of\n  the resulting image, so running docker run -it --rm  will start the\n  docker image from the /bin/sh shell interpreter; you could run a script\n  or another shell by running docker run -it --rm  -c /bin/bash. If your\n  docker image embeds a binary intended to be run often, you should\n  consider changing the default entrypoint to point to it.\n\n- `tmpfs` ([]string) - An array of additional tmpfs volumes to mount into this container.\n\n- `volumes` (map[string]string) - A mapping of additional volumes to mount into this container. The key of\n  the object is the host path, the value is the container path.\n\n- `fix_upload_owner` (bool) - If true, files uploaded to the container will be owned by the user the\n  container is running as. If false, the owner will depend on the version\n  of docker installed in the system. Defaults to true.\n\n- `windows_container` (bool) - If \"true\", tells Packer that you are building a Windows container\n  running on a windows host. This is necessary for building Windows\n  containers, because our normal docker bindings do not work for them.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n- `login` (bool) - This is used to login to dockerhub to pull a private base container. For\n  pushing to dockerhub, see the docker post-processors\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `ecr_login` (bool) - Defaults to false. If true, the builder will login in order to pull the\n  image from Amazon EC2 Container Registry (ECR). The builder only logs in\n  for the duration of the pull. If true login_server is required and\n  login, login_username, and login_password will be ignored. For more\n  information see the section on ECR.\n\n## Build Shared Information Variables\n\nThis build shares generated data with provisioners and post-processors via [template engines](/packer/docs/templates/legacy_json_templates/engine)\nfor JSON and [contextual variables](/packer/docs/templates/hcl_templates/contextual-variables) for HCL2.\n\nThe generated variable available for this builder is:\n\n- `ImageSha256` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\n  this variable is only available for post-processors.\n\n## Using the Artifact: Export\n\nOnce the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) and\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processors.\n\n**Note:** This section is covering how to use an artifact that has been\n_exported_. More specifically, if you set `export_path` in your configuration.\nIf you set `commit`, see the next section.\n\nThe example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n[Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more information):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-import\",\n        \"repository\": \"myrepo/myimage\",\n        \"tag\": \"0.7\"\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-import\" {\n        repository =  \"myrepo/myimage\"\n        tag = \"0.7\"\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-import`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `docker-push` post-processor which\nhandles pushing the image to a container repository.\n\nIf you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:\n\n```shell-session\n$ docker import - registry.mydomain.com/mycontainer:latest < artifact.tar\n```\n\nYou can then add additional tags and push the image as usual with `docker tag`\nand `docker push`, respectively.\n\n## Using the Artifact: Committed\n\nIf you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see [Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more\ninformation):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-tag` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`docker-push` post-processor which handles pushing the image to a container\nrepository.\n\nGoing a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage1\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ],\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage2\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage1\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage2\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n<span id=\"amazon-ec2-container-registry\"></span>\n\n## Docker For Windows\n\nYou should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `docker cp`.\n\nIf you are building a Windows container, you must set the template option\n`\"windows_container\": true`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.\n\nThe following is a fully functional template for building a Windows\ncontainer.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"microsoft/windowsservercore:1709\",\n      \"container_dir\": \"c:/app\",\n      \"windows_container\": true,\n      \"commit\": true\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"windows\" {\n    image = \"microsoft/windowsservercore:1709\"\n    container_dir = \"c:/app\"\n    windows_container = true\n    commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Amazon EC2 Container Registry\n\nPacker can tag and push images for use in [Amazon EC2 Container\nRegistry](https://aws.amazon.com/ecr/). The post processors work as described\nabove and example configuration properties are shown below:\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\",\n        \"ecr_login\": true,\n        \"aws_access_key\": \"YOUR KEY HERE\",\n        \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n        \"login_server\": \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\npost-processors {\n  post-processor \"docker-tag\" {\n    repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n    tags       = [\"latest\"]\n  }\n\n  post-processor \"docker-push\" {\n    ecr_login = true\n    aws_access_key = \"YOUR KEY HERE\"\n    aws_secret_key = \"YOUR SECRET KEY HERE\"\n    login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n  }\n}\n```\n\n## Amazon ECR Public Gallery\n\nPacker can tag and push images for use in [Amazon ECR Public\nGallery](https://gallery.ecr.aws/). The post processors work as described above\nand example configuration properties are shown below:\n\n**JSON**\n\n```json\n    {\n        \"post-processors\": [\n            [\n                {\n                    \"type\": \"docker-tag\",\n                    \"repository\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\",\n                    \"tags\": [\"latest\"]\n                },\n                {\n                    \"type\": \"docker-push\",\n                    \"ecr_login\": true,\n                    \"aws_access_key\": \"YOUR KEY HERE\",\n                    \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n                    \"login_server\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n                }\n            ]\n        ]\n    }\n```\n\n**HCL2**\n\n```hcl\n    post-processors {\n        post-processor \"docker-tag\" {\n            repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n            tags       = [\"latest\"]\n        }\n\n        post-processor \"docker-push\" {\n            \"ecr_login\": true,\n            \"aws_access_key\": \"YOUR KEY HERE\",\n            \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n            login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n        }\n    }\n```\n\n[Learn how to set Amazon AWS credentials.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n## Dockerfiles\n\nThis builder allows you to build Docker images _without_ Dockerfiles.\n\nWith this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.\n\nWhile Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.\n\n## Overriding the host directory\n\nBy default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `PACKER_TMP_DIR`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.\n","created_at":"2023-12-22T15:48:28.087Z","updated_at":"2023-12-22T15:48:28.087Z","name":"Docker","slug":"docker","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},{"id":"b72f3b4f-655f-41d3-bc1f-6cdd39cd53ba","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-import`\n\nThe Packer Docker import post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) and imports it with Docker locally. This\nallows you to apply a repository and tag to the image and lets you use the\nother Docker post-processors such as\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) to push the image to a\nregistry.\n\n## Basic Example\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"ubuntu:18.04\",\n      \"export_path\": \"party_parrot.tar\"\n    }\n  ],\n  \"post-processors\": [\n    {\n      \"type\": \"docker-import\",\n      \"repository\": \"local/ubuntu\",\n      \"tag\": \"latest\"\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu:18.04\"\n    export_path = \"party_parrot.tar\"\n}\n\nbuild {\n  sources = [\n    \"source.docker.example\"\n  ]\n\n  post-processor \"docker-import\" {\n    repository = \"local/ubuntu\"\n    tag = \"latest\"\n  }\n}\n```\n\n## Configuration\n\nThe configuration for this post-processor only requires a `repository`, a `tag`\nis optional.\n\n### Required:\n\n- `repository` (string) - The repository of the imported image.\n\n### Optional:\n\n- `tag` (string) - The tag for the imported image. By default this is not\n  set.\n\n- `changes` (array of strings) - Dockerfile instructions to add to the\n  commit. Example of instructions are `CMD`, `ENTRYPOINT`, `ENV`, and\n  `EXPOSE`. Example: `[ \"USER ubuntu\", \"WORKDIR /app\", \"EXPOSE 8080\" ]`\n\n- `keep_input_artifact` (boolean) - if true, do not delete the source tar\n  after importing it to docker. Defaults to false.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-import\",\n  \"repository\": \"hashicorp/packer\",\n  \"tag\": \"0.7\"\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-import\" {\n  repository = \"hashicorp/packer\"\n  tag = \"0.7\"\n}\n```\n\n\nThis example would take the image created by the Docker builder and import it\ninto the local Docker process with a name of `hashicorp/packer:0.7`.\n\nFollowing this, you can use the\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processor to push it\nto a registry, if you want.\n\n## Changing Metadata\n\nBelow is an example using the changes argument of the post-processor. This\nfeature allows the tarball metadata to be changed when imported into the Docker\nenvironment. It is derived from the `docker import --change` command line\n[option to\nDocker](https://docs.docker.com/engine/reference/commandline/import/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**JSON**\n\n```hcl\npost-processor \"docker-import\" {\n  repository = \"local/centos6\"\n  tag = \"latest\"\n  changes = [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\",\n  ]\n}\n```\n\n**HCL2**\n\n```json\n{\n  \"type\": \"docker-import\",\n  \"repository\": \"local/centos6\",\n  \"tag\": \"latest\",\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"`\n  - EX: `\"CMD nginx -g daemon off;\"`\n- ENTRYPOINT\n  - String\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"`\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n","created_at":"2023-12-22T15:48:28.341Z","updated_at":"2023-12-22T15:48:28.341Z","name":"Docker Import","slug":"docker-import","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"345e5202-052f-4c2e-a77d-894b937fcf3a","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-tag`\n\nThe Packer Docker Tag post-processor takes an artifact from the [docker\nbuilder](/packer/integrations/hashicorp/docker) that was committed and tags it into a\nrepository. This allows you to use the other Docker post-processors such as\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) to push the image to a\nregistry.\n\nThis is very similar to the\n[docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) post-processor except\nthat this works with committed resources, rather than exported.\n\n## Configuration\n\nThe configuration for this post-processor requires `repository`, all other\nsettings are optional.\n\n- `repository` (string) - The repository of the image.\n\n- `tags` (array of strings) - A list of tags for the image. By default this is\n  not set. Example of declaration: `\"tags\": [\"mytag-1\", \"mytag-2\"]`\n\n- `force` (boolean) - If true, this post-processor forcibly tag the image\n  even if tag name is collided. Default to `false`. But it will be ignored if\n  Docker &gt;= 1.12.0 was detected, since the `force` option was removed\n  after 1.12.0.\n  [reference](https://docs.docker.com/engine/deprecated/#/f-flag-on-docker-tag)\n\n- `keep_input_artifact` (boolean) - Unlike most other post-processors, the\n  keep_input_artifact option will have no effect for the docker-tag\n  post-processor. We will always retain the input artifact for docker-tag,\n  since deleting the image we just tagged is not a behavior anyone should ever\n  expect. `keep_input_artifact will` therefore always be evaluated as true,\n  regardless of the value you enter into this field.\n\n## Example\n\nAn example is shown below, showing only the post-processor configuration:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker-tag\",\n  \"repository\": \"hashicorp/packer\",\n  \"tags\": [\"0.7\", \"anothertag\"]\n}\n```\n\n**HCL2**\n\n```hcl\npost-processor \"docker-tag\" {\n  repository = \"hashicorp/packer\"\n  tags = [\"0.7\", \"anothertag\"]\n}\n```\n\nThis example would take the image created by the Docker builder and tag it into\nthe local Docker process with a name of `hashicorp/packer:0.7`.\n\nFollowing this, you can use the\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processor to push it\nto a registry, if you want.\n","created_at":"2023-12-22T15:48:28.727Z","updated_at":"2023-12-22T15:48:28.727Z","name":"Docker Tag","slug":"docker-tag","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"dd03a91b-b970-4d8c-b982-ea63e1e1c427","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `docker-push`\n\nThe Packer Docker push post-processor takes an artifact from the\n[docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) post-processor and\npushes it to a Docker registry.\n\n## Configuration\n\nThis post-processor has only optional configuration:\n\n- `aws_access_key` (string) - The AWS access key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the `AWS_SESSION_TOKEN`\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to\n  communicate with AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `ecr_login` (boolean) - Defaults to false. If true, the post-processor will\n  login in order to push the image to [Amazon EC2 Container Registry\n  (ECR)](https://aws.amazon.com/ecr/). The post-processor only logs in for\n  the duration of the push. If true `login_server` is required and `login`,\n  `login_username`, and `login_password` will be ignored.\n\n- `aws_force_use_public_ecr` (boolean) - Defaults to false. If true, the\npost-processor will try to force push the image to ECR Public Gallery. However,\nthis flag is optional if you specify the correct ECR Public URL in the\n`login_server`, the post-processor will automatically detect it as ECR Public.\n\n- `keep_input_artifact` (boolean) - if true, do not delete the docker image\n  after pushing it to the cloud. Defaults to true, but can be set to false if\n  you do not need to save your local copy of the docker container.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n- `login` (boolean) - Defaults to false. If true, the post-processor will\n  login prior to pushing. For log into ECR see `ecr_login`.\n  Note that a corresponding `logout` will be performed right after the push.\n  This may conflict with other parallel post-processor instances that also\n  perform login/logout (e.g. if you're building and pushing several images\n  in parallel).\n  In that case, it's better to keep `login` set to `false` and have\n  the `docker login` and `docker logout` performed out of band, separately\n  from Packer.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n-> **Note:** When using _Docker Hub_ or _Quay_ registry servers, `login`\nmust to be set to `true` and `login_username`, **and** `login_password` must to\nbe set to your registry credentials. When using Docker Hub, `login_server` can\nbe omitted.\n\n-> **Note:** If you login using the credentials above, the post-processor\nwill automatically log you out afterwards (just the server specified).\n\n## Example\n\nFor an example of using docker-push, see the section on using generated\nartifacts from the [docker builder](/packer/integrations/hashicorp/docker).\n","created_at":"2023-12-22T15:48:28.932Z","updated_at":"2023-12-22T15:48:28.932Z","name":"Docker Push","slug":"docker-push","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]}]},"component":{"id":"3e58e509-b40b-41b5-920d-cc7c3fa097b4","integration_release_id":"78a578de-7f7f-42cb-a3f1-ddbdf3091ce9","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `docker`\n\nThe `docker` Packer builder builds [Docker](https://www.docker.io) images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.\n\nPacker builds Docker containers _without_ the use of\n[Dockerfiles](https://docs.docker.com/engine/reference/builder/). By not using\n`Dockerfiles`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on [Dockerfiles](#dockerfiles).\n\nThe Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and _does not\nsupport running on a Docker remote host_. You can learn about what [platforms\nDocker supports and how to install onto\nthem](https://docs.docker.com/engine/installation/) in the Docker\ndocumentation.\n\n## Basic Example: Export\n\nBelow is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  export_path = \"image.tar\"\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Basic Example: Commit\n\nBelow is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"export_path\": \"image.tar\"\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n  image = \"ubuntu\"\n  commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Basic Example: Changes to Metadata\n\nBelow is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `docker commit --change` command\nline [option to\nDocker](https://docs.docker.com/engine/reference/commandline/commit/).\n\nExample uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:\n\n**JSON**\n\n```json\n{\n  \"type\": \"docker\",\n  \"image\": \"ubuntu\",\n  \"commit\": true,\n  \"changes\": [\n    \"USER www-data\",\n    \"WORKDIR /var/www\",\n    \"ENV HOSTNAME www.example.com\",\n    \"VOLUME /test1 /test2\",\n    \"EXPOSE 80 443\",\n    \"LABEL version=1.0\",\n    \"ONBUILD RUN date\",\n    \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n    \"ENTRYPOINT /var/www/start.sh\"\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"example\" {\n    image = \"ubuntu\"\n    commit = true\n      changes = [\n      \"USER www-data\",\n      \"WORKDIR /var/www\",\n      \"ENV HOSTNAME www.example.com\",\n      \"VOLUME /test1 /test2\",\n      \"EXPOSE 80 443\",\n      \"LABEL version=1.0\",\n      \"ONBUILD RUN date\",\n      \"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\",\n      \"ENTRYPOINT /var/www/start.sh\"\n    ]\n}\n```\n\nAllowed metadata fields that can be changed are:\n\n- CMD\n  - String, supports both array (escaped) and string form\n  - EX: `\"CMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\"` corresponds to Docker exec form\n  - EX: `\"CMD nginx -g daemon off;\"` corresponds to Docker shell form, invokes a command shell first\n- ENTRYPOINT\n  - String, supports both array (escaped) and string form\n  - EX: `\"ENTRYPOINT [\\\"/bin/sh\\\", \\\"-c\\\", \\\"/var/www/start.sh\\\"]\"` corresponds to Docker exec form\n  - EX: `\"ENTRYPOINT /var/www/start.sh\"` corresponds to Docker shell form, invokes a command shell first\n- ENV\n  - String, note there is no equal sign:\n  - EX: `\"ENV HOSTNAME www.example.com\"` not\n    `\"ENV HOSTNAME=www.example.com\"`\n- EXPOSE\n  - String, space separated ports\n  - EX: `\"EXPOSE 80 443\"`\n- LABEL\n  - String, space separated key=value pairs\n  - EX: `\"LABEL version=1.0\"`\n- ONBUILD\n  - String\n  - EX: `\"ONBUILD RUN date\"`\n- MAINTAINER\n  - String, deprecated in Docker version 1.13.0\n  - EX: `\"MAINTAINER NAME\"`\n- USER\n  - String\n  - EX: `\"USER USERNAME\"`\n- VOLUME\n  - String\n  - EX: `\"VOLUME FROM TO\"`\n- WORKDIR\n  - String\n  - EX: `\"WORKDIR PATH\"`\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nThe Docker builder uses a special Docker communicator _and will not use_ the\nstandard [communicators](/packer/docs/templates/legacy_json_templates/communicators).\n\n### Required:\n\nYou must specify (only) one of `commit`, `discard`, or `export_path`.\n\n- `commit` (bool) - If true, the container will be committed to an image rather than exported.\n\n- `discard` (bool) - Throw away the container when the build is complete. This is useful for\n  the [artifice\n  post-processor](/packer/docs/post-processor/artifice).\n\n- `export_path` (string) - The path where the final container will be exported as a tar file.\n\n- `image` (string) - The base image for the Docker container that will be started. This image\n  will be pulled from the Docker registry if it doesn't already exist.\n\n- `message` (string) - Set a message for the commit.\n\n### Optional:\n\n- `aws_access_key` (string) - The AWS access key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials) \n\n- `aws_secret_key` (string) - The AWS secret key used to communicate with\n  AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `aws_token` (string) - The AWS access token to use. This is different from\n  the access key and secret key. If you're not sure what this is, then you\n  probably don't need it. This will also be read from the AWS_SESSION_TOKEN\n  environmental variable.\n\n- `aws_profile` (string) - The AWS shared credentials profile used to\n  communicate with AWS. [Learn how to set this.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n- `author` (string) - Set the author (e-mail) of a commit.\n\n- `changes` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\n  are CMD, ENTRYPOINT, ENV, and EXPOSE. Example: [ \"USER ubuntu\", \"WORKDIR\n  /app\", \"EXPOSE 8080\" ]\n\n- `container_dir` (string) - The directory inside container to mount temp directory from host server\n  for work [file provisioner](/packer/docs/provisioner/file). This defaults\n  to c:/packer-files on windows and /packer-files on other systems.\n\n- `device` ([]string) - An array of devices which will be accessible in container when it's run\n  without `--privileged` flag.\n\n- `cap_add` ([]string) - An array of additional [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to grant to the container.\n\n- `cap_drop` ([]string) - An array of [Linux\n  capabilities](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)\n  to drop from the container.\n\n- `exec_user` (string) - Username (UID) to run remote commands with. You can also set the group\n  name/ID if you want: (UID or UID:GID). You may need this if you get\n  permission errors trying to run the shell or other provisioners.\n\n- `privileged` (bool) - If true, run the docker container with the `--privileged` flag. This\n  defaults to false if not set.\n\n- `pull` (bool) - If true, the configured image will be pulled using `docker pull` prior\n  to use. Otherwise, it is assumed the image already exists and can be\n  used. This defaults to true if not set.\n\n- `run_command` ([]string) - An array of arguments to pass to docker run in order to run the\n  container. By default this is set to `[\"-d\", \"-i\", \"-t\",\n  \"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]` if you are using a linux\n  container, and `[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n  \"{{.Image}}\"]` if you are running a windows container. `{{.Image}}` is a\n  template variable that corresponds to the image template option. Passing\n  the entrypoint option this way will make it the default entrypoint of\n  the resulting image, so running docker run -it --rm  will start the\n  docker image from the /bin/sh shell interpreter; you could run a script\n  or another shell by running docker run -it --rm  -c /bin/bash. If your\n  docker image embeds a binary intended to be run often, you should\n  consider changing the default entrypoint to point to it.\n\n- `tmpfs` ([]string) - An array of additional tmpfs volumes to mount into this container.\n\n- `volumes` (map[string]string) - A mapping of additional volumes to mount into this container. The key of\n  the object is the host path, the value is the container path.\n\n- `fix_upload_owner` (bool) - If true, files uploaded to the container will be owned by the user the\n  container is running as. If false, the owner will depend on the version\n  of docker installed in the system. Defaults to true.\n\n- `windows_container` (bool) - If \"true\", tells Packer that you are building a Windows container\n  running on a windows host. This is necessary for building Windows\n  containers, because our normal docker bindings do not work for them.\n\n- `platform` (string) - Set platform if server is multi-platform capable.\n\n- `login` (bool) - This is used to login to dockerhub to pull a private base container. For\n  pushing to dockerhub, see the docker post-processors\n\n- `login_password` (string) - The password to use to authenticate to login.\n\n- `login_server` (string) - The server address to login to.\n\n- `login_username` (string) - The username to use to authenticate to login.\n\n- `ecr_login` (bool) - Defaults to false. If true, the builder will login in order to pull the\n  image from Amazon EC2 Container Registry (ECR). The builder only logs in\n  for the duration of the pull. If true login_server is required and\n  login, login_username, and login_password will be ignored. For more\n  information see the section on ECR.\n\n## Build Shared Information Variables\n\nThis build shares generated data with provisioners and post-processors via [template engines](/packer/docs/templates/legacy_json_templates/engine)\nfor JSON and [contextual variables](/packer/docs/templates/hcl_templates/contextual-variables) for HCL2.\n\nThe generated variable available for this builder is:\n\n- `ImageSha256` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\n  this variable is only available for post-processors.\n\n## Using the Artifact: Export\n\nOnce the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the [docker-import](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import) and\n[docker-push](/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push) post-processors.\n\n**Note:** This section is covering how to use an artifact that has been\n_exported_. More specifically, if you set `export_path` in your configuration.\nIf you set `commit`, see the next section.\n\nThe example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n[Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more information):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-import\",\n        \"repository\": \"myrepo/myimage\",\n        \"tag\": \"0.7\"\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-import\" {\n        repository =  \"myrepo/myimage\"\n        tag = \"0.7\"\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-import`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `docker-push` post-processor which\nhandles pushing the image to a container repository.\n\nIf you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:\n\n```shell-session\n$ docker import - registry.mydomain.com/mycontainer:latest < artifact.tar\n```\n\nYou can then add additional tags and push the image as usual with `docker tag`\nand `docker push`, respectively.\n\n## Using the Artifact: Committed\n\nIf you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see [Post-Processors](/packer/docs/templates/legacy_json_templates/post-processors) for more\ninformation):\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\nIn the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `docker-tag` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`docker-push` post-processor which handles pushing the image to a container\nrepository.\n\nGoing a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage1\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ],\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"myrepo/myimage2\",\n        \"tags\": [\"0.7\"]\n      },\n      \"docker-push\"\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage1\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n  post-processors {\n    post-processor \"docker-tag\" {\n        repository =  \"myrepo/myimage2\"\n        tags = [\"0.7\"]\n      }\n    post-processor \"docker-push\" {}\n  }\n}\n```\n\n<span id=\"amazon-ec2-container-registry\"></span>\n\n## Docker For Windows\n\nYou should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `docker cp`.\n\nIf you are building a Windows container, you must set the template option\n`\"windows_container\": true`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.\n\nThe following is a fully functional template for building a Windows\ncontainer.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"docker\",\n      \"image\": \"microsoft/windowsservercore:1709\",\n      \"container_dir\": \"c:/app\",\n      \"windows_container\": true,\n      \"commit\": true\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"docker\" \"windows\" {\n    image = \"microsoft/windowsservercore:1709\"\n    container_dir = \"c:/app\"\n    windows_container = true\n    commit = true\n}\n\nbuild {\n  sources = [\"source.docker.example\"]\n}\n```\n\n## Amazon EC2 Container Registry\n\nPacker can tag and push images for use in [Amazon EC2 Container\nRegistry](https://aws.amazon.com/ecr/). The post processors work as described\nabove and example configuration properties are shown below:\n\n**JSON**\n\n```json\n{\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"docker-tag\",\n        \"repository\": \"12345.dkr.ecr.us-east-1.amazonaws.com/packer\",\n        \"tags\": [\"0.7\"]\n      },\n      {\n        \"type\": \"docker-push\",\n        \"ecr_login\": true,\n        \"aws_access_key\": \"YOUR KEY HERE\",\n        \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n        \"login_server\": \"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"\n      }\n    ]\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\npost-processors {\n  post-processor \"docker-tag\" {\n    repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n    tags       = [\"latest\"]\n  }\n\n  post-processor \"docker-push\" {\n    ecr_login = true\n    aws_access_key = \"YOUR KEY HERE\"\n    aws_secret_key = \"YOUR SECRET KEY HERE\"\n    login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n  }\n}\n```\n\n## Amazon ECR Public Gallery\n\nPacker can tag and push images for use in [Amazon ECR Public\nGallery](https://gallery.ecr.aws/). The post processors work as described above\nand example configuration properties are shown below:\n\n**JSON**\n\n```json\n    {\n        \"post-processors\": [\n            [\n                {\n                    \"type\": \"docker-tag\",\n                    \"repository\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\",\n                    \"tags\": [\"latest\"]\n                },\n                {\n                    \"type\": \"docker-push\",\n                    \"ecr_login\": true,\n                    \"aws_access_key\": \"YOUR KEY HERE\",\n                    \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n                    \"login_server\": \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n                }\n            ]\n        ]\n    }\n```\n\n**HCL2**\n\n```hcl\n    post-processors {\n        post-processor \"docker-tag\" {\n            repository = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"\n            tags       = [\"latest\"]\n        }\n\n        post-processor \"docker-push\" {\n            \"ecr_login\": true,\n            \"aws_access_key\": \"YOUR KEY HERE\",\n            \"aws_secret_key\": \"YOUR SECRET KEY HERE\",\n            login_server = \"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"\n        }\n    }\n```\n\n[Learn how to set Amazon AWS credentials.](/packer/integrations/hashicorp/amazon#specifying-amazon-credentials)\n\n## Dockerfiles\n\nThis builder allows you to build Docker images _without_ Dockerfiles.\n\nWith this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.\n\nWhile Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.\n\n## Overriding the host directory\n\nBy default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `PACKER_TMP_DIR`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.\n","created_at":"2023-12-22T15:48:28.087Z","updated_at":"2023-12-22T15:48:28.087Z","name":"Docker","slug":"docker","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},"processedVariablesMarkdown":{},"anchorLinks":[{"id":"basic-example:-export","level":2,"title":"Basic Example: Export"},{"id":"basic-example:-commit","level":2,"title":"Basic Example: Commit"},{"id":"basic-example:-changes-to-metadata","level":2,"title":"Basic Example: Changes to Metadata"},{"id":"configuration-reference","level":2,"title":"Configuration Reference"},{"id":"required:","level":3,"title":"Required:"},{"id":"optional:","level":3,"title":"Optional:"},{"id":"build-shared-information-variables","level":2,"title":"Build Shared Information Variables"},{"id":"using-the-artifact:-export","level":2,"title":"Using the Artifact: Export"},{"id":"using-the-artifact:-committed","level":2,"title":"Using the Artifact: Committed"},{"id":"docker-for-windows","level":2,"title":"Docker For Windows"},{"id":"amazon-ec2-container-registry","level":2,"title":"Amazon EC2 Container Registry"},{"id":"amazon-ecr-public-gallery","level":2,"title":"Amazon ECR Public Gallery"},{"id":"dockerfiles","level":2,"title":"Dockerfiles"},{"id":"overriding-the-host-directory","level":2,"title":"Overriding the host directory"}],"serializedREADME":{"compiledSource":"var l=Object.defineProperty,N=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var c=(a,n,s)=>n in a?l(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))o.call(n,s)&&c(a,s,n[s]);if(p)for(var s of p(n))r.call(n,s)&&c(a,s,n[s]);return a},m=(a,n)=>N(a,d(n));var i=(a,n)=>{var s={};for(var t in a)o.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&p)for(var t of p(a))n.indexOf(t)<0&&r.call(a,t)&&(s[t]=a[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=i(t,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Type: \",mdx(\"inlineCode\",{parentName:\"p\"},\"docker\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"docker\"),\" Packer builder builds \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.docker.io\"}),\"Docker\"),` images using\nDocker. The builder starts a Docker container, runs provisioners within this\ncontainer, then exports the container for reuse or commits the image.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Packer builds Docker containers \",mdx(\"em\",{parentName:\"p\"},\"without\"),` the use of\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.docker.com/engine/reference/builder/\"}),\"Dockerfiles\"),`. By not using\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"Dockerfiles\"),`, Packer is able to provision containers with portable scripts or\nconfiguration management systems that are not tied to Docker in any way. It\nalso has a simple mental model: you provision containers much the same way you\nprovision a normal virtualized or dedicated server. For more information, read\nthe section on `,mdx(\"a\",e({parentName:\"p\"},{href:\"#dockerfiles\"}),\"Dockerfiles\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The Docker builder must run on a machine that has Docker Engine installed.\nTherefore the builder only works on machines that support Docker and `,mdx(\"em\",{parentName:\"p\"},`does not\nsupport running on a Docker remote host`),\". You can learn about what \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.docker.com/engine/installation/\"}),`platforms\nDocker supports and how to install onto\nthem`),` in the Docker\ndocumentation.`),mdx(\"h2\",e({},{id:\"user-content-basic-example:-export\",\"data-text-content\":\"Basic Example Export\",className:\"g-type-display-3\"}),\"Basic Example: Export\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Below is a fully functioning example. It doesn't do anything useful, since no\nprovisioners are defined, but it will effectively repackage an image.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"image\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"export_path\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"image.tar\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"source \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"example\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"image\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"export_path\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"image.tar\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"source.docker.example\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"user-content-basic-example:-commit\",\"data-text-content\":\"Basic Example Commit\",className:\"g-type-display-3\"}),\"Basic Example: Commit\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Below is another example, the same as above but instead of exporting the\nrunning container, this one commits the container to an image. The image can\nthen be more easily tagged, pushed, etc.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"image\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"export_path\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"image.tar\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"source \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"example\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"image\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"commit\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"source.docker.example\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"user-content-basic-example:-changes-to-metadata\",\"data-text-content\":\"Basic Example Changes to Metadata\",className:\"g-type-display-3\"}),\"Basic Example: Changes to Metadata\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Below is an example using the changes argument of the builder. This feature\nallows the source images metadata to be changed when committed back into the\nDocker environment. It is derived from the `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker commit --change\"),` command\nline `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.docker.com/engine/reference/commandline/commit/\"}),`option to\nDocker`),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Example uses of all of the options, assuming one is building an NGINX image\nfrom ubuntu as an simple example:`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"image\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"commit\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"changes\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"USER www-data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"WORKDIR /var/www\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ENV HOSTNAME www.example.com\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"VOLUME /test1 /test2\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"EXPOSE 80 443\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"LABEL version=1.0\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ONBUILD RUN date\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ENTRYPOINT /var/www/start.sh\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"source \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"example\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"image\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"commit\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"changes\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"USER www-data\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"WORKDIR /var/www\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ENV HOSTNAME www.example.com\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"VOLUME /test1 /test2\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"EXPOSE 80 443\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"LABEL version=1.0\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ONBUILD RUN date\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"'),\",\",`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ENTRYPOINT /var/www/start.sh\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Allowed metadata fields that can be changed are:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"CMD\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, supports both array (escaped) and string form\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"CMD [\\\\\"nginx\\\\\", \\\\\"-g\\\\\", \\\\\"daemon off;\\\\\"]\"'),\" corresponds to Docker exec form\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"CMD nginx -g daemon off;\"'),\" corresponds to Docker shell form, invokes a command shell first\"))),mdx(\"li\",{parentName:\"ul\"},\"ENTRYPOINT\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, supports both array (escaped) and string form\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"ENTRYPOINT [\\\\\"/bin/sh\\\\\", \\\\\"-c\\\\\", \\\\\"/var/www/start.sh\\\\\"]\"'),\" corresponds to Docker exec form\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"ENTRYPOINT /var/www/start.sh\"'),\" corresponds to Docker shell form, invokes a command shell first\"))),mdx(\"li\",{parentName:\"ul\"},\"ENV\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, note there is no equal sign:\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"ENV HOSTNAME www.example.com\"'),` not\n`,mdx(\"inlineCode\",{parentName:\"li\"},'\"ENV HOSTNAME=www.example.com\"')))),mdx(\"li\",{parentName:\"ul\"},\"EXPOSE\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, space separated ports\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"EXPOSE 80 443\"')))),mdx(\"li\",{parentName:\"ul\"},\"LABEL\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, space separated key=value pairs\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"LABEL version=1.0\"')))),mdx(\"li\",{parentName:\"ul\"},\"ONBUILD\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"ONBUILD RUN date\"')))),mdx(\"li\",{parentName:\"ul\"},\"MAINTAINER\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String, deprecated in Docker version 1.13.0\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"MAINTAINER NAME\"')))),mdx(\"li\",{parentName:\"ul\"},\"USER\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"USER USERNAME\"')))),mdx(\"li\",{parentName:\"ul\"},\"VOLUME\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"VOLUME FROM TO\"')))),mdx(\"li\",{parentName:\"ul\"},\"WORKDIR\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"String\"),mdx(\"li\",{parentName:\"ul\"},\"EX: \",mdx(\"inlineCode\",{parentName:\"li\"},'\"WORKDIR PATH\"'))))),mdx(\"h2\",e({},{id:\"user-content-configuration-reference\",\"data-text-content\":\"Configuration Reference\",className:\"g-type-display-3\"}),\"Configuration Reference\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Configuration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The Docker builder uses a special Docker communicator \",mdx(\"em\",{parentName:\"p\"},\"and will not use\"),` the\nstandard `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/templates/legacy_json_templates/communicators\"}),\"communicators\"),\".\"),mdx(\"h3\",e({},{id:\"user-content-required:\",\"data-text-content\":\"Required\",className:\"g-type-display-4\"}),\"Required:\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"You must specify (only) one of \",mdx(\"inlineCode\",{parentName:\"p\"},\"commit\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"discard\"),\", or \",mdx(\"inlineCode\",{parentName:\"p\"},\"export_path\"),\".\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"commit\"),\" (bool) - If true, the container will be committed to an image rather than exported.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"discard\"),` (bool) - Throw away the container when the build is complete. This is useful for\nthe `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/post-processor/artifice\"}),`artifice\npost-processor`),\".\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"export_path\"),\" (string) - The path where the final container will be exported as a tar file.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"image\"),` (string) - The base image for the Docker container that will be started. This image\nwill be pulled from the Docker registry if it doesn't already exist.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"message\"),\" (string) - Set a message for the commit.\"))),mdx(\"h3\",e({},{id:\"user-content-optional:\",\"data-text-content\":\"Optional\",className:\"g-type-display-4\"}),\"Optional:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"aws_access_key\"),` (string) - The AWS access key used to communicate with\nAWS. `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/amazon#specifying-amazon-credentials\"}),\"Learn how to set this.\"),\" \")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"aws_secret_key\"),` (string) - The AWS secret key used to communicate with\nAWS. `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/amazon#specifying-amazon-credentials\"}),\"Learn how to set this.\"))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"aws_token\"),` (string) - The AWS access token to use. This is different from\nthe access key and secret key. If you're not sure what this is, then you\nprobably don't need it. This will also be read from the AWS_SESSION_TOKEN\nenvironmental variable.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"aws_profile\"),` (string) - The AWS shared credentials profile used to\ncommunicate with AWS. `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/amazon#specifying-amazon-credentials\"}),\"Learn how to set this.\"))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"author\"),\" (string) - Set the author (e-mail) of a commit.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"changes\"),` ([]string) - Dockerfile instructions to add to the commit. Example of instructions\nare CMD, ENTRYPOINT, ENV, and EXPOSE. Example: `,`[ \"USER ubuntu\", \"WORKDIR\n/app\", \"EXPOSE 8080\" ]`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"container_dir\"),` (string) - The directory inside container to mount temp directory from host server\nfor work `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/provisioner/file\"}),\"file provisioner\"),`. This defaults\nto c:/packer-files on windows and /packer-files on other systems.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"device\"),` ([]string) - An array of devices which will be accessible in container when it's run\nwithout `,mdx(\"inlineCode\",{parentName:\"p\"},\"--privileged\"),\" flag.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"cap_add\"),\" ([]string) - An array of additional \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\"}),`Linux\ncapabilities`),`\nto grant to the container.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"cap_drop\"),\" ([]string) - An array of \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\"}),`Linux\ncapabilities`),`\nto drop from the container.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"exec_user\"),` (string) - Username (UID) to run remote commands with. You can also set the group\nname/ID if you want: (UID or UID:GID). You may need this if you get\npermission errors trying to run the shell or other provisioners.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"privileged\"),\" (bool) - If true, run the docker container with the \",mdx(\"inlineCode\",{parentName:\"p\"},\"--privileged\"),` flag. This\ndefaults to false if not set.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"pull\"),\" (bool) - If true, the configured image will be pulled using \",mdx(\"inlineCode\",{parentName:\"p\"},\"docker pull\"),` prior\nto use. Otherwise, it is assumed the image already exists and can be\nused. This defaults to true if not set.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"run_command\"),` ([]string) - An array of arguments to pass to docker run in order to run the\ncontainer. By default this is set to `,mdx(\"inlineCode\",{parentName:\"p\"},`[\"-d\", \"-i\", \"-t\",\n\"--entrypoint=/bin/sh\", \"--\", \"{{.Image}}\"]`),` if you are using a linux\ncontainer, and `,mdx(\"inlineCode\",{parentName:\"p\"},`[\"-d\", \"-i\", \"-t\", \"--entrypoint=powershell\", \"--\",\n\"{{.Image}}\"]`),\" if you are running a windows container. \",mdx(\"inlineCode\",{parentName:\"p\"},\"{{.Image}}\"),` is a\ntemplate variable that corresponds to the image template option. Passing\nthe entrypoint option this way will make it the default entrypoint of\nthe resulting image, so running docker run -it --rm  will start the\ndocker image from the /bin/sh shell interpreter; you could run a script\nor another shell by running docker run -it --rm  -c /bin/bash. If your\ndocker image embeds a binary intended to be run often, you should\nconsider changing the default entrypoint to point to it.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"tmpfs\"),\" ([]string) - An array of additional tmpfs volumes to mount into this container.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"volumes\"),\" (map\",\"[string]\",`string) - A mapping of additional volumes to mount into this container. The key of\nthe object is the host path, the value is the container path.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"fix_upload_owner\"),` (bool) - If true, files uploaded to the container will be owned by the user the\ncontainer is running as. If false, the owner will depend on the version\nof docker installed in the system. Defaults to true.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"windows_container\"),` (bool) - If \"true\", tells Packer that you are building a Windows container\nrunning on a windows host. This is necessary for building Windows\ncontainers, because our normal docker bindings do not work for them.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"platform\"),\" (string) - Set platform if server is multi-platform capable.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"login\"),` (bool) - This is used to login to dockerhub to pull a private base container. For\npushing to dockerhub, see the docker post-processors`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"login_password\"),\" (string) - The password to use to authenticate to login.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"login_server\"),\" (string) - The server address to login to.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"login_username\"),\" (string) - The username to use to authenticate to login.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"ecr_login\"),` (bool) - Defaults to false. If true, the builder will login in order to pull the\nimage from Amazon EC2 Container Registry (ECR). The builder only logs in\nfor the duration of the pull. If true login_server is required and\nlogin, login_username, and login_password will be ignored. For more\ninformation see the section on ECR.`))),mdx(\"h2\",e({},{id:\"user-content-build-shared-information-variables\",\"data-text-content\":\"Build Shared Information Variables\",className:\"g-type-display-3\"}),\"Build Shared Information Variables\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This build shares generated data with provisioners and post-processors via \",mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/templates/legacy_json_templates/engine\"}),\"template engines\"),`\nfor JSON and `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/templates/hcl_templates/contextual-variables\"}),\"contextual variables\"),\" for HCL2.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The generated variable available for this builder is:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"ImageSha256\"),` - When committing a container to an image, this will give the image SHA256. Because the image is not available at the provision step,\nthis variable is only available for post-processors.`)),mdx(\"h2\",e({},{id:\"user-content-using-the-artifact:-export\",\"data-text-content\":\"Using the Artifact Export\",className:\"g-type-display-3\"}),\"Using the Artifact: Export\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Once the tar artifact has been generated, you will likely want to import, tag,\nand push it to a container repository. Packer can do this for you automatically\nwith the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-import\"}),\"docker-import\"),` and\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/docker/latest/components/post-processor/docker-push\"}),\"docker-push\"),\" post-processors.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Note:\"),` This section is covering how to use an artifact that has been\n`,mdx(\"em\",{parentName:\"p\"},\"exported\"),\". More specifically, if you set \",mdx(\"inlineCode\",{parentName:\"p\"},\"export_path\"),` in your configuration.\nIf you set `,mdx(\"inlineCode\",{parentName:\"p\"},\"commit\"),\", see the next section.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The example below shows a full configuration that would import and push the\ncreated image. This is accomplished using a sequence definition (a collection\nof post-processors that are treated as as single pipeline, see\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/templates/legacy_json_templates/post-processors\"}),\"Post-Processors\"),\" for more information):\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"post-processors\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-import\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-import\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tag\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker-import\"),`\npost-processor which will import the artifact as a docker image. The resulting\ndocker image is then passed on to the `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker-push\"),` post-processor which\nhandles pushing the image to a container repository.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you want to do this manually, however, perhaps from a script, you can import\nthe image using the process below:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"docker \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"import\"),\" - registry.mydomain.com/mycontainer:latest \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"< artifact.tar\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"You can then add additional tags and push the image as usual with \",mdx(\"inlineCode\",{parentName:\"p\"},\"docker tag\"),`\nand `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker push\"),\", respectively.\"),mdx(\"h2\",e({},{id:\"user-content-using-the-artifact:-committed\",\"data-text-content\":\"Using the Artifact Committed\",className:\"g-type-display-3\"}),\"Using the Artifact: Committed\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you committed your container to an image, you probably want to tag, save,\npush, etc. Packer can do this automatically for you. An example is shown below\nwhich tags and pushes an image. This is accomplished using a sequence\ndefinition (a collection of post-processors that are treated as as single\npipeline, see `,mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/docs/templates/legacy_json_templates/post-processors\"}),\"Post-Processors\"),` for more\ninformation):`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"post-processors\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tags\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tags\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In the above example, the result of each builder is passed through the defined\nsequence of post-processors starting first with the `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker-tag\"),` post-processor\nwhich tags the committed image with the supplied repository and tag\ninformation. Once tagged, the resulting artifact is then passed on to the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"docker-push\"),` post-processor which handles pushing the image to a container\nrepository.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Going a step further, if you wanted to tag and push an image to multiple\ncontainer repositories, this could be accomplished by defining two,\nnearly-identical sequence definitions, as demonstrated by the example below:`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"post-processors\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage1\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tags\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage2\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tags\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage1\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tags\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"myrepo/myimage2\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tags\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"user-content-docker-for-windows\",\"data-text-content\":\"Docker For Windows\",className:\"g-type-display-3\"}),\"Docker For Windows\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`You should be able to run docker builds against both linux and Windows\ncontainers. Windows containers use a different communicator than linux\ncontainers, because Windows containers cannot use `,mdx(\"inlineCode\",{parentName:\"p\"},\"docker cp\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you are building a Windows container, you must set the template option\n`,mdx(\"inlineCode\",{parentName:\"p\"},'\"windows_container\": true'),`. Please note that docker cannot export Windows\ncontainers, so you must either commit or discard them.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The following is a fully functional template for building a Windows\ncontainer.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"builders\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"image\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"microsoft/windowsservercore:1709\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"container_dir\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"c:/app\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"windows_container\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"commit\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"source \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"windows\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"image\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"microsoft/windowsservercore:1709\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"container_dir\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"c:/app\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"windows_container\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"commit\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"source.docker.example\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"user-content-amazon-ec2-container-registry\",\"data-text-content\":\"Amazon EC2 Container Registry\",className:\"g-type-display-3\"}),\"Amazon EC2 Container Registry\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Packer can tag and push images for use in \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://aws.amazon.com/ecr/\"}),`Amazon EC2 Container\nRegistry`),`. The post processors work as described\nabove and example configuration properties are shown below:`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"post-processors\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"12345.dkr.ecr.us-east-1.amazonaws.com/packer\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tags\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"0.7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ecr_login\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_access_key\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR KEY HERE\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_secret_key\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR SECRET KEY HERE\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"login_server\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"https://12345.dkr.ecr.us-east-1.amazonaws.com/\"'),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tags\"),\"       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"latest\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"  post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"ecr_login\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"aws_access_key\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR KEY HERE\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"aws_secret_key\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR SECRET KEY HERE\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"login_server\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"user-content-amazon-ecr-public-gallery\",\"data-text-content\":\"Amazon ECR Public Gallery\",className:\"g-type-display-3\"}),\"Amazon ECR Public Gallery\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Packer can tag and push images for use in \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://gallery.ecr.aws/\"}),`Amazon ECR Public\nGallery`),`. The post processors work as described above\nand example configuration properties are shown below:`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"JSON\")),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"post-processors\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"                \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"repository\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"tags\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"latest\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"                \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"type\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ecr_login\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_access_key\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR KEY HERE\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_secret_key\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR SECRET KEY HERE\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"                    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"login_server\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"'),`\n`,\"                \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"HCL2\")),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"post-processors\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-tag\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"repository\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE/YOUR REGISTRY NAME HERE\"'),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"tags\"),\"       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"latest\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"        post-processor \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"docker-push\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ecr_login\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),\",\",`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_access_key\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR KEY HERE\"'),\",\",`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"aws_secret_key\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"YOUR SECRET KEY HERE\"'),\",\",`\n`,\"            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"login_server\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"public.ecr.aws/YOUR REGISTRY ALIAS HERE\"'),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"/packer/integrations/hashicorp/amazon#specifying-amazon-credentials\"}),\"Learn how to set Amazon AWS credentials.\")),mdx(\"h2\",e({},{id:\"user-content-dockerfiles\",\"data-text-content\":\"Dockerfiles\",className:\"g-type-display-3\"}),\"Dockerfiles\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This builder allows you to build Docker images \",mdx(\"em\",{parentName:\"p\"},\"without\"),\" Dockerfiles.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`With this builder, you can repeatedly create Docker images without the use of a\nDockerfile. You don't need to know the syntax or semantics of Dockerfiles.\nInstead, you can just provide shell scripts, Chef recipes, Puppet manifests,\netc. to provision your Docker container just like you would a regular\nvirtualized or dedicated machine.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`While Docker has many features, Packer views Docker simply as a container\nrunner. To that end, Packer is able to repeatedly build these containers using\nportable provisioning scripts.`),mdx(\"h2\",e({},{id:\"user-content-overriding-the-host-directory\",\"data-text-content\":\"Overriding the host directory\",className:\"g-type-display-3\"}),\"Overriding the host directory\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`By default, Packer creates a temporary folder under your home directory, and\nuses that to stage files for uploading into the container. If you would like to\nchange the path to this temporary folder, you can set the `,mdx(\"inlineCode\",{parentName:\"p\"},\"PACKER_TMP_DIR\"),`.\nThis can be useful, for example, if you have your home directory permissions\nset up to disallow access from the docker daemon.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"Docker","url":"/packer/integrations/hashicorp/docker","isCurrentPage":false},{"title":"v1.0.9","url":"/packer/integrations/hashicorp/docker/v1.0.9","isCurrentPage":false},{"title":"Components"},{"title":"Builder"},{"title":"Docker","url":"/packer/integrations/hashicorp/docker/latest/components/builder/docker","isCurrentPage":true}]},"__N_SSG":true}